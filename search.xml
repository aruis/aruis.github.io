<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>reactive-pg-clientä¸­çš„æ•°æ®åº“äº‹åŠ¡</title>
      <link href="/2018/09/16/transaction_in_reactive-pg-client/"/>
      <url>/2018/09/16/transaction_in_reactive-pg-client/</url>
      <content type="html"><![CDATA[<p>ä½¿ç”¨<code>reactive-pg-client</code>ä¸­çš„æ•°æ®åº“äº‹åŠ¡æœ‰ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>PgConnection</code>çš„<code>begin</code>æ–¹æ³•ï¼Œå¼€å¯ä¸€æ®µæ•°æ®åº“äº‹åŠ¡ï¼›å¦ä¸€ç§æ˜¯é€šè¿‡<code>PgPool</code>çš„<code>begin</code>æ–¹æ³•ã€‚<br>å…ˆæ¥çœ‹ç¬¬ä¸€ç§ï¼š<br><figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">pool</span>.getConnection(res -&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.succeeded()) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Transaction must use a connection</span></span><br><span class="line">    PgConnection conn = res.result();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Begin the transaction</span></span><br><span class="line">    PgTransaction tx = conn.begin();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Various statements</span></span><br><span class="line">    <span class="function"><span class="title">conn</span>.query("INSERT INTO Users (first_name,last_name) VALUES ('Julien','Viet')", ar -&gt;</span> &#123;&#125;);</span><br><span class="line">    <span class="function"><span class="title">conn</span>.query("INSERT INTO Users (first_name,last_name) VALUES ('Emad','Alblueshi')", ar -&gt;</span> &#123;&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Commit the transaction</span></span><br><span class="line">    <span class="function"><span class="title">tx</span>.commit(ar -&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (ar.succeeded()) &#123;</span><br><span class="line">        System.out.println(<span class="string">"Transaction succeeded"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"Transaction failed "</span> + ar.cause().getMessage());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Return the connection to the pool</span></span><br><span class="line">      conn.close();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å†çœ‹ç¬¬äºŒç§ï¼š<br><figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">pool</span>.begin(res -&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.succeeded()) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the transaction</span></span><br><span class="line">    PgTransaction tx = res.result();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Various statements</span></span><br><span class="line">    <span class="function"><span class="title">tx</span>.query("INSERT INTO Users (first_name,last_name) VALUES ('Julien','Viet')", ar -&gt;</span> &#123;&#125;);</span><br><span class="line">    <span class="function"><span class="title">tx</span>.query("INSERT INTO Users (first_name,last_name) VALUES ('Emad','Alblueshi')", ar -&gt;</span> &#123;&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Commit the transaction and return the connection to the pool</span></span><br><span class="line">    <span class="function"><span class="title">tx</span>.commit(ar -&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (ar.succeeded()) &#123;</span><br><span class="line">        System.out.println(<span class="string">"Transaction succeeded"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"Transaction failed "</span> + ar.cause().getMessage());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ç¬¬äºŒç§å†™æ³•æ›´ä¸ºç²¾ç®€ï¼Œ<code>Handler</code>å†…éƒ¨ç›´æ¥å¯ä»¥æ‹¿åˆ°<code>PgTransaction</code>ï¼Œä¸éœ€è¦åƒç¬¬ä¸€ç§é‚£æ ·ä½¿ç”¨<code>PgConnection</code>çš„<code>begin</code>æ‰èƒ½å¾—åˆ°<code>PgTransaction</code>ï¼Œå¹¶ä¸”å› ä¸ºç¬¬äºŒç§ä¸å­˜åœ¨ç›´æ¥æ“çºµ<code>PgConnection</code>ï¼Œè‡ªç„¶ä¹Ÿçœç•¥äº†æ‰‹åŠ¨<code>close</code>çš„æ­¥éª¤ã€‚<br>ç»è¿‡æˆ‘è‡ªå·±æµ‹è¯•ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š</p><ul><li><code>PgTransaction</code>å¯ä»¥é€šè¿‡<code>abortHandler</code>æ–¹æ³•ï¼Œæ•æ‰åˆ°äº‹åŠ¡å¤±è´¥ï¼ˆå¦‚æœå¤±è´¥çš„è¯ï¼‰çš„äº‹ä»¶ã€‚</li><li>åœ¨ä½¿ç”¨äº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œæƒ³é€šè¿‡<code>preparedQuery</code>ä½¿ç”¨é¢„ç¼–è¯‘çš„<code>SQL</code>æœªèƒ½æˆåŠŸï¼Œç›®å‰åŸå› æœªçŸ¥ã€‚</li></ul><p>è¯¦ç»†çš„æ¼”ç¤ºä»£ç ï¼Œå¯ä»¥åœ¨æˆ‘çš„<a href="https://github.com/aruis/studyvertx/blob/master/src/test/groovy/com/aruistar/studyvertx/ReactivePostgresClientTest.groovy" target="_blank" rel="noopener">github</a>ä¸­æ‰¾åˆ°ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>reactive-pg-clientå®ç°æ•°æ®åº“åˆ°åº”ç”¨ç¨‹åºçš„æ•°æ®æ¨é€</title>
      <link href="/2018/09/15/reactive-pg-client_notify/"/>
      <url>/2018/09/15/reactive-pg-client_notify/</url>
      <content type="html"><![CDATA[<p>æ˜¨å¤©èŠè¿‡ï¼Œä¾æ‰˜<code>reactive-pg-client</code>å¯ä»¥åšå¾ˆå¤šä¼ ç»Ÿ<code>JDBC</code>æ— æ³•å®ç°çš„äº‹æƒ…ï¼Œæ¯”å¦‚<code>PostgreSQL</code>çš„æ¶ˆæ¯æ¨é€ï¼ˆ<code>notify</code>å’Œ<code>listen</code>ï¼‰ã€‚æœ‰äº†è¿™ç§åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ˜“å®ç°ä»æ•°æ®åº“å±‚ä¸»å‘ä¸šåŠ¡é€»è¾‘ä»£ç æ¨é€æ¶ˆæ¯çš„åŠŸèƒ½ã€‚å¯ä»¥è¯´ï¼Œåˆä¸€æ¬¡ä¸ºæˆ‘ä»¬æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚</p><h3 id="å…ˆæ¥å›é¡¾ä¸‹PostgreSQLçš„notifyå’Œlisten"><a href="#å…ˆæ¥å›é¡¾ä¸‹PostgreSQLçš„notifyå’Œlisten" class="headerlink" title="å…ˆæ¥å›é¡¾ä¸‹PostgreSQLçš„notifyå’Œlisten"></a>å…ˆæ¥å›é¡¾ä¸‹<code>PostgreSQL</code>çš„<code>notify</code>å’Œ<code>listen</code></h3><p>ä¸»è¦å‚è€ƒ<a href="http://www.postgres.cn/docs/10/sql-notify.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œæ ¸å¿ƒ<code>SQL</code>å°±ä¸¤å¥è¯ï¼š</p><ul><li><p>å‘æ¶ˆæ¯ï¼š</p>  <figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">NOTIFY channel_name<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>  <code>NOTIFY</code>æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œåé¢è·Ÿç€çš„ç¬¬ä¸€å‚æ•°æ˜¯ï¼Œé¢‘é“çš„åå­—ï¼Œè¿™ä¸ªæ˜¯ç”¨æˆ·éšä¾¿å®šä¹‰çš„ï¼Œåªè¦ä¹‹åè·Ÿ<code>LISTEN</code>çš„ä¿æŒä¸€è‡´å³å¯ã€‚<code>NOTIFY</code>è¿˜æœ‰ç¬¬äºŒä¸ªå¯é€‰å‚æ•°ï¼Œå°±æ˜¯æ¶ˆæ¯å†…å®¹ï¼Œç±»å‹ä¹Ÿå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”é•¿åº¦é™åˆ¶åœ¨<code>8000</code>å­—èŠ‚ã€‚<br>  <code>NOTIFY channel_name message_body</code>è¿˜æœ‰ä¸€ç§ç­‰æ•ˆçš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯</p>  <figure class="highlight ada"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> pg_notify(channel_nameï¼Œmessage_bodyï¼‰</span><br></pre></td></tr></table></figure><p>  åè€…çš„å¥½å¤„æ˜¯å¯ä»¥ç”¨åˆ°<code>SQL</code>çš„é¢„ç¼–è¯‘ç‰¹æ€§ã€‚</p></li><li>æ”¶æ¶ˆæ¯ï¼š  <figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">LISTEN channel_name<span class="comment">;</span></span><br></pre></td></tr></table></figure></li></ul><p>è¿™é‡Œè¡¥å……å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ul><li><code>NOTIFY</code>/<code>LISTEN</code>è¿™äº›è¯­æ³•ä¸æ˜¯<code>SQL</code> æ ‡å‡†ï¼Œå±äº<code>PostgreSQL</code>ç‰¹æœ‰çš„åŠŸèƒ½</li><li>è·Ÿ<code>LISTEN</code>ç›¸åçš„ï¼Œæœ‰<code>UNLISTEN</code>å¯ä¾›ä½¿ç”¨</li><li><code>NOTIFY</code>æ˜¯å¹¿æ’­æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰åŒé¢‘é“çš„<code>LISTEN</code>éƒ½èƒ½æ¥æ”¶åˆ°ä¿¡æ¯</li><li>å…ˆ<code>NOTIFY</code>ï¼Œå†<code>LISTEN</code>æ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚è¿™ä¸ªä¹Ÿç¬¦åˆç›´è§‰ã€‚</li><li>æƒ³æµ‹è¯•çš„è¯ï¼Œæœ€å¥½å€ŸåŠ©<code>PostgreSQL</code>è‡ªå¸¦çš„<code>psql</code>ç¯å¢ƒï¼Œå¯ä»¥å¾ˆå®¹æ˜“æµ‹è¯•ï¼Œå…¶ä»–<code>SQL</code>å®¢æˆ·ç«¯ç¨‹åºå¯èƒ½å°±æ²¡é‚£ä¹ˆå‹å¥½äº†ã€‚</li></ul><h3 id="æœ‰äº†PostgreSQLçš„åŸºç¡€çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨reactive-pg-clientå°è¯•ä¸€æŠŠäº†"><a href="#æœ‰äº†PostgreSQLçš„åŸºç¡€çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨reactive-pg-clientå°è¯•ä¸€æŠŠäº†" class="headerlink" title="æœ‰äº†PostgreSQLçš„åŸºç¡€çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨reactive-pg-clientå°è¯•ä¸€æŠŠäº†"></a>æœ‰äº†<code>PostgreSQL</code>çš„åŸºç¡€çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨<code>reactive-pg-client</code>å°è¯•ä¸€æŠŠäº†</h3><p>ç›´æ¥ä¸Šä»£ç <br><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">pgClient.getConnection &#123;</span><br><span class="line">           def conn = it.result()</span><br><span class="line"></span><br><span class="line">           conn.notificationHandler(&#123; notification -&gt;</span><br><span class="line">               println(<span class="string">"Received $&#123;notification.payload&#125; on channel $&#123;notification.channel&#125;"</span>)</span><br><span class="line">               context.assertEquals(notification.payload, message)</span><br><span class="line">               context.assertEquals(notification.channel, channelName)</span><br><span class="line">               async.complete()</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">           conn.preparedQuery(<span class="string">"LISTEN $channelName"</span>, &#123; ar -&gt;</span><br><span class="line">               println(<span class="string">"Subscribed to channel"</span>)</span><br><span class="line"></span><br><span class="line">               conn.preparedQuery(<span class="string">'''select pg_notify($1,$2)'''</span>, Tuple.of(channelName, message), &#123;&#125;)</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><p>æ²¡ä»€ä¹ˆå¤æ‚çš„ï¼Œé€šè¿‡<code>reactive-pg-client</code>æ‹¿åˆ°<code>connection</code>ä¹‹åï¼Œå…ˆç”¨è¿™ä¸ª<code>connection</code>æ³¨å†Œä¸ª<code>notificationHandler</code>ç”¨æ¥æ¥æ”¶æ¶ˆæ¯ã€‚ä½†æ˜¯æ­¤æ—¶è¿˜ä¸å¤Ÿï¼Œè¿˜å¿…é¡»åœ¨åŒ<code>connection</code>ä¸Šæ‰§è¡Œ<code>LISTEN</code>çš„<code>SQL</code>è¯­å¥ï¼Œæ‰èƒ½ä¿è¯ä¹‹å‰çš„<code>notificationHandler</code>æ˜¯æœ‰æ•ˆçš„ã€‚è‡³äº<code>NOTIFY</code>è¯­å¥å¹¶ä¸è¦æ±‚éè¦ç”¨è¿™ä¸ª<code>connection</code>ï¼Œè¿™ä¹Ÿæ˜¯ç¬¦åˆæˆ‘ä»¬ä¸šåŠ¡éœ€æ±‚çš„ã€‚<br>ä»¥ä¸Šå®Œæ•´ä»£ç ï¼Œå¯ä»¥åœ¨æˆ‘çš„<a href="https://github.com/aruis/studyvertx/blob/master/src/test/groovy/com/aruistar/studyvertx/ReactivePostgresClientTest.groovy" target="_blank" rel="noopener">github</a>ä¸­æ‰¾åˆ°ã€‚<br>ä¸Šé¢æˆ‘æ˜¯åœ¨å½“å‰ä»£ç ä¸­ï¼Œæ‰‹åŠ¨<code>NOTIFY</code>çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å§<code>NOTIFY</code>æ”¾åœ¨æ•°æ®åº“çš„è§¦å‘å™¨ã€æˆ–è€…æ•°æ®åº“å®šæ—¶ä»»åŠ¡ä¸­ï¼Œå°±å¯ä»¥å®ç°æ•°æ®åº“åˆ°åº”ç”¨ç¨‹åºçš„æ•°æ®æ¨é€äº†ã€‚å¦å¤–ç»æµ‹è¯•ï¼Œ<code>NOTIFY</code>ä¸<code>LISTEN</code>ä¸¤ä¸ªè¯­æ³•åœ¨<code>JDBC</code>ç¯å¢ƒä¸‹ä¹Ÿæ˜¯å¯ä»¥æ‰§è¡ŒæˆåŠŸçš„ï¼ˆ<code>SQL</code>ä¸ä¼šæŠ¥é”™ï¼‰ï¼Œåªæ˜¯<code>LISTEN</code>ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœå°±æ˜¯äº†ã€‚</p><p>æ˜å¤©ï¼Œæˆ‘å°†æ¼”ç¤ºåŸºäº<code>reactive-pg-client</code>çš„æ•°æ®åº“äº‹åŠ¡demoã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ€§èƒ½å°ç¥çš„æ•°æ®åº“è®¿é—®åº“reactive-pg-clientåˆæ¢</title>
      <link href="/2018/09/14/reactive-pg-client_start/"/>
      <url>/2018/09/14/reactive-pg-client_start/</url>
      <content type="html"><![CDATA[<p>ä¸çŸ¥é“æœ‰æ²¡æœ‰äººå…³æ³¨è¿‡TechEmpowerçš„<code>Web Framework Benchmarks</code>ï¼ˆ<a href="https://www.techempower.com/benchmarks/" target="_blank" rel="noopener">https://www.techempower.com/benchmarks/</a> ï¼‰ï¼Œä¸€ç§æŠŠå„ç§<code>Web</code>åç«¯å¼€å‘æŠ€æœ¯éƒ½ç½—åˆ—èµ·æ¥ï¼Œåœ¨åŒæ ·çš„æœºå™¨ä¸‹è·‘æœ€ç®€å•çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¥å¯¹æ¯”å„æŠ€æœ¯æ€§èƒ½çš„ç«èµ›ã€‚å‚ä¸è·‘åˆ†çš„æŠ€æœ¯ä»£ç ï¼Œéƒ½æ˜¯å¼€æºçš„ï¼Œç”šè‡³å¾ˆå¤šä»£ç å°±æ˜¯ç”±<code>Web</code>æŠ€æœ¯æœ¬èº«çš„ä½œè€…ç»´æŠ¤çš„ã€‚<br>è™½è¯´ï¼Œè·‘åˆ†ä¸èƒ½ä»£è¡¨æ€§èƒ½ï¼Œæ€§èƒ½æ›´ä¸èƒ½ä»£è¡¨æŠ€æœ¯çš„ä¼˜åŠ£ã€‚ä½†æ˜¯æœ‰ç€ä¹ˆä¸€ä¸ªæ€§èƒ½ç»´åº¦çš„ç²—æµ…æ¯”è¾ƒï¼Œè¿˜æ˜¯èƒ½å¸¦ç»™æˆ‘ä»¬ä¸ä¸€æ ·çš„æ”¶è·ã€‚<br>æ¯”å¦‚ï¼Œåœ¨<code>2018-06-06</code>çš„æœ€æ–°ä¸€åœºæ¯”æ‹¼ä¸­ï¼Œ<code>Vert.x</code>æ­é…<code>PostgreSQL</code>çš„ç»„åˆï¼Œåœ¨éƒ¨åˆ†æ¯”è¯•æ—¶è¡¨ç°ååˆ†æŠ¢çœ¼ï¼Œæ€§èƒ½ä¸€éª‘ç»å°˜ä¸”å¤§å¹…é¢†å…ˆç¬¬äºŒåã€‚è¢«å®ƒè¸©åœ¨è„šä¸‹æ‘©æ“¦çš„å¯¹æ‰‹ï¼Œä¸ä¹æˆ‘ä»¬ç†ŸçŸ¥çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ¯”å¦‚<code>go</code>ã€<code>nodejs</code>ã€<code>spring</code>ã€<code>php</code>ï¼Œè¿˜æœ‰<code>mysql</code>ã€<code>mongodb</code>ç­‰æ•°æ®åº“ã€‚ï¼ˆè¿™é‡Œæˆ‘æ— æ„å¼•æˆ˜ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥æŸ¥çœ‹å…·ä½“<a href="https://www.techempower.com/benchmarks/#section=data-r16&amp;hw=ph&amp;test=db" target="_blank" rel="noopener">è·‘åˆ†ç»“æœ</a>åŠ<a href="https://github.com/TechEmpower/FrameworkBenchmarks/tree/round16" target="_blank" rel="noopener">ç›¸å…³ä»£ç </a>ï¼‰<br>æŸ¥çœ‹å…·ä½“è·‘åˆ†<a href="https://github.com/TechEmpower/FrameworkBenchmarks/blob/724a773096f403d149cfaf59b8257465bbf70103/frameworks/Java/vertx/src/main/java/vertx/App.java" target="_blank" rel="noopener">ä»£ç </a>å¯çŸ¥ï¼Œ<code>Vert.x</code>ä¹‹æ‰€ä»¥èƒ½ä½å±…æ¦œé¦–ï¼Œä¸å…¶ä½¿ç”¨çš„æ•°æ®åº“å®¢æˆ·ç«¯æ˜¯å¯†ä¸å¯åˆ†çš„ã€‚ä½œä¸ºä¸€å¥—åŸºäº<code>Java</code>çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œ<code>Vert.x</code>æ²¡æœ‰ä½¿ç”¨<code>Java</code>ç¨‹åºå‘˜æ‰€ç†ŸçŸ¥çš„<code>JDBC</code>ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ç§å«<a href="https://github.com/reactiverse/reactive-pg-client" target="_blank" rel="noopener">reactive-pg-client</a>çš„æŠ€æœ¯ã€‚<br><code>reactive-pg-client</code>ä¸<code>JDBC</code>æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å‰è€…æ˜¯é’ˆå¯¹<code>PostgreSQL</code>æ•°æ®åº“å•ç‹¬å¼€å‘çš„ï¼Œåˆ©ç”¨äº†<code>PostgreSQL</code>å¼‚æ­¥ç‰¹æ€§ï¼Œæœ€å¤§é™åº¦äº†æŒ–æ˜äº†æ•°æ®åº“çš„è®¿é—®æ€§èƒ½ã€‚<br>ç°åœ¨æˆ‘ä»¬å°±æ¥ç®€å•å°è¯•ä¸‹<code>reactive-pg-client</code>ï¼Œé¦–å…ˆæ·»åŠ ä¾èµ–<br><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">compile</span> <span class="string">'io.reactiverse:reactive-pg-client:0.10.3'</span></span><br></pre></td></tr></table></figure></p><p>å‡†å¤‡<code>PgPoolOptions</code><br><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">PgPoolOptions options = new PgPoolOptions()</span><br><span class="line">  .<span class="built_in">set</span>Port(<span class="number">5432</span>)</span><br><span class="line">  .<span class="built_in">set</span>Host(<span class="string">"the-host"</span>)</span><br><span class="line">  .<span class="built_in">set</span>Database(<span class="string">"the-db"</span>)</span><br><span class="line">  .<span class="built_in">set</span>User(<span class="string">"user"</span>)</span><br><span class="line">  .<span class="built_in">set</span>Password(<span class="string">"secret"</span>)</span><br><span class="line">  .<span class="built_in">set</span>MaxSize(<span class="number">5</span>);</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨äº†<br><figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Create the client pool</span></span><br><span class="line">PgPool client = PgClient.pool(options);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A simple query</span></span><br><span class="line">client.query(<span class="string">"SELECT * FROM users WHERE id='julien'"</span>, ar -&gt; &#123;</span><br><span class="line">  <span class="built_in">if</span> (ar.succeeded()) &#123;</span><br><span class="line">    PgRowSet result = ar.result();</span><br><span class="line">    System.out.<span class="built_in">println</span>(<span class="string">"Got "</span> + result.<span class="built_in">size</span>() + <span class="string">" rows "</span>);</span><br><span class="line">  &#125; <span class="built_in">else</span> &#123;</span><br><span class="line">    System.out.<span class="built_in">println</span>(<span class="string">"Failure: "</span> + ar.cause().getMessage());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Now close the pool</span></span><br><span class="line">  client.<span class="built_in">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å…¸å‹çš„å¼‚æ­¥ä»£ç ç¼–å†™é£æ ¼ï¼Œæ­£æ˜¯ç”±äºè¯¥åº“å…ˆå¤©å¼‚æ­¥çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå°±èƒ½æ§åˆ¶å¤šä¸ªæ•°æ®åº“é“¾æ¥ï¼ˆThe client is reactive and non blocking, allowing to handle many database connections with a single thread.ï¼‰ï¼Œç±æ­¤è·å¾—æ›´å¥½çš„è®¡ç®—æœºèµ„æºåˆ©ç”¨ç‡ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="https://reactiverse.io/reactive-pg-client/guide/java/" target="_blank" rel="noopener">reactive-pg-client</a></p><p>æ˜å¤©ï¼Œæˆ‘å°†ç»§ç»­æ·±å…¥<code>reactive-pg-client</code>ï¼Œå¸¦ä½ å°è¯•<code>PostgreSQL</code>ç‹¬æœ‰çš„<code>NOTIFY</code>ç‰¹æ€§ï¼Œå®ç°ä»æ•°æ®åº“ç«¯åˆ°ä¸šåŠ¡ç¨‹åºæ®µçš„æ•°æ®ä¸»åŠ¨æ¨é€ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç»™å¼‚æ­¥çš„Vert.xç¨‹åºåšå•å…ƒæµ‹è¯•</title>
      <link href="/2018/09/13/vertx_unit_test/"/>
      <url>/2018/09/13/vertx_unit_test/</url>
      <content type="html"><![CDATA[<p>å¼‚æ­¥çš„ç¨‹åºå…ˆå¤©ä¸å¥½å•å…ƒæµ‹è¯•ï¼Œå°¤å…¶æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„<code>JUnit</code>æ€è·¯æ¥å¼„ï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚å¥½åœ¨<code>Vert.x</code>æƒ³åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥æä¾›äº†<code>vertx-unit</code>åŒ…ï¼Œä¸“é—¨è€ƒè™‘äº†å¯¹å¼‚æ­¥ä»£ç çš„æµ‹è¯•ã€‚<br>ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œé¦–å…ˆ<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">testCompile</span> "<span class="selector-tag">io</span><span class="selector-class">.vertx</span><span class="selector-pseudo">:vertx-unit</span><span class="selector-pseudo">:3.5.3"</span></span><br></pre></td></tr></table></figure></p><p>ç„¶ååˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(VertxUnitRunner.<span class="keyword">class</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JUnitTestSuite</span> &#123;</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> testSomething(TestContext context) &#123;</span><br><span class="line">    context.assertFalse(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦æ˜¯æµ‹è¯•å¼‚æ­¥ç¨‹åºï¼Œåªéœ€è¦è°ƒç”¨<code>TestContext</code>çš„<code>async()</code>æ–¹æ³•å³å¯ã€‚ç„¶åç›´åˆ°æ‰‹åŠ¨è°ƒç”¨å…¶<code>complete()</code>æ–¹æ³•ï¼Œæ•´ä¸ªæµ‹è¯•è¿‡ç¨‹æ‰ä¼šç»“æŸã€‚è¯·çœ‹ä¾‹å­ï¼š<br><figure class="highlight cs"><table><tr><td class="code"><pre><span class="line">@Test</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testSomething</span>(<span class="params">TestContext context</span>) </span>&#123;</span><br><span class="line">    def <span class="keyword">async</span> = context.<span class="keyword">async</span>()</span><br><span class="line">    Vertx.vertx().setTimer(<span class="number">3000</span>, &#123;</span><br><span class="line">        context.assertFalse(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">async</span>.complete()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>async</code>æ–¹æ³•çš„æ³¨é‡Šå†™å¾—è¿˜æ˜¯å¾ˆè¯¦ç»†çš„<br><figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">and</span> returns a <span class="keyword">new</span> <span class="keyword">async</span> object, the returned <span class="keyword">async</span> controls the completion <span class="keyword">of</span> the test. Calling the <span class="keyword">Async</span>.complete() completes the <span class="keyword">async</span> operation.</span><br><span class="line"></span><br><span class="line">The test <span class="keyword">case</span> will complete when all the <span class="keyword">async</span> objects have their <span class="keyword">Async</span>.complete() <span class="function"><span class="keyword">method</span> <span class="title">called</span> <span class="title">at</span> <span class="title">least</span> <span class="title">once</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">This</span> <span class="title">method</span> <span class="title">shall</span> <span class="title">be</span> <span class="title">used</span> <span class="title">for</span> <span class="title">creating</span> <span class="title">asynchronous</span> <span class="title">exit</span> <span class="title">points</span> <span class="title">for</span> <span class="title">the</span> <span class="title">executed</span> <span class="title">test</span>.</span></span><br></pre></td></tr></table></figure></p><p>æ›´å¤šå†…å®¹è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://vertx.io/docs/vertx-unit/java/" target="_blank" rel="noopener">vertx-unit</a></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å†è°ˆCompletableFuture</title>
      <link href="/2018/09/12/CompletableFuture_something/"/>
      <url>/2018/09/12/CompletableFuture_something/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯è¿˜ä¹‹å‰æ¬ çš„ä¸€ä¸ªè´¦ï¼Œå½“æ—¶åœ¨<a href="https://www.kankanzhijian.com/2018/07/21/vertx_async_to_sync/">Vert.xå¼‚æ­¥æ–¹æ³•è½¬åŒæ­¥</a>è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘æåˆ°å…¶å…³é”®ç‚¹æ˜¯<code>CompletableFuture</code>ç±»ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ²¿ç€å½“æ—¶çš„ä»£ç ç»§ç»­æ°æ‰¯ä¸€ä¸‹è¿™ä¸ªå¼ºå¤§çš„ç±»ã€‚<br>å…ˆæ¥å›é¡¾ä¸‹å½“æ—¶çš„ä»£ç <br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import io<span class="selector-class">.vertx</span><span class="selector-class">.core</span><span class="selector-class">.Vertx</span></span><br><span class="line"></span><br><span class="line">import java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.CompletableFuture</span></span><br><span class="line"></span><br><span class="line">String sayHello() &#123;</span><br><span class="line">    CompletableFuture completableFuture = new CompletableFuture()</span><br><span class="line"></span><br><span class="line">    Vertx vertx = Vertx.vertx()</span><br><span class="line">    vertx.setTimer(<span class="number">1000</span>, &#123;</span><br><span class="line">        completableFuture.complete(<span class="string">"hello world"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return completableFuture.get()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">println</span><span class="params">(sayHello()</span></span>)</span><br></pre></td></tr></table></figure></p><p><code>vertx.setTimer</code>æ˜¯ä¸ªå…ˆå¤©å¼‚æ­¥çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬è®©å®ƒæ¥æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œä½ å¯ä»¥æƒ³è±¡æˆä»ç½‘ç»œã€ç£ç›˜æˆ–è€…å…¶ä»–ä»€ä¹ˆæ¥å£ï¼Œè·å–åˆ°é‚£ä¹ˆä¸€ä¸ªå­—ç¬¦ä¸²<code>hello world</code>ã€‚è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚ç„¶ååœ¨ä¸€ä¸ªéå¼‚æ­¥ç¨‹åºçš„å¤§ç¯å¢ƒä¸‹ï¼Œåç»­çš„ç¨‹åºè¦ç­‰å¾…è¿™ä¹ˆä¸€ä¸ªç»“æœã€‚<br>æ­¤æ—¶æˆ‘ä»¬ç”¨åˆ°äº†<code>CompletableFuture</code>ï¼Œå¹¶ä¸”ç‰µæ‰¯åˆ°å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼š<code>complete(T value)</code>ã€<code>get()</code>ã€‚</p><h4 id="complete-T-value"><a href="#complete-T-value" class="headerlink" title="complete(T value)"></a><code>complete(T value)</code></h4><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">If <span class="keyword">not</span> already completed, sets <span class="keyword">the</span> <span class="built_in">value</span> returned <span class="keyword">by</span> <span class="built_in">get</span>() <span class="keyword">and</span> related methods <span class="built_in">to</span> <span class="keyword">the</span> given <span class="built_in">value</span>.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ç»™<code>completableFuture</code>å¡ä¸€ä¸ªå®Œæˆçš„ç»“æœï¼Œä¾›åç»­çš„æ–¹æ³•è°ƒç”¨è·å–ï¼Œæœ€å…¸å‹çš„å°±æ˜¯<code>get()</code></p><h4 id="get"><a href="#get" class="headerlink" title="get()"></a><code>get()</code></h4><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">Waits <span class="keyword">if</span> necessary <span class="keyword">for</span> this future <span class="keyword">to</span> complete, <span class="keyword">and</span> <span class="keyword">then</span> returns <span class="keyword">its</span> <span class="literal">result</span>.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>get()</code>æ–¹æ³•æºè‡ªäº<code>Future</code>æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæ—©åœ¨<code>Java 1.5</code>æ—¶ä»£å°±æä¾›çš„æ¥å£äº†ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯å…¸å‹çš„é˜»å¡å¼è·å–<code>Future</code>ç»“æœã€‚æ”¾åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œæ°å¥½èƒ½èµ·åˆ°æŠŠ<code>vert.x</code>çš„å¼‚æ­¥è°ƒç”¨è½¬æ¢æˆåŒæ­¥çš„æ•ˆæœã€‚ä½†å…¶å®ç€ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ï¼Œåœ¨<code>Java 8</code>ä¸­ç‰¹æ„å¼•å…¥<code>CompletableFuture</code>å°±æ˜¯ä¸ºäº†è§£å†³é˜»å¡é—®é¢˜ï¼Œè®©å¼‚æ­¥å‘æŒ¥å‡ºæ›´å¤§çš„ä¼˜åŠ¿ã€‚</p><h4 id="å‘æ•£ä¸€ä¸‹"><a href="#å‘æ•£ä¸€ä¸‹" class="headerlink" title="å‘æ•£ä¸€ä¸‹"></a>å‘æ•£ä¸€ä¸‹</h4><p>æŠ›å¼€ä¸Šé¢æœ‰æ„æŠŠå¼‚æ­¥è½¬åŒæ­¥ä¸è¯´ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœå€ŸåŠ©<code>CompletableFuture</code>ï¼ŒæŠŠ<code>vert.x</code>çš„å¼‚æ­¥è·Ÿ<code>Java 8</code>çš„å¼‚æ­¥æœ‰æ•ˆç»“åˆï¼Œå°è¯•ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import io<span class="selector-class">.vertx</span><span class="selector-class">.core</span><span class="selector-class">.Vertx</span></span><br><span class="line"></span><br><span class="line">import java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.CompletableFuture</span></span><br><span class="line"></span><br><span class="line">CompletableFuture sayHello() &#123;</span><br><span class="line">    CompletableFuture completableFuture = new CompletableFuture()</span><br><span class="line"></span><br><span class="line">    Vertx vertx = Vertx.vertx()</span><br><span class="line">    vertx.setTimer(<span class="number">1000</span>, &#123;</span><br><span class="line">        completableFuture.complete(<span class="string">"hello world"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return completableFuture</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">sayHello</span><span class="params">()</span></span>.whenCompleteAsync(&#123; res, <span class="selector-tag">th</span> -&gt;</span><br><span class="line">    println(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç®€å•æ”¹é€ è¿‡åï¼Œè¿™å°±æ˜¯ä¸€ä¸ªéµå¾ª<code>Java 8</code>ä¸­<code>CompletableFuture</code>é£æ ¼çš„å¼‚æ­¥ä½¿ç”¨æ–¹å¼ã€‚å…³é”®ç‚¹åœ¨äº<br><code>whenCompleteAsync(@NotNull BiConsumer&lt;? super T, ? super Throwable&gt; action)</code><br>æ–¹æ³•ï¼ŒåŒæ—¶è¿˜æœ‰<br><code>whenComplete(@NotNull BiConsumer&lt;? super T, ? super Throwable&gt; action)</code><br>æ–¹æ³•å¯ä¾›ä½¿ç”¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œå‰è€…ä¼šä¸º<code>action</code>çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‡†å¤‡<code>ForkJoinPool</code>çº¿ç¨‹æ± ç¯å¢ƒï¼›è€Œåè€…ä¼šè®©<code>action</code>ä½¿ç”¨ä¹‹å‰<code>completableFuture.complete()</code>æ‰€å¤„çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚</p><h4 id="CompletableFutureæ˜¯ä¸€ä¸ªå¼‚å¸¸å¼ºå¤§ä¸”å¤æ‚çš„ç±»ï¼Œæœ¬æ–‡æ‰€è®²çš„ä¸œè¥¿ä¸è¿‡æ˜¯ä¹ç‰›ä¸€æ¯›ã€‚è¿™é‡Œæ¨èä¸¤ä¸ªä¸é”™çš„å¸–å­ä¾›å¤§å®¶å‚è€ƒï¼š"><a href="#CompletableFutureæ˜¯ä¸€ä¸ªå¼‚å¸¸å¼ºå¤§ä¸”å¤æ‚çš„ç±»ï¼Œæœ¬æ–‡æ‰€è®²çš„ä¸œè¥¿ä¸è¿‡æ˜¯ä¹ç‰›ä¸€æ¯›ã€‚è¿™é‡Œæ¨èä¸¤ä¸ªä¸é”™çš„å¸–å­ä¾›å¤§å®¶å‚è€ƒï¼š" class="headerlink" title="CompletableFutureæ˜¯ä¸€ä¸ªå¼‚å¸¸å¼ºå¤§ä¸”å¤æ‚çš„ç±»ï¼Œæœ¬æ–‡æ‰€è®²çš„ä¸œè¥¿ä¸è¿‡æ˜¯ä¹ç‰›ä¸€æ¯›ã€‚è¿™é‡Œæ¨èä¸¤ä¸ªä¸é”™çš„å¸–å­ä¾›å¤§å®¶å‚è€ƒï¼š"></a><code>CompletableFuture</code>æ˜¯ä¸€ä¸ªå¼‚å¸¸å¼ºå¤§ä¸”å¤æ‚çš„ç±»ï¼Œæœ¬æ–‡æ‰€è®²çš„ä¸œè¥¿ä¸è¿‡æ˜¯ä¹ç‰›ä¸€æ¯›ã€‚è¿™é‡Œæ¨èä¸¤ä¸ªä¸é”™çš„å¸–å­ä¾›å¤§å®¶å‚è€ƒï¼š</h4><ul><li><a href="https://colobu.com/2016/02/29/Java-CompletableFuture/" target="_blank" rel="noopener">https://colobu.com/2016/02/29/Java-CompletableFuture/</a></li><li><p><a href="https://www.ibm.com/developerworks/cn/java/j-cf-of-jdk8/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/java/j-cf-of-jdk8/index.html</a></p><p>  å…¶ä¸­ç¬¬äºŒç¯‡æ–‡ç« æ¶‰åŠçš„ä»£ç ï¼Œæˆ‘å·²ç»æ•´ç†äº†ä¸€ä»½ï¼Œä½ å¯ä»¥ä»è¿™é‡Œè·å–<a href="https://gist.github.com/aruis/135f6e1fa678fc5024ea20db4b9b4eee" target="_blank" rel="noopener">gist</a></p></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>iTermæœ€ä½³å®è·µ</title>
      <link href="/2018/09/11/iTerm_best_practices/"/>
      <url>/2018/09/11/iTerm_best_practices/</url>
      <content type="html"><![CDATA[<p><img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-09-11%2010.09.15.png" alt=""></p><p><img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-09-11%2009.16.40.png" alt=""><br><img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-09-11%2009.19.37.png" alt=""></p><h3 id="å¦æ³¨ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å¿«æ·é”®ï¼š"><a href="#å¦æ³¨ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å¿«æ·é”®ï¼š" class="headerlink" title="å¦æ³¨ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å¿«æ·é”®ï¼š"></a>å¦æ³¨ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å¿«æ·é”®ï¼š</h3><h4 id="æ¨ªå‘åˆ†å±-âŒ˜D"><a href="#æ¨ªå‘åˆ†å±-âŒ˜D" class="headerlink" title="æ¨ªå‘åˆ†å± âŒ˜D"></a>æ¨ªå‘åˆ†å± <code>âŒ˜D</code></h4><h4 id="çºµå‘åˆ†å±-â‡§âŒ˜D"><a href="#çºµå‘åˆ†å±-â‡§âŒ˜D" class="headerlink" title="çºµå‘åˆ†å± â‡§âŒ˜D"></a>çºµå‘åˆ†å± <code>â‡§âŒ˜D</code></h4>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Groovyè¿­ä»£å™¨ä¸­çš„returné™·é˜±</title>
      <link href="/2018/09/10/groovy_return_in_each/"/>
      <url>/2018/09/10/groovy_return_in_each/</url>
      <content type="html"><![CDATA[<p><code>groovy</code>ä»ä¸ä¼šè®©äººå¤±æœ›ï¼Œå¦‚æœæœ‰ï¼Œé‚£å°±æ˜¯æ¥ä¸‹æ¥æˆ‘è¦è¯´çš„è¿™ç§æƒ…å†µï¼š<br><figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">def <span class="type">list</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">def test(List <span class="type">list</span>) &#123;</span><br><span class="line">    <span class="type">list</span>.each &#123;</span><br><span class="line">        if (it &gt; <span class="number">3</span>) &#123;</span><br><span class="line">            return it</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println test(<span class="type">list</span>)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æœŸæœ›çš„ç»“æœ<code>4</code>ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”3å¤§çš„æ•°å­—å°±è¿”å›äº†ï¼Œç„¶è€Œäº‹ä¸æ„¿è¿ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·<br><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure></p><p>æ•´ä¸ªlistéƒ½è¢«æ‰“å°äº†å‡ºæ¥ï¼Œå…¶å®<code>test</code>æ–¹æ³•æœ€ç»ˆè¿”å›çš„ä¸œè¥¿æ˜¯<code>list.each{...}</code>ï¼Œè€Œä¸”<code>.each</code>æ–¹æ³•çš„è¿”å›å€¼æ˜¯<code>the self List</code>ï¼Œæ‰€ä»¥æœ€åæŠŠ<code>list</code>åˆåŸå°ä¸åŠ¨æ‰“å°äº†ä¸€éä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚<br>é‚£æˆ‘ä»¬å†™çš„é‚£è¡Œ<code>return</code>å¹²å—äº†ï¼Œç­”æ¡ˆæ˜¯ï¼Œå®ƒæ—¢ä¸ä¼šæ˜¯æ–¹æ³•è¿”å›ï¼Œä¹Ÿä¸ä¼šä½¿<code>each closure</code>è¿”å›ï¼Œå®ƒåœ¨è¿™é‡Œçš„ä½œç”¨è·Ÿ<code>continue</code>ç±»ä¼¼ï¼Œä»…ä»…æ˜¯è®©å®ƒåé¢çš„ä»£ç ä¸åœ¨è¿™æ¬¡å¾ªç¯æ‰§è¡Œï¼Œä»…æ­¤è€Œå·²ã€‚</p><h4 id="é‚£æ€ä¹ˆæ‰èƒ½æ‰“æ–­ä¸€ä¸ªeachï¼Œç„¶åè®©ä¸Šé¢çš„æ–¹æ³•æå‰returnå‘¢ï¼Ÿ"><a href="#é‚£æ€ä¹ˆæ‰èƒ½æ‰“æ–­ä¸€ä¸ªeachï¼Œç„¶åè®©ä¸Šé¢çš„æ–¹æ³•æå‰returnå‘¢ï¼Ÿ" class="headerlink" title="é‚£æ€ä¹ˆæ‰èƒ½æ‰“æ–­ä¸€ä¸ªeachï¼Œç„¶åè®©ä¸Šé¢çš„æ–¹æ³•æå‰returnå‘¢ï¼Ÿ"></a>é‚£æ€ä¹ˆæ‰èƒ½æ‰“æ–­ä¸€ä¸ª<code>each</code>ï¼Œç„¶åè®©ä¸Šé¢çš„æ–¹æ³•æå‰<code>return</code>å‘¢ï¼Ÿ</h4><p><strong>ç­”æ¡ˆæ˜¯ï¼Œä¸èƒ½ç”¨<code>each</code>ï¼Œå¾—ç”¨<code>find</code>æˆ–è€…<code>any</code>ä¹‹ç±»çš„ï¼Œ</strong>æœ‰æ˜æ˜¾æˆªæ–­è¯­ä¹‰çš„è¿­ä»£å™¨ã€‚è¿™é‡Œè¿˜æ˜¯é¦–æ¨<code>find</code>ï¼Œå› ä¸º<code>any</code>è¿”å›å€¼æ˜¯<code>boolean</code>ï¼Œèƒ½å¸®æˆ‘ä»¬æˆªæ–­è¿­ä»£ï¼Œä½†æ˜¯ä¸é€‚ç”¨äºæ‰¾ä¸œè¥¿çš„åœºæ™¯ã€‚</p><p>ç”¨<code>find</code>æ”¹é€ ä¸€ä¸‹ä»£ç ï¼Œå¦‚ä¸‹<br><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">def test(List <span class="built_in">list</span>) &#123;</span><br><span class="line"><span class="built_in">    return</span> <span class="built_in">list</span>.find &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">it</span> &gt; <span class="number">3</span>) &#123;</span><br><span class="line"><span class="built_in">            return</span> <span class="keyword">it</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç”±äº<code>groovy</code>æ–¹æ³•ä¸­çš„<code>return</code>æ˜¯å¯ä»¥çœç•¥çš„ï¼Œæ›´è¿›ä¸€æ­¥ï¼Œå°±å†™æˆè¿™æ ·<br><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">def test(List <span class="built_in">list</span>) &#123;</span><br><span class="line">   <span class="built_in">list</span>.find &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">it</span> &gt; <span class="number">3</span>) &#123;</span><br><span class="line"><span class="built_in">            return</span> <span class="keyword">it</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶åŸºäº<code>find</code>çš„å…ˆå¤©ç‰¹æ€§ï¼Œé‚£å¥<code>return it</code>ä¹Ÿå¯ä»¥çœç•¥æˆè¿™æ ·<br><figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line">def test(<span class="built_in">List</span> <span class="built_in">list</span>) &#123;</span><br><span class="line">   <span class="built_in">list</span>.<span class="built_in">find</span> &#123; it &gt; <span class="number">3</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡ä¹‹å‰æ‰§è¡Œ<code>println test(list)</code>ï¼Œå¾—åˆ°ç»“æœ<code>4</code>ï¼Œä¸€åˆ‡å½’äºå®Œç¾äº†ã€‚</p><h3 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h3><p>è¿™é‡Œä¸å¾—ä¸è¯´ä¸‹<code>Kotlin</code>ï¼Œå®ƒåº”ä»˜ä¸Šé¢æè¿°çš„åœºæ™¯å°±éå¸¸å¾—å¿ƒåº”æ‰‹äº†ã€‚é¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹<code>return</code>å°±æ˜¯ä»£è¡¨è®©ä¸€ä¸ªæ–¹æ³•è¿”å›ï¼Œè¿™ç¬¦åˆä¸€ä¸ªç¨‹åºå‘˜çš„ç›´è§‰ã€‚<br>åœ¨ä¸æƒ³æ‰©å¤§<code>return</code>çš„æ‰“å‡»èŒƒå›´ï¼Œè€Œä»…ä»…åªæƒ³ç»“æŸä¸€ä¸ª<code>lambda</code>çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>æ ‡ç­¾è¿”å›</code>ï¼Œç±»ä¼¼è¿™æ ·<br><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">list</span>.<span class="keyword">forEach</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (it &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>@<span class="keyword">forEach</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸Šé¢çš„è¯­æ³•ç³–ï¼Œè®©ä½ è§‰å¾—æœ‰ç‚¹æ•…å¼„ç„è™šäº†ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ›´å®¹æ˜“ç†è§£çš„åŒ¿åå‡½æ•°ï¼Œå°±åƒè¿™æ ·<br><figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">list.forEach(<span class="function"><span class="keyword">fun</span>(<span class="title">it</span></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (it &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong>æˆ‘æ˜¯éå¸¸å–œæ¬¢<code>groovy</code>çš„ï¼Œå¥¹å·²ç»é™ªä¼´æˆ‘8ä¸ªå¹´å¤´äº†ï¼Œå‡ ä¹æˆ‘æ‰‹ä¸Šæ‰€æœ‰çš„é¡¹ç›®éƒ½ç¦»ä¸å¼€<code>groovy</code>çš„èº«å½±ã€‚æˆ‘ç”šè‡³ç”¨å¥¹å†™è¿‡<code>Android</code>ç¨‹åºã€‚ä¸è¿‡ä¸å¾—ä¸æ‰¿è®¤ï¼Œ<code>Kotlin</code>ä½œä¸ºåèµ·ä¹‹ç§€ï¼Œçš„ç¡®åœ¨å¾ˆå¤šæ–¹å‘ä¸Šæ›´è¿›ä¸€æ­¥ï¼Œè€ƒè™‘çš„åœºæ™¯ä¹Ÿæ›´ä¸ºå…¨é¢ã€‚æœŸå¾…<code>groovy</code>çš„<code>3.0</code>èƒ½å¤Ÿå‘åŠ›ä¸€æ³¢ã€‚</strong></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨JavaScriptåœ¨PostgreSQLä¸­å†™å­˜å‚¨è¿‡ç¨‹</title>
      <link href="/2018/09/09/plv8_in_postgresql/"/>
      <url>/2018/09/09/plv8_in_postgresql/</url>
      <content type="html"><![CDATA[<p>é¦–å…ˆäº¤ä»£ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨<code>PostgreSQL</code>ä¸­ï¼Œå‡½æ•°ã€å­˜å‚¨è¿‡ç¨‹éƒ½æ˜¯ä¸€å›äº‹ï¼Œåˆ›å»ºè¯­æ³•éƒ½æ˜¯<code>create function</code>ã€‚ä¹‹æ‰€ä»¥æœ¬æ–‡æ ‡é¢˜ä½¿ç”¨<code>å­˜å‚¨è¿‡ç¨‹</code>çš„å«æ³•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å…¶ä»–æ•°æ®åº“çš„ä½¿ç”¨è€…å®¹æ˜“ç†è§£ã€‚<br>å…ˆæ¥çœ‹çœ‹<code>PostgreSQL</code>é»˜è®¤æ”¯æŒçš„åˆ›å»ºæ•°æ®åº“å‡½æ•°çš„å†™æ³•ï¼Œå¦‚ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŠŠç³»ç»Ÿç”Ÿæˆçš„uuidä¸­çš„-æ›¿æ¢æˆ_</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> <span class="keyword">uuid</span>()</span><br><span class="line">  <span class="keyword">returns</span> <span class="built_in">text</span></span><br><span class="line"><span class="keyword">language</span> <span class="keyword">sql</span></span><br><span class="line"><span class="keyword">as</span> $$</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">replace</span>(uuid_generate_v4()::<span class="built_in">text</span>,<span class="string">'-'</span>,<span class="string">'_'</span>);</span><br><span class="line">$$;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„å…¶ä¸­çš„<code>language</code>å…³é”®å­—ï¼Œåé¢æŒ‡æ˜äº†è¯¥æ•°æ®åº“å‡½æ•°æ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œä¸Šé¢è¿™ä¸ªå‡½æ•°å¾ˆç®€å•ï¼Œç”¨çº¯<code>SQL</code>å°±èƒ½æå®šï¼Œæ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬é‡åˆ°çš„ä¼šå¤æ‚å¾ˆå¤šï¼Œå°±å¾—ç”¨ä¸Šè¿‡ç¨‹åŒ–çš„SQLï¼Œä¹Ÿå°±æ˜¯<code>plpgsql</code>ï¼ˆç±»ä¼¼Oracleä¸­çš„PL/SQLï¼‰ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="http://www.postgres.cn/docs/10/plpgsql.html" target="_blank" rel="noopener">plpgsql</a>ã€‚<br>ä¸è¿‡ä»Šå¤©çš„ä¸»é¢˜ä¸æ˜¯<code>plpgsql</code>ï¼Œè€Œæ˜¯<code>plv8</code>â€”â€”åŸºäº<code>V8</code>å¼•æ“çš„åœ¨<code>PostgreSQL</code>ä¸­è¿è¡Œçš„è¿‡ç¨‹åŒ–è¯­è¨€ï¼Œå…¶å®å°±æ˜¯ç”¨<code>JavaScript</code>åœ¨<code>PostgreSQL</code>ä¸­å†™æ•°æ®åº“å‡½æ•°ã€‚<br><strong>é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ç”¨<code>Javascript</code>æ¥å†™æ•°æ®åº“å‡½æ•°å‘¢ï¼Ÿ</strong>åœ¨æˆ‘çœ‹æ¥ï¼Œè‡³å°‘æœ‰ä¸‹é¢å‡ ä¸ªå¥½å¤„ï¼š</p><ol><li>ç†Ÿæ‚‰çš„é…æ–¹ï¼Œç†Ÿæ‚‰çš„å‘³é“ã€‚<code>JavaScript</code>ä½œä¸º<code>Web</code>ä¸–ç•Œçš„ä¸€ç­‰å…¬æ°‘ï¼Œå…¶æ•™ä¼—ä¼—å¤šã€‚èƒ½ç”¨<code>JavaScript</code>æ¥å®ç°é«˜çº§çš„æ•°æ®åº“å¼€å‘ï¼Œå¯ä»¥å¤§å¹…æ‹‰ä½æ•°æ®åº“çš„å­¦ä¹ æ›²çº¿ï¼Œè¿›è€Œ<strong>é™ä½äººåŠ›æˆæœ¬</strong>ã€‚</li><li>è·å¾—<code>SQL</code>ä¸–ç•Œæœ¬èº«ä¸å…·å¤‡çš„åº“å‡½æ•°ï¼Œåƒè¿™æ ·ï¼š<img src="/media/15364987364827.jpg" alt=""><br> è¿˜æœ‰è¿™æ ·ï¼š<br> <img src="/media/15364989242348.jpg" alt=""><br> å¯ä»¥æå¤§ä¸°å¯Œæ•°æ®åº“å±‚é¢çš„åŠŸèƒ½å®ç°ï¼Œè¿›è€Œå½±å“ä¸€ä¸ªè½¯ä»¶çš„æ¶æ„è®¾è®¡ã€‚</li><li>æ›´å¿«çš„æ€§èƒ½ï¼Œä¼—æ‰€å‘¨çŸ¥<code>Google</code>ä¸»æ¨çš„<code>V8</code>å¼•æ“æ˜¯ä¸šç•Œå…¬è®¤çš„é¡¶å°–æ€§èƒ½æ€ªå…½ã€‚æœ‰å®ƒé…åˆä½ çš„æ•°æ®åº“ä½¿ç”¨çœŸæ˜¯å¦‚è™æ·»ç¿¼ã€‚å°¤å…¶æ˜¯åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„å¼€å‘é‡‡ç”¨äº†å¹¶ä¸æ˜¯ä»¥æ€§èƒ½ä¸ºå–ç‚¹çš„è¯­è¨€æ—¶ï¼ˆæ¯”å¦‚<code>Ruby</code>ã€<code>PHP</code>ï¼‰ï¼ŒæŠŠéƒ¨åˆ†ä¸šåŠ¡é€»è¾‘é€šè¿‡<code>JavaScript</code>åœ¨æ•°æ®åº“ä¸­é‡æ„ä¸€è¾¹ï¼Œè¯´ä¸å®šä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚è¿™æ¯”ä¼¤ç­‹åŠ¨éª¨åœ°å•çº¯åœ¨ä¸šåŠ¡å±‚æ‘¸ç´¢æ”¹è¿›è¦å®¹æ˜“å¾—å¤šã€‚</li></ol><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ€ä¹ˆæ‰èƒ½åœ¨<code>PostgreSQL</code>ä¸­ç”¨ä¸Š<code>JavaScript</code>å‘¢ï¼Ÿ</p><ul><li>ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯åœ¨ç”µè„‘ä¸Šè£…å¥½<code>PostgreSQL</code>ï¼Œè¿™ä¸ªä¸å†èµ˜è¿°</li><li><code>windows</code>ç”¨æˆ·ï¼Œå¯ä»¥ä¸‹è½½è¿™é‡Œçš„å®‰è£…åŒ…ï¼Œ<a href="http://www.postgresonline.com/journal/archives/379-PLV8-binaries-for-PostgreSQL-10-windows-both-32-bit-and-64-bit.html" target="_blank" rel="noopener">http://www.postgresonline.com/journal/archives/379-PLV8-binaries-for-PostgreSQL-10-windows-both-32-bit-and-64-bit.html</a> </li><li><code>ubuntu</code>ç”¨æˆ·ï¼Œ<code>apt-get install postgresql-10-plv8</code></li><li>æ›´å¤šå®‰è£…ç»†èŠ‚ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://plv8.github.io" target="_blank" rel="noopener">https://plv8.github.io</a> ä»¥åŠ <a href="https://pgxn.org/dist/plv8/doc/plv8.html" target="_blank" rel="noopener">https://pgxn.org/dist/plv8/doc/plv8.html</a></li><li><p>å½“ç„¶ï¼Œå¦‚æœä½ ç†Ÿæ‚‰<code>docker</code>ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘åœ¨<code>docker store</code>ä¸Šåˆ†äº«çš„<code>lovearuis/postgres10_plv8</code>ï¼ˆ<a href="https://store.docker.com/community/images/lovearuis/postgres10_plv8" target="_blank" rel="noopener">åœ°å€</a>ï¼‰ï¼Œåªéœ€è¦è¿™ä¹ˆä¸€ä¸ªå‘½ä»¤</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> <span class="attribute">--name</span>=postgres10_plv8 -d -p 5432:5432 lovearuis/postgres10_plv8</span><br></pre></td></tr></table></figure><p>  å°±å¯ä»¥åœ¨æœ¬æœº<code>5432</code>ç«¯å£ä¸Šè¿è¡Œä¸€ä¸ªè£…å¥½<code>JavaScript</code>æ”¯æŒçš„æœ€æ–°ç‰ˆ<code>PostgreSQL</code></p></li><li>å®‰è£…å®Œå¿…è¦çš„<code>plv8</code>åŒ…ä¹‹åï¼Œè¿˜è¦åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œ<code>SQL</code>ï¼š<code>CREATE EXTENSION plv8;</code>ï¼Œæ‰èƒ½çœŸæ­£è§£é”<code>plv8</code>çš„æ´ªè’ä¹‹åŠ›ã€‚</li></ul><p>ä¸€åˆ‡å°±ç»ªä¹‹åï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ä¸Šä¸¾ä¾‹çš„ï¼Œå…ˆæ¥ä¸ªå¸¦<code>for</code>å¾ªç¯å’Œç”Ÿæˆ<code>JSON</code>çš„è€è€ï¼Œ<code>SQL</code>å¦‚ä¸‹ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> plv8_test(<span class="keyword">keys</span> <span class="built_in">TEXT</span>[], vals <span class="built_in">TEXT</span>[]) <span class="keyword">RETURNS</span> <span class="keyword">JSON</span> <span class="keyword">AS</span> $$</span><br><span class="line">  <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">for(var i=0; i&lt;keys.length; i++)&#123;</span><br><span class="line">o[keys[i]] = vals[i];</span><br><span class="line">&#125;</span><br><span class="line">return o;</span><br><span class="line">$$ LANGUAGE plv8 IMMUTABLE STRICT;</span><br></pre></td></tr></table></figure></p><p>å°è¯•è°ƒç”¨åˆšåˆšåˆ›å»ºçš„<code>plv8_test</code>å‡½æ•°ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> plv8_test(<span class="built_in">ARRAY</span>[<span class="string">'name'</span>, <span class="string">'age'</span>], <span class="built_in">ARRAY</span>[<span class="string">'Tom'</span>, <span class="string">'29'</span>]);</span><br></pre></td></tr></table></figure></p><p>è·å¾—ç»“æœ<img src="/media/15365022296404.jpg" alt=""><br>æ˜¯ä¸æ˜¯ç¾å¦™æäº†ï¼Ÿâ˜ºï¸</p><h3 id="æ”¾å¤§æ‹›"><a href="#æ”¾å¤§æ‹›" class="headerlink" title="æ”¾å¤§æ‹›"></a>æ”¾å¤§æ‹›</h3><p>æ˜¯ä¸æ˜¯çœ‹äº†ä¸Šé¢çš„ä»‹ç»ï¼Œæœ‰ç‚¹å¿ƒç—’éš¾è€äº†ã€‚ğŸ¤ª<strong>å…¶å®<code>PostgreSQL</code>åœ¨å†…éƒ¨å¯è°ƒç”¨çš„è¿‡ç¨‹åŒ–è¯­è¨€çš„æ”¯æŒè¿œä¸ä»…äºæ­¤ã€‚ä½ å®Œå…¨å¯ä»¥ç”¨ä½ å¿ƒçˆ±çš„<code>Python</code>ã€<code>Java</code>ã€<code>PHP</code>ç”šè‡³æ˜¯<code>R</code>ã€<code>Lua</code>ä»äº‹<code>PostgreSQL</code>ä¸­çš„æ•°æ®åº“å‡½æ•°å¼€å‘ã€‚</strong><br>å°¤å…¶æ˜¯<code>Python</code>ã€<code>Java</code>ï¼Œè¿™ä¸¤ä¸ªè¯­è¨€å‡ ä¹åœ¨<code>PostgreSQL</code>çš„<code>PL</code>ç¯å¢ƒä¸‹æœ‰æœ€å¤§çš„æƒé™ç©ºé—´ã€‚æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š<br>ä¸€ä¸ªåˆ«äººåšçš„é¡¹ç›®ï¼ˆä½ æ²¡æœ‰æºç ï¼Œæˆ–è€…æœ‰æºç è·Ÿæ²¡æœ‰ä¹Ÿæ²¡å•¥åŒºåˆ«ï¼‰ï¼Œé¢†å¯¼è¯´è¦åŠ ä¸ªéœ€æ±‚ï¼Œå½“ä¸€ä¸ªæ•°æ®åˆ°è¾¾æŸç§é˜€å€¼æ—¶ï¼Œè¦å‘çŸ­ä¿¡ç»™ä¸€ä¸ªäººï¼ˆæ¯”å¦‚è€ƒè¯•æˆç»©ä½äº60çš„æ—¶å€™ï¼Œå‘ä¸ªçŸ­ä¿¡ç»™å­¦ç”Ÿå®¶é•¿ï¼‰ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ ä¸éœ€è¦å†æ‰“å¼€å¼€å‘ç¯å¢ƒï¼Œåœ¨åˆ«äººçš„ä»£ç é‡Œé¢æµç¦»å¤±æ‰€ï¼Œä¹…ä¹…ä¸èƒ½è‡ªæ‹”ã€‚ä½ éœ€è¦åšçš„ï¼Œå°±æ˜¯æ‰“å¼€è¿™ä¸ªé¡¹ç›®çš„<code>PostgreSQL</code>ï¼ˆè°¢å¤©è°¢åœ°ï¼Œå®ƒç”¨äº†ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„å¼€æºæ•°æ®åº“ï¼Œå°½ç®¡å®ƒçš„ä»£ç è·Ÿç¿”æ²¡ä»€ä¹ˆåŒºåˆ«ï¼‰ï¼Œç„¶åç”¨<code>Java</code>åœ¨<code>PostgreSQL</code>ä¸­å†™ä¸ªæ•°æ®åº“å‡½æ•°ï¼ˆè¯·æ±‚ä¸€ä¸ªçŸ­ä¿¡ç½‘å…³çš„httpæ¥å£æˆ–è€…åˆ«çš„ä»€ä¹ˆä¸œè¥¿ï¼‰ï¼Œæœ€åå¥—ä¸€ä¸ªè§¦å‘å™¨ï¼ˆ3è¡Œ<code>SQL</code>ï¼‰å°±ä»€ä¹ˆéƒ½å®Œæˆäº†ã€‚<br>è¿™ç”»é¢å¤ªç¾ï¼Œæˆ‘ä¸æ•¢æƒ³è±¡å•Šï¼Œå“ˆå“ˆã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä½¿ç”¨Google Trendsäº†è§£æŸä¸€æŠ€æœ¯çš„å…¨çƒæ€åŠ¿</title>
      <link href="/2018/09/08/Google_Trends/"/>
      <url>/2018/09/08/Google_Trends/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©æƒ³ä»‹ç»çš„ä¸œè¥¿å¾ˆç®€å•äº†ï¼Œä½†å´å¼‚å¸¸å¼ºå¤§ï¼Œå°±æ˜¯<code>Google Trends</code>ã€‚ä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ï¼Œè®¿é—®<a href="https://trends.google.com/trends/explore" target="_blank" rel="noopener">trends.google.com</a>å³å¯ã€‚<br>é‚£ä¹ˆæ¥çœ‹çœ‹æˆ‘è‡ªå·±é€šè¿‡<code>Google Trends</code>å‘æ˜çš„ä¸€äº›æœ‰æ„æ€çš„äº‹æƒ…å§ã€‚<br><img src="/media/15363698300629.jpg" alt=""><br><img src="/media/15363699317160.jpg" alt=""><br><img src="/media/15363701237412.jpg" alt=""><br><img src="/media/15363701562662.jpg" alt=""></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>IntelliJ IDEAä¸­é‚£äº›é”¦ä¸Šæ·»èŠ±çš„å°æŠ€å·§</title>
      <link href="/2018/09/07/IntelliJ_IDEA_tips/"/>
      <url>/2018/09/07/IntelliJ_IDEA_tips/</url>
      <content type="html"><![CDATA[<p><code>IntelliJ IDEA</code>ä½œä¸ºç›¸å½“ä¸»æµçš„<code>Java</code>å¼€å‘å·¥å…·ï¼Œç½‘ä¸Šåˆ†äº«å…¶ä½¿ç”¨æŠ€å·§çš„å¦‚æ±—ç‰›å……æ ‹ã€‚ä»Šå¤©æˆ‘ä»è‡ªå·±çš„è§’åº¦ï¼Œåˆ†äº«ä¸€äº›ç»å¸¸è¢«äººå¿½è§†ï¼ŒåŒæ—¶ä¹Ÿä¸æ€ä¹ˆé‡è¦çš„ä½¿ç”¨æŠ€å·§ï¼Œæƒä½œé”¦ä¸Šæ·»èŠ±ä¹‹ç”¨ã€‚</p><h4 id="ç”¨Toolboxæ¥ç®¡ç†IntelliJ-IDEA"><a href="#ç”¨Toolboxæ¥ç®¡ç†IntelliJ-IDEA" class="headerlink" title="ç”¨Toolboxæ¥ç®¡ç†IntelliJ IDEA"></a>ç”¨<code>Toolbox</code>æ¥ç®¡ç†<code>IntelliJ IDEA</code></h4><p>è‡ªå·±å®‰è£…<code>IntelliJ IDEA</code>è¯šç„¶æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œä½†æ˜¯æ¶ä¸ä½å…¶æ›´æ–°é¢‘ç‡å®åœ¨å¤ªé«˜ï¼Œè€Œä¸”æœ‰æ—¶å€™è¿˜æ²¡æœ‰å‡çº§åŒ…å¯ç”¨ã€‚æ‰€ä»¥é€šè¿‡<code>Toolbox</code>æ¥ä¿æŒ<code>IntelliJ IDEA</code>æ°¸è¿œåœ¨æœ€æ–°ç‰ˆæœ¬æ˜¯ä¸€ç§ç›¸å½“æœ‰æ•ˆçš„åšæ³•ã€‚</p><h4 id="ç”¨Draculaæ’ä»¶æ¥ç¾åŒ–ä»£ç é…è‰²"><a href="#ç”¨Draculaæ’ä»¶æ¥ç¾åŒ–ä»£ç é…è‰²" class="headerlink" title="ç”¨Draculaæ’ä»¶æ¥ç¾åŒ–ä»£ç é…è‰²"></a>ç”¨<code>Dracula</code>æ’ä»¶æ¥ç¾åŒ–ä»£ç é…è‰²</h4><p><img src="/media/15363162820957.jpg" alt=""><br>ç¾åŒ–åçš„ä»£ç é…è‰²å¦‚ä¸Šå›¾ï¼Œæ„¿é¡¹ç›®åœ°å€åœ¨æ­¤ï¼š<a href="https://draculatheme.com/jetbrains/" target="_blank" rel="noopener">https://draculatheme.com/jetbrains/</a> å¦‚ä½•ä½¿ç”¨ï¼Œè¯¥é¡¹ç›®æ–‡æ¡£å·²ç»è®²çš„å¾ˆæ¸…æ¥šäº†</p><h4 id="ç¼–è¾‘VM-Options"><a href="#ç¼–è¾‘VM-Options" class="headerlink" title="ç¼–è¾‘VM Options"></a>ç¼–è¾‘<code>VM Options</code></h4><p><code>IntelliJ IDEA</code>æ¯•ç«Ÿè¿˜æ˜¯<code>Java</code>ç¨‹åºï¼Œæƒ³è¦å‘æŒ¥æœ€å¤§æ€§èƒ½ï¼Œè¿˜æ˜¯éœ€è¦å¥½å¥½ç»´æŠ¤<code>JVM</code>å‚æ•°çš„ã€‚æ—©æœŸ<code>IntelliJ IDEA</code>ç‰ˆæœ¬ä¸­ï¼Œè¦ç»´æŠ¤<code>VM Options</code>æ˜¯éœ€è¦åˆ°è¯¥ç¨‹åºå®‰è£…ç›®å½•æ‰¾åˆ°ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘çš„ã€‚ç°åœ¨å¤„ç†èµ·æ¥ç®€å•å¤šäº†ï¼Œåªéœ€è¦ç‚¹èœå•çš„è¿™é‡Œï¼Œå¦‚å›¾ï¼š<br><img src="/media/15363168799795.jpg" alt=""></p><p>å°±å¯ä»¥æ–¹ä¾¿åœ°åœ¨<code>IntelliJ IDEA</code>ç¯å¢ƒä¸­ç¼–è¾‘<code>VM Options</code>äº†ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…ç™¾åº¦ç½‘ç›˜å®¢æˆ·ç«¯ä¸‹è½½å¤§æ–‡ä»¶å¹¶çªç ´éä¼šå‘˜é™é€Ÿ</title>
      <link href="/2018/09/06/break_through_baiduwangpan/"/>
      <url>/2018/09/06/break_through_baiduwangpan/</url>
      <content type="html"><![CDATA[<p>åœ¨ç½‘ç›˜å¸‚åœºæ´—è¿‡å‡ æ¬¡ç‰Œåçš„ä»Šå¤©ï¼Œç™¾åº¦ç½‘ç›˜å¯ä»¥è¯´æ˜¯å¦‚ä»Šçš„å¤´ç‰Œäº†ã€‚ç½‘ä¸Šå……æ–¥çš„å„ç§èµ„æºï¼Œå‡ ä¹éƒ½åœ¨ç”¨ç™¾åº¦ç½‘ç›˜åˆ†äº«ã€‚ä½†æ˜¯ç™¾åº¦è¿™å®¶å…¬å¸æ€ä¹ˆè¯´å‘¢ï¼Œå°±æ˜¯éª¨å­é‡Œï¼Œæœ‰ä¸€ç‚¹<code>X</code>ï¼Œ<em>ä½ æ‡‚çš„</em>ã€‚é‡åˆ°ç¨å¾®å¤§ä¸€ç‚¹çš„æ–‡ä»¶ï¼Œä¸è®©ä»æµè§ˆå™¨ç›´æ¥ä¸‹è½½ä¸è¯´ï¼Œé™é€Ÿèµ·æ¥æ›´æ˜¯æ¯«æ— äººæ€§ã€‚<br>ä¸è¿‡æ­£æ‰€è°“é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆã€‚åœ¨äº’è”ç½‘çš„æ±Ÿæ¹–ï¼Œä¸€åˆ‡çš†æœ‰å¯èƒ½ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ç§å€ŸåŠ©æµè§ˆå™¨æ’ä»¶çªç ´ç™¾åº¦ç½‘ç›˜é™åˆ¶çš„ä¸€ç§æ–¹æ³•ã€‚</p><h3 id="1-å®‰è£…æµè§ˆå™¨æ’ä»¶tampermonkey"><a href="#1-å®‰è£…æµè§ˆå™¨æ’ä»¶tampermonkey" class="headerlink" title="1. å®‰è£…æµè§ˆå™¨æ’ä»¶tampermonkey"></a>1. å®‰è£…æµè§ˆå™¨æ’ä»¶<code>tampermonkey</code></h3><p>å°±å’Œå®‰è£…å…¶ä»–æµè§ˆå™¨æ’ä»¶ä¸€æ ·ï¼Œæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œå¯ä»¥å»å®ƒçš„å®˜ç½‘æŸ¥çœ‹<a href="http://tampermonkey.net" target="_blank" rel="noopener">http://tampermonkey.net</a> ã€‚çœ‹çœ‹å®˜ç½‘æ˜¯æ€ä¹ˆä»‹ç»å®ƒçš„<br><figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">Tampermonkey æ˜¯ä¸€æ¬¾å…è´¹çš„æµè§ˆå™¨æ‰©å±•å’Œæœ€ä¸ºæµè¡Œçš„ç”¨æˆ·è„šæœ¬ç®¡ç†å™¨ï¼Œå®ƒé€‚ç”¨äº Chrome, Microsoft Edge, Safari, Opera <span class="keyword">Next</span>, å’Œ Firefoxã€‚</span><br></pre></td></tr></table></figure></p><h3 id="2-å®‰è£…é’ˆå¯¹ç™¾åº¦ç½‘ç›˜çš„æ‹“å±•è„šæœ¬EX-ç™¾åº¦äº‘ç›˜"><a href="#2-å®‰è£…é’ˆå¯¹ç™¾åº¦ç½‘ç›˜çš„æ‹“å±•è„šæœ¬EX-ç™¾åº¦äº‘ç›˜" class="headerlink" title="2. å®‰è£…é’ˆå¯¹ç™¾åº¦ç½‘ç›˜çš„æ‹“å±•è„šæœ¬EX-ç™¾åº¦äº‘ç›˜"></a>2. å®‰è£…é’ˆå¯¹ç™¾åº¦ç½‘ç›˜çš„æ‹“å±•è„šæœ¬<code>EX-ç™¾åº¦äº‘ç›˜</code></h3><p>é¡¹ç›®åœ°å€ï¼š<a href="https://greasyfork.org/zh-CN/scripts/26638-ex-ç™¾åº¦äº‘ç›˜" target="_blank" rel="noopener">EX-ç™¾åº¦äº‘ç›˜</a>ï¼Œè®¿é—®è¿™ä¸ªé¡¹ç›®é¡µé¢æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å¤§å¤§çš„<code>å®‰è£…æ­¤è„šæœ¬</code>æŒ‰é’®ï¼Œå¤§èƒ†ç‚¹å‡»å®ƒå°±å¥½äº†ã€‚</p><h3 id="3-è®¿é—®ä»»æ„ä¸€ä¸ªç™¾åº¦ç½‘ç›˜åˆ†äº«é¡µé¢å°±èƒ½å¤Ÿå‘ç°æƒŠå–œäº†"><a href="#3-è®¿é—®ä»»æ„ä¸€ä¸ªç™¾åº¦ç½‘ç›˜åˆ†äº«é¡µé¢å°±èƒ½å¤Ÿå‘ç°æƒŠå–œäº†" class="headerlink" title="3. è®¿é—®ä»»æ„ä¸€ä¸ªç™¾åº¦ç½‘ç›˜åˆ†äº«é¡µé¢å°±èƒ½å¤Ÿå‘ç°æƒŠå–œäº†"></a>3. è®¿é—®ä»»æ„ä¸€ä¸ªç™¾åº¦ç½‘ç›˜åˆ†äº«é¡µé¢å°±èƒ½å¤Ÿå‘ç°æƒŠå–œäº†</h3><p><img src="/media/15361965426250.jpg" alt=""><br>æ­¤æ—¶é€šè¿‡ç‚¹å‡»<code>æ™®é€šä¸‹è½½</code>å°±èƒ½å¤Ÿçªç ´ç™¾åº¦ç½‘ç›˜ç½‘é¡µç‰ˆå¯¹äºå¤§æ–‡ä»¶ä¸å…è®¸ä¸‹è½½çš„é™åˆ¶äº†</p><h3 id="4-çªç ´é€Ÿåº¦é™åˆ¶"><a href="#4-çªç ´é€Ÿåº¦é™åˆ¶" class="headerlink" title="4. çªç ´é€Ÿåº¦é™åˆ¶"></a>4. çªç ´é€Ÿåº¦é™åˆ¶</h3><p>æ¥ä¸Šå›¾ï¼Œé€šè¿‡<code>å¤åˆ¶é“¾æ¥</code>æŒ‰é’®ï¼Œæˆ‘ä»¬å°±èƒ½è·å–è¯¥èµ„æºçš„åŸå§‹ä¸‹è½½é“¾æ¥ï¼Œæ­¤æ—¶æˆ‘ä»¬é€šè¿‡ä»»æ„å¤šçº¿ç¨‹ä¸‹è½½å·¥å…·ï¼ˆåŒ…æ‹¬è¿…é›·ï¼Œä½†ä¸æ€ä¹ˆå¥½ç”¨å°±æ˜¯äº†ï¼‰ï¼Œå°±èƒ½è·å¾—å‡ ä¹å³°å€¼çš„ä¸‹è½½é€Ÿåº¦äº†ã€‚<br><img src="/media/15361968542946.jpg" alt=""><br>æˆªå›¾ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„å·¥å…·æ˜¯<code>Aria2GUI</code>ï¼Œè¿™æ˜¯ä¸€æ¬¾é’ˆå¯¹<code>mac OS</code>çš„ä¸‹è½½å·¥å…·ï¼ˆ<a href="https://github.com/yangshun1029/aria2gui/releases" target="_blank" rel="noopener">ç‚¹æ­¤ä¸‹è½½</a>ï¼‰ã€‚å¦‚æœä½ æ˜¯<code>windows</code>ç”¨æˆ·ï¼Œå¯ä»¥è¯•è¯•<code>IDM</code>æˆ–è€…<code>flashget</code>ï¼Œå¦‚æœåŠ¨æ‰‹èƒ½åŠ›å¼ºå¯ä»¥æœç´¢<code>aria2 windows</code>å…³é”®è¯ï¼Œæ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚</p>]]></content>
      
      <categories>
          
          <category> å®ç”¨æŠ€å·§ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ubuntué‡ŒæŸ¥çœ‹è½¯ä»¶åŒ…ä¿¡æ¯</title>
      <link href="/2018/09/05/ubuntu_show_soft_info/"/>
      <url>/2018/09/05/ubuntu_show_soft_info/</url>
      <content type="html"><![CDATA[<p>ä»¥<code>postgresql-10-plv8</code>è¿™ä¸ªè½¯ä»¶åŒ…ä¸ºä¾‹ï¼Œéœ€è¦çŸ¥é“è½¯ä»¶åŒ…çš„ä¸€äº›å¿…è¦ä¿¡æ¯ï¼Œæ¯”å¦‚ç‰ˆæœ¬ã€é¡¹ç›®ä¸»é¡µã€å¤§å°ã€ç®€å•è¯´æ˜ä¹‹ç±»çš„ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š<br><figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">apt <span class="keyword">show</span> postgresql<span class="number">-10</span>-plv8</span><br></pre></td></tr></table></figure></p><p>å¯¹äºæ—©æœŸç‰ˆæœ¬çš„ubuntuï¼ˆ&lt;14.04ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤<br><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">apt-<span class="keyword">cache </span><span class="keyword">show </span>postgresql-10-plv8</span><br></pre></td></tr></table></figure></p><p>å¦å¤–ä¸€ç§æ–¹å¼ä¹Ÿæ˜¯æå¥½çš„ï¼Œå°±æ˜¯åˆ©ç”¨<code>aptitude</code>ï¼Œå‰ææ˜¯ä½ å…ˆå®‰è£…äº†å®ƒï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿™ä¹ˆç”¨ï¼š<br><figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">aptitude <span class="keyword">show</span> postgresql<span class="number">-10</span>-plv8</span><br></pre></td></tr></table></figure></p><p><code>aptitude</code>æ¯”å‰è€…å¼ºçš„åœ°æ–¹æ˜¯å®ƒèƒ½å‘Šè¯‰ä½ è¯¥è½¯ä»¶åŒ…æ˜¯å¦å·²ç»å®‰è£…</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gradleæ’ä»¶ä¸‹è½½ä¸ä¸‹æ¥çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2018/09/04/gradle_plugin_download_error/"/>
      <url>/2018/09/04/gradle_plugin_download_error/</url>
      <content type="html"><![CDATA[<p>å­—ç¬¦ä¹±ç å’Œäº’è”ç½‘ä¸äº’è”ï¼Œæ˜¯å›°æ‰°ä¸­å›½ç¨‹åºå‘˜çš„ä¸¤å¤§é—®é¢˜ã€‚æˆ‘å°±åœ¨ä½¿ç”¨<code>gradle</code>çš„æ—¶å€™ï¼Œä¼šé‡åˆ°å®˜æ–¹æ’ä»¶ä¸‹è½½ä¸ä¸‹æ¥çš„æƒ…å†µã€‚<br>æ¯”å¦‚ä½¿ç”¨<code>org.hidetake.ssh</code>æ’ä»¶æ—¶ï¼Œå¦‚æœæŒ‰ç…§æ–‡æ¡£æ‰€è¿°ï¼Œç›´æ¥è¿™æ ·å†™<br><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">plugins</span> &#123;</span><br><span class="line">  <span class="attribute">id</span> <span class="string">'org.hidetake.ssh'</span> version <span class="string">'2.9.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰æ—¶å€™å°±ä¼šé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œå› ä¸ºæ­¤æ—¶è¦å»è®¿é—®<code>gradle.org</code>å®˜ç½‘å»ç”³è¯·æ’ä»¶ï¼Œè€Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™è¿™ä¸ªç½‘ç»œå°±ä¸é€šäº†ã€‚<br>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»†åŒ–<code>buildscript</code>çš„<code>repositories</code>æ¥è§£å†³é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>plugins</code>ä¹‹å‰ï¼Œå¢åŠ <code>buildscript</code>çš„é…ç½®å†…å®¹ï¼Œæ•´ä½“ä»£ç å¦‚ä¸‹<br><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">buildscript</span> &#123;</span><br><span class="line">    <span class="section">repositories</span> &#123;</span><br><span class="line">        <span class="section">maven</span> &#123;</span><br><span class="line">            <span class="attribute">url</span> <span class="string">"http://maven.aliyun.com/nexus/content/groups/public"</span></span><br><span class="line">        &#125;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    <span class="attribute">id</span> <span class="string">"org.hidetake.ssh"</span> version <span class="string">"2.9.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨é˜¿é‡Œäº‘çš„<code>maven</code>æœåŠ¡å™¨åœ°å€ï¼Œç†è®ºä¸Šè¿˜èƒ½åœ¨å›½å†…è·å¾—æ›´å¿«çš„èµ„æºè®¿é—®é€Ÿåº¦ã€‚</em></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gradle </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vimå¿…çŸ¥å¿…ä¼š</title>
      <link href="/2018/09/03/vim_note/"/>
      <url>/2018/09/03/vim_note/</url>
      <content type="html"><![CDATA[<h3 id="æ™®é€šæ¨¡å¼ä¸‹å…‰æ ‡ç§»åŠ¨"><a href="#æ™®é€šæ¨¡å¼ä¸‹å…‰æ ‡ç§»åŠ¨" class="headerlink" title="æ™®é€šæ¨¡å¼ä¸‹å…‰æ ‡ç§»åŠ¨"></a>æ™®é€šæ¨¡å¼ä¸‹å…‰æ ‡ç§»åŠ¨</h3><ul><li><code>h</code>ï¼šå·¦ç§»ä¸€ä¸ªå­—ç¬¦</li><li><code>j</code>ï¼šä¸‹ç§»ä¸€è¡Œ</li><li><code>k</code>ï¼šä¸Šç§»ä¸€è¡Œ</li><li><p><code>l</code>ï¼šå³ç§»ä¸€ä¸ªå­—ç¬¦</p></li><li><p><code>PageDown</code>(<code>Ctrl+F</code>)ï¼šä¸‹ç¿»ä¸€å±</p></li><li><code>PageUp</code>ï¼ˆ<code>Ctrl+B</code>ï¼‰ä¸Šç¿»ä¸€å±</li><li><code>G</code>ï¼šç§»åŠ¨åˆ°æœ€åä¸€è¡Œ</li><li><code>num G</code>ï¼šç§»åŠ¨åˆ°ç¬¬<em>num</em>è¡Œ</li><li><code>gg</code>ï¼šç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ</li></ul><h3 id="å‘½ä»¤æ¨¡å¼ä¸‹çš„å‘½ä»¤"><a href="#å‘½ä»¤æ¨¡å¼ä¸‹çš„å‘½ä»¤" class="headerlink" title="å‘½ä»¤æ¨¡å¼ä¸‹çš„å‘½ä»¤"></a>å‘½ä»¤æ¨¡å¼ä¸‹çš„å‘½ä»¤</h3><ul><li><code>q</code>ï¼šé€€å‡º</li><li><code>q!</code>ï¼šæ”¾å¼ƒä¿®æ”¹ï¼Œé€€å‡º</li><li><code>w filename</code>ï¼šä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶</li><li><code>wq</code>ï¼šä¿å­˜å¹¶é€€å‡º</li></ul><h3 id="æ™®é€šæ¨¡å¼ä¸‹çš„ç¼–è¾‘å‘½ä»¤"><a href="#æ™®é€šæ¨¡å¼ä¸‹çš„ç¼–è¾‘å‘½ä»¤" class="headerlink" title="æ™®é€šæ¨¡å¼ä¸‹çš„ç¼–è¾‘å‘½ä»¤"></a>æ™®é€šæ¨¡å¼ä¸‹çš„ç¼–è¾‘å‘½ä»¤</h3><ul><li><code>x</code>ï¼šåˆ é™¤å…‰æ ‡ä½ç½®çš„çš„å­—ç¬¦</li><li><code>dd</code>ï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ</li><li><code>dw</code>ï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨å•è¯</li><li><code>d$</code>ï¼šåˆ é™¤å…‰æ ‡è‡³è¡Œå°¾</li><li><code>J</code>ï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œçš„æ¢è¡Œç¬¦</li><li><code>u</code>ï¼šæ’¤é”€æ“ä½œ</li><li><code>a</code>ï¼šåœ¨å…‰æ ‡åè¿½åŠ æ•°æ®</li><li><code>A</code>ï¼šåœ¨å…‰æ ‡æ‰€åœ¨è¡Œæœ«å°¾è¿½åŠ æ•°æ®</li><li><code>r char</code>ï¼šç”¨<em>char</em>æ›¿æ¢å…‰æ ‡æ‰€åœ¨å­—ç¬¦</li><li><code>R text</code>ï¼šç”¨<em>text</em>æ›¿æ¢å…‰æ ‡æ‰€åœ¨ä½ç½®æ•°æ®</li></ul><h3 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h3><ul><li><code>y</code>å¤åˆ¶ï¼Œè·Ÿ<code>d</code>ç±»ä¼¼ï¼Œ<code>yw</code>å¤åˆ¶ä¸€ä¸ªå•è¯ï¼Œ<code>y$</code>å¤åˆ¶åˆ°è¡Œå°¾</li><li><code>p</code>ç²˜è´´<br>è¿˜æœ‰ä¸ªç‰¹åˆ«å¥½ç”¨çš„å°±æ˜¯<code>v</code>æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡æ•²<code>v</code>è¿›å…¥ï¼Œç„¶åå°±å¯ä»¥ç§»åŠ¨å…‰æ ‡æ‰¹é‡é€‰æ‹©å†…å®¹ï¼ŒæŒ‰<code>y</code>å¤åˆ¶ï¼Œä¹‹ååˆé€‚çš„ä½ç½®<code>p</code>è¿›è¡Œç²˜è´´</li></ul><h3 id="æŸ¥æ‰¾æ›¿æ¢"><a href="#æŸ¥æ‰¾æ›¿æ¢" class="headerlink" title="æŸ¥æ‰¾æ›¿æ¢"></a>æŸ¥æ‰¾æ›¿æ¢</h3><ul><li><code>:s/old/new/</code>æ›¿æ¢ä¸€å¤„</li><li><code>:%s/old/new/g</code>æ›¿æ¢æ‰€æœ‰</li><li><code>:%s/old/new/gc</code>ä»¥äº¤äº’è¯¢é—®çš„æ–¹å¼ï¼Œæ›¿æ¢æ‰€æœ‰</li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sshä¸­æ–‡ä¹±ç </title>
      <link href="/2018/09/02/ssh_chinese_garbled/"/>
      <url>/2018/09/02/ssh_chinese_garbled/</url>
      <content type="html"><![CDATA[<p>sshè¿œç¨‹åˆ°æœåŠ¡å™¨åï¼Œé‡åˆ°ä¸­æ–‡ä¹±ç ï¼Œå»ºè®®é€šè¿‡<code>locale</code>æ£€æŸ¥å½“å‰çš„å­—ç¬¦é›†ï¼Œå¦‚æœé‡åˆ°<code>LC_ALL=</code>æ— å€¼ï¼Œåæœ‰å…«ä¹æ˜¯è¦å‡ºé—®é¢˜çš„ã€‚<br>æ­¤æ—¶å¯ä»¥é€šè¿‡æ‰§è¡Œ<code>export  LC_ALL=zh_CN.UTF-8</code>ä¸´æ—¶è§£å†³ã€‚<br>å½“ç„¶ï¼ŒæŠŠä¸Šé¢è¿™å¥æ·»åŠ åˆ°<code>.bash_profile</code>ä¸­ï¼Œå°±å¯ä»¥æ°¸ä¹…è§£å†³äº†ã€‚ å°±åƒè¿™æ ·<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the aliases and functions</span></span><br><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific environment and startup programs</span></span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="built_in">export</span>  LC_ALL=zh_CN.UTF-8</span><br></pre></td></tr></table></figure></p><p>è¡¥å……ä¸€ç‚¹ï¼Œç”¨<code>en_US.UTF-8</code>ä»£æ›¿ä¸Šæ–‡çš„<code>zh_CN.UTF-8</code>ä¹Ÿæ˜¯åŒæ ·æœ‰æ•ˆçš„ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹±ç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç›¸å½“é è°±çš„FastDFS Dockeré•œåƒ</title>
      <link href="/2018/09/01/fastdfs_docker/"/>
      <url>/2018/09/01/fastdfs_docker/</url>
      <content type="html"><![CDATA[<p>è¯¥é¡¹ç›®æ˜¯æˆ‘åœ¨ç½‘ä¸Šæœçš„ï¼Œè¿„ä»Šä¸ºæ­¢ä¸ªäººæ„Ÿè§‰æœ€é è°±çš„<code>FastDFS</code>é•œåƒï¼Œé¡¹ç›®åœ°å€<a href="https://github.com/luhuiguo/fastdfs-docker" target="_blank" rel="noopener">https://github.com/luhuiguo/fastdfs-docker</a></p><p>å¼€å¯ä¸€ä¸ª<code>tracker</code><br><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">docker run -dti <span class="params">--network=host</span> <span class="params">--name</span> tracker -v <span class="string">/var/fdfs/tracker</span>:<span class="string">/var/fdfs</span> luhuiguo/fastdfs tracker</span><br></pre></td></tr></table></figure></p><p>å¼€å¯ä¸€ä¸ª<code>storage</code><br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -dti <span class="attribute">--network</span>=host --name storage0 -e <span class="attribute">TRACKER_SERVER</span>=10.1.5.85:22122 -v /var/fdfs/storage0:/var/fdfs luhuiguo/fastdfs storage</span><br></pre></td></tr></table></figure></p><p>å¼€å¯ä¸€ä¸ª<code>storage</code>ï¼Œå¹¶æŒ‡å®š<code>Group</code><br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">docker <span class="builtin-name">run</span> -dti <span class="attribute">--network</span>=host --name storage2 -e <span class="attribute">TRACKER_SERVER</span>=10.1.5.85:22122 -e <span class="attribute">GROUP_NAME</span>=group2 -e <span class="attribute">PORT</span>=22222 -v /var/fdfs/storage2:/var/fdfs luhuiguo/fastdfs storage</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> FastDFS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è®°ä¸€ä¸ªå…«å²å°å¥³å­©</title>
      <link href="/2018/08/31/eight_years_girl/"/>
      <url>/2018/08/31/eight_years_girl/</url>
      <content type="html"><![CDATA[<p><img src="/media/FullSizeRender.jpeg" alt="æ‘„äºå…´ä¹‰æœºåœº"></p><p>åœ¨è´µé˜³é£å›å¾å·çš„é£æœºä¸Šï¼Œååœ¨æˆ‘æ—è¾¹çš„æ˜¯ä¸€ä¸ªèƒ–ä¹ä¹çš„å°å¥³å­©ã€‚é£è¡Œçš„å‰åŠç¨‹ï¼Œæˆ‘ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œå°±æ˜¯è°å’Œå¥¹é€šè¡Œçš„ï¼Œæ€»ä¸å¯èƒ½ä¸€ä¸ªäºŒä¸‰å¹´çº§çš„å°å­¦ç”Ÿç‹¬è‡ªåé£æœºï¼Œè€Œä¸”è¿˜æ˜¯è¦é£ä¸ªä¸Šåƒå…¬é‡Œçš„è¿™ç§ã€‚<br>ç›´åˆ°çœ‹åˆ°å¥¹è‡ªå·±å»è·Ÿç©ºå§æ²Ÿé€šåˆé¤äº‹å®œï¼Œè‡ªå·±ä»ä¹¦åŒ…é‡Œæ‹¿å‡ºä¸€å¼ æ¯›çˆ·çˆ·æ¥æ”¯ä»˜è‡ªå·±çš„åˆé¤ã€‚æˆ‘æ‰æ˜ç™½ï¼ŒåŸæ¥å¥¹æ˜¯ä¸€ä¸ªäººåé£æœºçš„ã€‚å¿ƒä¸­æš—æš—èµå¹ã€‚<br>åæ¥ç®€å•è·Ÿå¥¹èŠäº†ä¸€ä¼šï¼Œå¾—çŸ¥å¥¹ä»Šå¹´å…«å²ã€‚å› ä¸ºçˆ¶æ¯ç¦»å¼‚ï¼Œåˆ†å±…ä¸¤åœ°ï¼Œå¥¹ä»å››å²æ—¶å°±å¼€å§‹äº†è¿™ç§ç‹¬è‡ªå¾€è¿”äºè´µé˜³ä¸å¾å·çš„ç”Ÿæ´»ã€‚è¿™çš„ç¡®å¬èµ·æ¥è®©äººè§‰å¾—å¯æ€œï¼Œæ¯•ç«Ÿå­©å­æ˜¯æ— è¾œçš„ï¼Œä½†å´æ²¡ä»€ä¹ˆå…¶ä»–åŠæ³•ã€‚<br>æˆ‘ç•™äº†ä¸€å¼ æœ‰æˆ‘ä»¬ä¿©äººçš„è‡ªæ‹ç…§ï¼Œä½†æ²¡æœ‰é—®å¥¹åå­—ã€‚åªèƒ½åœ¨å¿ƒé‡Œé»˜é»˜ç¥ç¦å¥¹ï¼Œå¸Œæœ›æœªæ¥èƒ½è¶Šæ¥è¶Šå¥½ã€‚</p><p>æœ€åè®°å½•ä¸€ä¸‹æˆ‘ä¿©çš„å¯¹è¯ï¼š<br>å¥¹ï¼šä½ è¯´ä¸–ç•Œä¸Šåäººå¤šä¹ˆï¼Ÿ<br>æˆ‘ï¼šå¤šï¼Œä½†æ˜¯æ²¡æœ‰å¥½äººå¤šã€‚</p>]]></content>
      
      <categories>
          
          <category> æ¸¸è®° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Â«å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡ä¹¦Â»ä¸­æœ€å…³é”®çš„ä¹ä¸ªå­—</title>
      <link href="/2018/08/30/non-designers-design-book/"/>
      <url>/2018/08/30/non-designers-design-book/</url>
      <content type="html"><![CDATA[<p>Â«å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡ä¹¦Â»ä¹¦å¦‚å…¶åï¼Œæ˜¯ä¸€æœ¬éå¸¸é€‚åˆå¤–è¡Œçœ‹çš„è®¾è®¡ä¹¦ã€‚è¿™æœ¬ä¹¦å†ç‰ˆå¤šæ¬¡ï¼Œè¶³ä»¥è¯æ˜å…¶ä¼˜ç§€ï¼Œæ¨èç»™å¯èƒ½ä¼šé‡åˆ°UIè®¾è®¡éœ€æ±‚çš„ç¨‹åºå‘˜åŒèƒçœ‹ã€‚<br>å…¨ä¹¦çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å››ä¸ªåŸåˆ™ï¼Œå¦‚æœä½ æ²¡æ—¶é—´çœ‹ä¹¦ï¼Œåªè¦ç‰¢è®°è¿™å››å¤§åŸåˆ™ï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿè·ç›Šè‰¯å¤šçš„ã€‚</p><h3 id="å¯¹æ¯”-ï¼ˆContrastï¼‰"><a href="#å¯¹æ¯”-ï¼ˆContrastï¼‰" class="headerlink" title="å¯¹æ¯” ï¼ˆContrastï¼‰"></a>å¯¹æ¯” ï¼ˆContrastï¼‰</h3><p>å¯¹æ¯”çš„ç›®çš„æ˜¯å¼ºè°ƒé‡ç‚¹ï¼Œæ‰€ä»¥ä¹Ÿä¸è¦ä¸ºäº†å¯¹æ¯”è€Œå¯¹æ¯”ã€‚é€šè¿‡å¯¹æ¯”çš„è®¾è®¡ï¼Œçªå‡ºä½ æƒ³è¡¨è¾¾çš„ï¼Œè®©å—ä¼—èƒ½æ›´å®¹æ˜“åœ°å‘ç°é‡ç‚¹ã€‚</p><h3 id="é‡å¤-ï¼ˆRepetitionï¼‰"><a href="#é‡å¤-ï¼ˆRepetitionï¼‰" class="headerlink" title="é‡å¤ ï¼ˆRepetitionï¼‰"></a>é‡å¤ ï¼ˆRepetitionï¼‰</h3><p>ä¸æ˜¯å•æŒ‡å­—é¢ä¸Šçš„é‡å¤ï¼ŒæŒ‰æˆ‘çš„ç†è§£ï¼Œç”¨â€œå‘¼åº”â€æ›´ä¸ºè´´åˆ‡ã€‚é¢œè‰²ä¹Ÿå¥½ã€å›¾å½¢ä¹Ÿå¥½ã€ç”šè‡³å­—ä½“ç­‰ç­‰ï¼Œé€šè¿‡ä¸€å®šçš„é‡å¤äº§ç”Ÿå‘¼åº”çš„æ•ˆæœã€‚ç»™äººä¸€ç§ç²¾å¿ƒè®¾è®¡çš„æ„Ÿè§‰ã€‚</p><h3 id="å¯¹é½-ï¼ˆAlignmentï¼‰"><a href="#å¯¹é½-ï¼ˆAlignmentï¼‰" class="headerlink" title="å¯¹é½ ï¼ˆAlignmentï¼‰"></a>å¯¹é½ ï¼ˆAlignmentï¼‰</h3><p>è¿™ä¸ªå¾ˆå¤šäººéƒ½æœ‰æ„Ÿè§¦çš„ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¯¹é½å…¶å®ä¹Ÿæ˜¯æŸä¸ªç»´åº¦çš„é‡å¤ï¼Œå…¶å®è·Ÿç¬¬äºŒæ¡åŸåˆ™æ˜¯é‡å çš„ã€‚åªæ˜¯å¯¹é½æ˜¯æœ€å®¹æ˜“åšåˆ°ï¼Œä¹Ÿæ˜¯æœ€åº”è¯¥åšåˆ°çš„ï¼Œæ•…è€Œå•ç‹¬æ‹¿å‡ºä»¥ç¤ºå…¶é‡è¦æ€§ã€‚</p><h3 id="äº²å¯†æ€§-ï¼ˆProximityï¼‰"><a href="#äº²å¯†æ€§-ï¼ˆProximityï¼‰" class="headerlink" title="äº²å¯†æ€§ ï¼ˆProximityï¼‰"></a>äº²å¯†æ€§ ï¼ˆProximityï¼‰</h3><p>è¿™ä¸ªç¿»è¯‘ï¼Œè¿˜æŒºè®©äººæ™•çš„ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯æŠŠæœ‰å…±æ€§çš„äº‹ç‰©èšç±»ï¼Œå½¢æˆè§†è§‰å•å…ƒï¼ˆ<em>visual unit</em>ï¼‰ã€‚</p><p>ä»¥ä¸Šå››åŸåˆ™æ‘˜è‡ª<a href="https://item.jd.com/11824338.html" target="_blank" rel="noopener">Â«å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡ä¹¦Â»</a>ï¼Œä½†æ˜¯è§£è¯»æ˜¯æˆ‘è‡ªå·±æ ¹æ®ç†è§£è¡¥å……çš„ã€‚è¯è¯´å›æ¥ï¼Œå½“ä½ å›è¿‡å¤´å®¡è§†è¿™å‡ ä¸ªåŸåˆ™çš„æ—¶å€™ï¼Œä¼šå‘ç°è¿™ç”šè‡³è·Ÿå†™ä½œæ–‡ã€å†™è¯—æ­Œã€å†™å°è¯´æœ‰ç‚¹åƒã€‚è¦æœ‰èµ·ä¼ï¼Œè¦æœ‰é‡ç‚¹ï¼Œè¦å‰åå‘¼åº”ã€‚æ˜¯ä¸æ˜¯å¾ˆæœ‰æ„æ€å‘¢ï¼Ÿ</p>]]></content>
      
      <categories>
          
          <category> è®¾è®¡ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UIè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åœ¨SpringBootä¸­ä½¿ç”¨groovy.sql.SQLé«˜æ•ˆå¼€å‘</title>
      <link href="/2018/08/29/groovy-sql-SQL-in-spring-boot/"/>
      <url>/2018/08/29/groovy-sql-SQL-in-spring-boot/</url>
      <content type="html"><![CDATA[<p>æŸç§æƒ…å†µä¸‹ï¼Œå…¶å®å°±æƒ³ç”¨<code>Spring Boot</code>æä¾›çš„é‚£ç§å³å¼€å³ç”¨çš„å¼€å‘ä½“éªŒï¼Œä½†æ˜¯æˆ‘çœŸçš„å¯¹<code>Spring</code>ä¿å§†å¼çš„ä¸€æ½å­å·¥ç¨‹ä¸æ€ä¹ˆæ„Ÿå†’ã€‚å°¤å…¶æ˜¯æ•°æ®åº“<code>JDBC</code>è¿™å—ã€‚å¸¸è§çš„<code>Java</code>ç³»é‡Œæåˆ°çš„æŠ€æœ¯ï¼Œæˆ‘çœŸçš„ä¸€ä¸ªéƒ½ä¸æƒ³ç”¨ï¼Œæˆ‘æœ€é’Ÿçˆ±çš„æ•°æ®åº“ç±»åº“å…¶å®å°±æ˜¯<code>groovy.sql.SQL</code>ï¼Œç®€å•è€Œå¼ºå¤§ï¼Œé…åˆ<code>Groovy</code>ä¹‹åï¼Œå†ä¹Ÿæ²¡æœ‰ç¹ççš„<code>Java Bean</code>å’Œæ— è¾¹æ— é™…çš„<code>get</code>ã€<code>set</code>ã€‚<br>æƒ³äº†è§£æ›´å¤š<code>groovy.sql.SQL</code>æ¬¢è¿æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://groovy-lang.org/databases.html" target="_blank" rel="noopener">http://groovy-lang.org/databases.html</a><br>ä»Šå¤©æˆ‘ä»¬è¿˜æ˜¯ç€é‡è¯´ä¸€ä¸‹ï¼Œæ€ä¹ˆåœ¨<code>Spring Boot</code>çš„æ¡†æ¶ä¸‹èå…¥<code>groovy.sql.SQL</code>ï¼Œè¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ï¼š</p><h4 id="gradle-build"><a href="#gradle-build" class="headerlink" title="gradle.build"></a>gradle.build</h4><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">'org.springframework.boot'</span> version <span class="string">'1.5.15.RELEASE'</span></span><br><span class="line">    id <span class="string">'war'</span></span><br><span class="line">    id <span class="string">'groovy'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">group</span> <span class="string">'com.aruistar'</span></span><br><span class="line">version <span class="string">'1.0-SNAPSHOT'</span></span><br><span class="line"></span><br><span class="line">ext &#123;</span><br><span class="line">    groovy_version = <span class="string">"2.5.2"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="number">1.8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">"org.springframework.boot:spring-boot-starter-web"</span>)</span><br><span class="line"><span class="comment">//    providedRuntime("org.springframework.boot:spring-boot-starter-tomcat")</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"org.codehaus.groovy:groovy:$groovy_version"</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"org.codehaus.groovy:groovy-sql:$groovy_version"</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"org.codehaus.groovy:groovy-json:$groovy_version"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'com.alibaba'</span>, name: <span class="string">'druid'</span>, version: <span class="string">'1.1.10'</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'mysql'</span>, name: <span class="string">'mysql-connector-java'</span>, version: <span class="string">'5.1.46'</span></span><br><span class="line"></span><br><span class="line">    testCompile <span class="string">"org.codehaus.groovy:groovy-test:$groovy_version"</span></span><br><span class="line">    testCompile(<span class="string">"org.springframework.boot:spring-boot-starter-test"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¨‹åºå…¥å£Application"><a href="#ç¨‹åºå…¥å£Application" class="headerlink" title="ç¨‹åºå…¥å£Application"></a>ç¨‹åºå…¥å£Application</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aruistar</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource</span><br><span class="line"><span class="keyword">import</span> groovy.sql.Sql</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.support.SpringBootServletInitializer</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Application</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(Application.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(<span class="string">"app.datasource"</span>)</span><br><span class="line">    <span class="function">DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DataSourceBuilder.create().type(DruidDataSource.class).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">Sql <span class="title">db</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sql(dataSource())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶application-yml"><a href="#é…ç½®æ–‡ä»¶application-yml" class="headerlink" title="é…ç½®æ–‡ä»¶application.yml"></a>é…ç½®æ–‡ä»¶application.yml</h4><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">app:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">    pool-size:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="ç”¨ä¸ŠSqlçš„Controller"><a href="#ç”¨ä¸ŠSqlçš„Controller" class="headerlink" title="ç”¨ä¸ŠSqlçš„Controller"></a>ç”¨ä¸ŠSqlçš„Controller</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aruistar.controller</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> groovy.sql.Sql</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/open"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OpenController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Sql db</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="function">def <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        db.firstRow(<span class="string">"select 1)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>è¿™å¥—æ–¹æ¡ˆç”¨ä¸Šäº†<code>Spring</code>ï¼Œä¹Ÿç”¨ä¸Šäº†æ•°æ®åº“è¿æ¥æ± <code>druid</code>ï¼Œæ‰€ä»¥é¡¹ç›®æ•´ä½“æ˜¯è¶³å¤Ÿå¥å£®çš„ã€‚å¦‚æœä½ çš„é¡¹ç›®æœ¬æ¥å°±æ˜¯åŸºäº<code>Spring</code>æŠ€æœ¯æ ˆçš„ï¼Œé‚£æˆ‘å¼ºçƒˆæ¨èä½ è¯•è¯•ç»“åˆ<code>Groovy</code>çš„è¿™å¥—æ‰“æ³•ã€‚å¯ä»¥å¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚<br><strong>äº²è‡ªè·‘ä¸€ä¸‹<code>Groovy</code>é¡¹ç›®ï¼Œç”¨ç”¨å¥¹æä¾›çš„<code>SQL</code>ç±»ï¼Œæˆ‘æƒ³ä½ ä¼šçˆ±ä¸Šå¥¹çš„</strong></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸Šå¢™çºªå¿µ</title>
      <link href="/2018/08/28/vertx_example_contributors/"/>
      <url>/2018/08/28/vertx_example_contributors/</url>
      <content type="html"><![CDATA[<p><img src="/media/15354179433179.jpg" alt=""><br><a href="https://github.com/vert-x3/vertx-examples" target="_blank" rel="noopener">vertx-examples</a>é¡¹ç›®åˆå¹¶äº†æˆ‘ä¸€æ¬¡<code>PR</code>ï¼Œæ‰€ä»¥æˆ‘çš„IDå‡ºç°åœ¨<a href="https://github.com/vert-x3/vertx-examples/graphs/contributors" target="_blank" rel="noopener">contributors</a>é‡Œäº†ã€‚åº”è¯¥æ˜¯ä¸ºæ•°ä¸å¤šçš„äºšè£”é¢å­”ã€‚å—¨çš®ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> contributors </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gradleä¸­çš„sourceCompatibilityä¸targetCompatibility</title>
      <link href="/2018/08/27/sourceCompatibility_and_targetCompatibility_in_gradle/"/>
      <url>/2018/08/27/sourceCompatibility_and_targetCompatibility_in_gradle/</url>
      <content type="html"><![CDATA[<p><code>Gradle</code>ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£ã€‚ä»Šå¤©æ­£å¥½è¦ç»ƒä¹ ä¸‹<code>Java10</code>ï¼Œé‚£å°±å…ˆæŠŠè¿™ä¸¤ä¸ªå±æ€§çš„é—®é¢˜æµ‹è¯•é€äº†å†è¯´ã€‚é‚£å°±æ˜¯<code>sourceCompatibility</code>å’Œ<code>targetCompatibility</code>ã€‚<br>ç®€å•çš„è¯´ï¼Œ<code>sourceCompatibility</code>å±æ€§è·Ÿç¼–è¯‘ç¯å¢ƒæœ‰å…³ï¼Œè€Œ<code>targetCompatibility</code>å±æ€§è·Ÿè¿è¡Œç¯å¢ƒæœ‰å…³ã€‚<br>è‡³å°‘æœ‰è¿™ä¹ˆå‡ ä¸ªåŸåˆ™ï¼Œæ˜¯ä¸èƒ½è¿èƒŒçš„ï¼š</p><ol><li><code>sourceCompatibility</code>å…³ç³»åˆ°ä½ ä½¿ç”¨åˆ°çš„<code>Java</code>è¯­æ³•ç‰¹æ€§åŠåº“</li><li><code>sourceCompatibility</code>ä¸èƒ½æ¯”<code>targetCompatibility</code>å¤§</li><li><code>targetCompatibility</code>ä¸èƒ½æ¯”ç›®æ ‡å®¢æˆ·ç«¯è¿è¡Œç¯å¢ƒçš„<code>JavaVersion</code>å¤§</li><li><code>targetCompatibility</code>ä¸èƒ½æ¯”å½“å‰<code>Gradle</code>ä½¿ç”¨çš„<code>JavaVersion</code>å¤§</li></ol><p>æ€»ç»“èµ·æ¥å°±æ˜¯è¿™æ ·<br><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">ä»£ç ç”¨çš„è¯­è¨€ç‰¹æ€§å¯¹åº”çš„JavaVersion </span><br><span class="line">â‰¦ <span class="keyword">sourceCompatibility</span> </span><br><span class="line">â‰¦ <span class="keyword">targetCompatibility</span> </span><br><span class="line">â‰¦ Gradleä½¿ç”¨çš„JavaVersion </span><br><span class="line">â‰¦ å®¢æˆ·ç«¯ç¯å¢ƒçš„JavaVersion</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gradle </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­å…³äºSCHEMAå’ŒSEARCH_PATHçš„ä¸€äº›æŠ€å·§</title>
      <link href="/2018/08/26/postgresql_schema_and_search_path/"/>
      <url>/2018/08/26/postgresql_schema_and_search_path/</url>
      <content type="html"><![CDATA[<h4 id="1-extensionæœ€å¥½æ”¾åœ¨å•ç‹¬çš„schemaé‡Œï¼Œå°±åƒè¿™æ ·"><a href="#1-extensionæœ€å¥½æ”¾åœ¨å•ç‹¬çš„schemaé‡Œï¼Œå°±åƒè¿™æ ·" class="headerlink" title="1. extensionæœ€å¥½æ”¾åœ¨å•ç‹¬çš„schemaé‡Œï¼Œå°±åƒè¿™æ ·"></a>1. <code>extension</code>æœ€å¥½æ”¾åœ¨å•ç‹¬çš„<code>schema</code>é‡Œï¼Œå°±åƒè¿™æ ·</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">schema</span> <span class="string">"extension_schema"</span>;</span><br><span class="line"><span class="keyword">create</span> extension <span class="string">"ltree"</span> <span class="keyword">schema</span> extension_schema;</span><br></pre></td></tr></table></figure><h4 id="2-ä¸šåŠ¡ä¸Šä¸ç›¸å¹²çš„è¡¨ï¼Œå»ºè®®ä¹Ÿæ”¾åœ¨å•ç‹¬çš„schemaä¸­ï¼Œæ¯”å¦‚è¿™æ ·"><a href="#2-ä¸šåŠ¡ä¸Šä¸ç›¸å¹²çš„è¡¨ï¼Œå»ºè®®ä¹Ÿæ”¾åœ¨å•ç‹¬çš„schemaä¸­ï¼Œæ¯”å¦‚è¿™æ ·" class="headerlink" title="2.ä¸šåŠ¡ä¸Šä¸ç›¸å¹²çš„è¡¨ï¼Œå»ºè®®ä¹Ÿæ”¾åœ¨å•ç‹¬çš„schemaä¸­ï¼Œæ¯”å¦‚è¿™æ ·"></a>2.ä¸šåŠ¡ä¸Šä¸ç›¸å¹²çš„è¡¨ï¼Œå»ºè®®ä¹Ÿæ”¾åœ¨å•ç‹¬çš„<code>schema</code>ä¸­ï¼Œæ¯”å¦‚è¿™æ ·</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">schema</span> <span class="string">"metadata_schema"</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">schema</span> <span class="string">"platform_schema"</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">schema</span> <span class="string">"platform_schema"</span>;</span><br></pre></td></tr></table></figure><h4 id="3-å¯é€‰-ä»æ•°æ®åº“è®¾è®¡çš„è§’åº¦æ¥è¯´ï¼Œä¸åŒschemaä¸­çš„è¡¨åæ˜¯å¯ä»¥é‡åçš„ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™è¦åå…¶é“è€Œè¡Œä¹‹ï¼Œå°±æ˜¯è¦ä»»ä½•æƒ…å†µä¸‹è¡¨åä¸åŒï¼Œæ–¹ä¾¿ç¼–å†™SQLçš„æ—¶å€™ï¼Œå¯ä»¥æ–¹ä¾¿çš„çœç•¥schemaã€‚è¿™æ ·å°±éœ€è¦å€ŸåŠ©è§¦å‘å™¨äº†ã€‚åƒè¿™æ ·"><a href="#3-å¯é€‰-ä»æ•°æ®åº“è®¾è®¡çš„è§’åº¦æ¥è¯´ï¼Œä¸åŒschemaä¸­çš„è¡¨åæ˜¯å¯ä»¥é‡åçš„ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™è¦åå…¶é“è€Œè¡Œä¹‹ï¼Œå°±æ˜¯è¦ä»»ä½•æƒ…å†µä¸‹è¡¨åä¸åŒï¼Œæ–¹ä¾¿ç¼–å†™SQLçš„æ—¶å€™ï¼Œå¯ä»¥æ–¹ä¾¿çš„çœç•¥schemaã€‚è¿™æ ·å°±éœ€è¦å€ŸåŠ©è§¦å‘å™¨äº†ã€‚åƒè¿™æ ·" class="headerlink" title="3.[å¯é€‰]ä»æ•°æ®åº“è®¾è®¡çš„è§’åº¦æ¥è¯´ï¼Œä¸åŒschemaä¸­çš„è¡¨åæ˜¯å¯ä»¥é‡åçš„ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™è¦åå…¶é“è€Œè¡Œä¹‹ï¼Œå°±æ˜¯è¦ä»»ä½•æƒ…å†µä¸‹è¡¨åä¸åŒï¼Œæ–¹ä¾¿ç¼–å†™SQLçš„æ—¶å€™ï¼Œå¯ä»¥æ–¹ä¾¿çš„çœç•¥schemaã€‚è¿™æ ·å°±éœ€è¦å€ŸåŠ©è§¦å‘å™¨äº†ã€‚åƒè¿™æ ·"></a>3.[<em>å¯é€‰</em>]ä»æ•°æ®åº“è®¾è®¡çš„è§’åº¦æ¥è¯´ï¼Œä¸åŒ<code>schema</code>ä¸­çš„è¡¨åæ˜¯å¯ä»¥é‡åçš„ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™è¦åå…¶é“è€Œè¡Œä¹‹ï¼Œå°±æ˜¯è¦ä»»ä½•æƒ…å†µä¸‹è¡¨åä¸åŒï¼Œæ–¹ä¾¿ç¼–å†™<code>SQL</code>çš„æ—¶å€™ï¼Œå¯ä»¥æ–¹ä¾¿çš„çœç•¥<code>schema</code>ã€‚è¿™æ ·å°±éœ€è¦å€ŸåŠ©è§¦å‘å™¨äº†ã€‚åƒè¿™æ ·</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> table_create()</span><br><span class="line">  <span class="keyword">returns</span> event_trigger</span><br><span class="line"><span class="keyword">language</span> plpgsql</span><br><span class="line"><span class="keyword">as</span> $$</span><br><span class="line"><span class="keyword">DECLARE</span> </span><br><span class="line">        table_name       <span class="built_in">VARCHAR</span>;</span><br><span class="line">        short_table_name VARCHAR;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> object_identity</span><br><span class="line">  <span class="keyword">INTO</span> table_name</span><br><span class="line">  <span class="keyword">FROM</span> pg_event_trigger_ddl_commands();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="keyword">substr</span>(table_name, <span class="keyword">position</span>(<span class="string">'.'</span> <span class="keyword">IN</span> table_name) + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">INTO</span> short_table_name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="keyword">count</span>(*) &gt; <span class="number">1</span></span><br><span class="line">  <span class="keyword">INTO</span> is_exist</span><br><span class="line">  <span class="keyword">FROM</span> pg_catalog.pg_stat_user_tables</span><br><span class="line">  <span class="keyword">WHERE</span> relname = short_table_name :: <span class="built_in">VARCHAR</span>;</span><br><span class="line"></span><br><span class="line">  IF is_exist</span><br><span class="line">  THEN</span><br><span class="line">    RAISE EXCEPTION '%  already exists. event:%, command:%. abort.', table_name, TG_EVENT, TG_TAG;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EVENT</span> <span class="keyword">TRIGGER</span> etgr_table_create</span><br><span class="line"><span class="keyword">ON</span> ddl_command_end</span><br><span class="line"><span class="keyword">WHEN</span> TAG <span class="keyword">IN</span> (<span class="string">'CREATE TABLE'</span>)</span><br><span class="line"><span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> table_create();</span><br></pre></td></tr></table></figure><h4 id="4-ç°åœ¨schemaå·²ç»å¤Ÿå¤šäº†ï¼Œä½†æ˜¯ç”¨æˆ·è¿æ¥åˆ°PostgreSQLçš„æ—¶å€™ï¼Œé»˜è®¤åªä¼šå»-userè·Ÿpublicè¿™ä¸¤ä¸ªschemaå»å¯»æ‰¾è¡¨ï¼Œå¦‚æœè¦è®¿é—®åˆ«çš„schemaè¿˜è¦åœ¨ç”¨åˆ°çš„æ—¶å€™é‡‡ç”¨schema-tableçš„æ–¹å¼ã€‚è¿™ç‚¹åœ¨é…ç½®æ–‡ä»¶postgresql-confä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°"><a href="#4-ç°åœ¨schemaå·²ç»å¤Ÿå¤šäº†ï¼Œä½†æ˜¯ç”¨æˆ·è¿æ¥åˆ°PostgreSQLçš„æ—¶å€™ï¼Œé»˜è®¤åªä¼šå»-userè·Ÿpublicè¿™ä¸¤ä¸ªschemaå»å¯»æ‰¾è¡¨ï¼Œå¦‚æœè¦è®¿é—®åˆ«çš„schemaè¿˜è¦åœ¨ç”¨åˆ°çš„æ—¶å€™é‡‡ç”¨schema-tableçš„æ–¹å¼ã€‚è¿™ç‚¹åœ¨é…ç½®æ–‡ä»¶postgresql-confä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°" class="headerlink" title="4.ç°åœ¨schemaå·²ç»å¤Ÿå¤šäº†ï¼Œä½†æ˜¯ç”¨æˆ·è¿æ¥åˆ°PostgreSQLçš„æ—¶å€™ï¼Œé»˜è®¤åªä¼šå»$userè·Ÿpublicè¿™ä¸¤ä¸ªschemaå»å¯»æ‰¾è¡¨ï¼Œå¦‚æœè¦è®¿é—®åˆ«çš„schemaè¿˜è¦åœ¨ç”¨åˆ°çš„æ—¶å€™é‡‡ç”¨schema.tableçš„æ–¹å¼ã€‚è¿™ç‚¹åœ¨é…ç½®æ–‡ä»¶postgresql.confä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°"></a>4.ç°åœ¨<code>schema</code>å·²ç»å¤Ÿå¤šäº†ï¼Œä½†æ˜¯ç”¨æˆ·è¿æ¥åˆ°<code>PostgreSQL</code>çš„æ—¶å€™ï¼Œé»˜è®¤åªä¼šå»<code>$user</code>è·Ÿ<code>public</code>è¿™ä¸¤ä¸ª<code>schema</code>å»å¯»æ‰¾è¡¨ï¼Œå¦‚æœè¦è®¿é—®åˆ«çš„<code>schema</code>è¿˜è¦åœ¨ç”¨åˆ°çš„æ—¶å€™é‡‡ç”¨<code>schema.table</code>çš„æ–¹å¼ã€‚è¿™ç‚¹åœ¨é…ç½®æ–‡ä»¶<code>postgresql.conf</code>ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">search_path = <span class="string">'"$user", public'</span>        <span class="comment"># schema names</span></span></span><br></pre></td></tr></table></figure><p>èªæ˜çš„ä½ å·²ç»çŒœåˆ°ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„è¿™ä¸ª<code>search_path</code>ï¼Œå°±å¯ä»¥è®©ç”¨æˆ·è®¿é—®è¡¨çš„æ—¶å€™ä¸å¿…å¸¦ä¸Š<code>schema</code>ã€‚<br>ä½†æ˜¯æˆ‘å€’ä¸å»ºè®®è¿™ä¹ˆåšã€‚å› ä¸ºè¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯å…¨å±€çš„ã€‚æˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¤šä¸ª<code>database</code>è¿è¡Œäºæ­¤ï¼Œè€Œä»–ä»¬æœ‰ç€ä¸ç›¸å¹²çš„<code>schema</code>ï¼Œéƒ½å†™åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢æ˜¾ç„¶ä¸åˆé€‚ã€‚æˆ‘ä»¬åº”è¯¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è®¾ç½®<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> <span class="string">"your_database"</span> <span class="keyword">set</span> search_path = metadata_schema,metadata_schema,platform_schema,<span class="keyword">public</span>;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å¯ä»¥ç²¾ç¡®åˆ°å¯¹ä¸€ä¸ªåº“è®¾ç½®å®ƒçš„é»˜è®¤<code>search_path</code>äº†ã€‚è®¾ç½®å®Œæ¯•åï¼Œé‡æ–°å»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œæ‰§è¡Œ<code>show search_path;</code>å¯ä»¥æŸ¥çœ‹è®¾ç½®ç»“æœã€‚<br>é™¤äº†ä¸Šé¢é€šè¿‡<code>alter database</code>ä¹‹å¤–ï¼Œ<code>alter role</code>ä¹Ÿèƒ½èµ·åˆ°ç±»ä¼¼çš„æ•ˆæœï¼Œè¿˜é å°ä¼™ä¼´ä»¬è‡ªè¡Œå‘æ˜äº†ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sshè¿æ¥ä¿æ´»ï¼Œmoshåˆä½“éªŒ</title>
      <link href="/2018/08/25/mosh/"/>
      <url>/2018/08/25/mosh/</url>
      <content type="html"><![CDATA[<p>ä¼ ç»Ÿçš„<code>ssh</code>æœ€æ¼äººçš„å°±æ˜¯æ”¾ç€ä¸åŠ¨ï¼Œæ²¡å¤šä¹…å°±ä¸¢äº†ã€‚æœ‰æ—¶å€™<code>tail -f</code>è·Ÿè¸ªä¸€ä¸ªæ—¥å¿—ï¼Œä¸€ä¼šæ—¥å¿—æ²¡åŠ¨é™ï¼Œå¯èƒ½<code>ssh</code>å°±å·²ç»é˜µäº¡äº†ï¼Œè€Œæˆ‘è¿˜æ²¡ååº”è¿‡æ¥ï¼Œè¿˜ç¢ç£¨ç€æ—¥å¿—è¯¥å‡ºæ¥äº†ã€‚çƒ¦ã€‚<br>å‰ä¸¤å¤©ç ”ç©¶<code>iTerm2</code>çš„æ—¶å€™ï¼Œçœ‹åˆ°æœ‰äººåˆ†äº«<code>mosh</code>çš„ç›¸å…³çŸ¥è¯†ï¼Œæåˆ°å®ƒæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯<code>ssh</code>ä¿æ´»ã€‚é©¬ä¸Šå†³å®šä¸€è¯•ã€‚</p><ol><li><p>æœåŠ¡ç«¯å®‰è£…</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">yum <span class="keyword">install</span> mosh</span><br></pre></td></tr></table></figure></li><li><p>é˜²ç«å¢™æ”¾è¡Œç«¯å£ï¼Œç«¯å£ä»<code>60000</code>æ’é˜Ÿèµ·æ­¥ï¼Œæ ¹æ®åŒæ—¶å¯èƒ½äº§ç”Ÿçš„è¿æ¥æ•°é‡ï¼Œé€‚å½“æ”¾è¡Œå‡ ä¸ªå°±å¥½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --add-port=60000-60010/udp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯åŒæ ·å®‰è£…<code>mosh</code></p><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>mosh</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯ä½¿ç”¨</p> <figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">mosh -ssh=<span class="string">"ssh -p 3322"</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.88</span></span><br></pre></td></tr></table></figure><p> ä¸Šé¢çš„<code>-ssh</code>å‘½ä»¤ä¸»è¦æ˜¯ç”¨åœ¨<code>ssh</code>ç«¯å£ä¸æ˜¯å¼€åœ¨<code>22</code>çš„æƒ…å†µä¸‹ï¼Œéœ€è¦æŒ‡å®šç«¯å£ã€‚å› ä¸º<code>mosh</code>è‡ªå·±çš„<code>-p</code>æ˜¯æŒ‡çš„<code>mosh</code>è‡ªèº«è¦ç”¨çš„<code>udp</code>ç«¯å£ã€‚<br> å¦å¤–ï¼Œå¦‚æœä½ ç»´æŠ¤äº†<code>ï½/.ssh/config</code>æ–‡ä»¶çš„è¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œ<code>mosh</code>å¯ä»¥ç›´æ¥è¯»å–è¿™ä¸ª<code>config</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¹‹å‰<code>ssh a_server</code>å¯ä»¥æ— ç¼æ›¿æ¢æˆ<code>mosh a_server</code></p></li><li><p>æ’é”™ï¼Œå¦‚æœé‡åˆ°å®¢æˆ·ç«¯è®¿é—®ä¸äº†æœåŠ¡å™¨ï¼Œå¹¶ä¸”æœ‰å¦‚ä¸‹æç¤º</p> <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">locale: Cannot <span class="builtin-name">set</span> LC_CTYPE <span class="keyword">to</span><span class="built_in"> default </span>locale: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line">locale: Cannot <span class="builtin-name">set</span> LC_ALL <span class="keyword">to</span><span class="built_in"> default </span>locale: <span class="literal">No</span> such file <span class="keyword">or</span> directory</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">Connection <span class="keyword">to</span> xxx.xxx.xxx.xxx closed.</span><br><span class="line">/usr/local/bin/mosh: Did <span class="keyword">not</span> <span class="builtin-name">find</span> mosh<span class="built_in"> server </span>startup message. (Have you installed mosh on your server?)</span><br></pre></td></tr></table></figure><p> å¯ä»¥å°è¯•åœ¨æœåŠ¡å™¨ä¸Šçš„<code>~/.bashrc</code>æ–‡ä»¶è¿½åŠ è¿™ä¸¤è¡Œè§£å†³</p> <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">LANG</span>=en_US.UTF-8</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LC_ALL</span>=en_US.UTF-8</span><br></pre></td></tr></table></figure></li><li><p>æœ€åè¯´ä¸‹å®é™…ä½“éªŒæ„Ÿå—<br> çš„ç¡®å¤§å¤§å»¶é•¿äº†<code>ssh</code>çš„å¯ç”¨æ—¶é—´ï¼Œä½†æ˜¯åƒç½‘ä¸Šè¯´çš„èƒ½åšæŒä¸ªä¸ªæŠŠæœˆï¼Œå¾ˆé—æ†¾æˆ‘å¹¶æ²¡æœ‰é‚£ä¹ˆå¹¸è¿ï¼Œä¸è¿‡<code>mosh</code>ä»ç„¶æ˜¯ä¸ªå€¼å¾—æ¨èçš„å·¥å…·ã€‚</p></li></ol>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Javalinåˆä¸€ä¸ªå°è€Œç¾çš„Java Webæ¡†æ¶</title>
      <link href="/2018/08/24/javalin/"/>
      <url>/2018/08/24/javalin/</url>
      <content type="html"><![CDATA[<p><code>Javalin</code>æ˜¯<code>JVM</code>å¹³å°ä¸‹ä¸€ä¸ªä¸Šæ‰‹æä¸ºå®¹æ˜“çš„<code>Web</code>æ¡†æ¶ã€‚æœ‰è¿™ä¹ˆå‡ ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼š</p><ol><li>ç®€å•ä¾¿æ·ï¼Œä¸è®ºæ˜¯æ¦‚å¿µä¸Šè¿˜æ˜¯çœŸæ­£ä¸Šæ‰‹å¼€å‘ï¼Œç»™äººçš„æ„Ÿè§‰å°±æ˜¯è½»æ¾å†™æ„</li><li>çµæ´»ï¼Œå¯ä»¥å…¼å®¹åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ç¼–ç¨‹æ€è·¯</li><li>å°ï¼Œå³ä½¿æ˜¯æ‰“æˆä¸€ä¸ªå¯ä»¥ç‹¬ç«‹è¿è¡Œçš„<code>fat-jar</code>ï¼Œå¤§å°æ‰<code>4ï½5M</code>ï¼Œå°±ç®—æŠŠå¸¸ç”¨çš„<code>log</code>ã€<code>jdbc</code>ç­‰å¸¸ç”¨åº“æ”¾è¿›å»ï¼Œä¼°è®¡ä¹Ÿåˆ°ä¸äº†<code>10M</code></li></ol><p>å®˜æ–¹æ”¯æŒçš„è¯­è¨€æ˜¯<code>Java</code>å’Œ<code>Kotlin</code>ï¼Œå½“ç„¶è¿˜æœ‰è·Ÿ<code>Java</code>æ— ç¼å…¼å®¹çš„<code>Groovy</code>ï¼Œè¿™ä¸ªç›¸å½“äºä¹°ä¸€èµ ä¸€äº†ã€‚ä¸‹é¢æˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸‹<code>Kotlin</code>ç®€å•demo<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> con.aruistar.studyjavalin</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.javalin.Javalin</span><br><span class="line"></span><br><span class="line"><span class="function">data class <span class="title">User</span><span class="params">(val name: String, val id: Int)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">(args: Array&lt;String&gt;)</span> </span>&#123;</span><br><span class="line">    val app = Javalin.create().start(<span class="number">7000</span>)</span><br><span class="line"></span><br><span class="line">    val map = hashMapOf&lt;String, Int&gt;()</span><br><span class="line">    map.put(<span class="string">"one"</span>, <span class="number">1</span>)</span><br><span class="line">    map.put(<span class="string">"two"</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    app.get(<span class="string">"/"</span>) &#123; ctx -&gt; ctx.result(<span class="string">"Hello World"</span>) &#125;</span><br><span class="line">    app.get(<span class="string">"/json"</span>) &#123; ctx -&gt; ctx.json(User(<span class="string">"Alex"</span>, <span class="number">1</span>)) &#125;</span><br><span class="line">    app.get(<span class="string">"/json/map"</span>) &#123; ctx -&gt; ctx.json(map) &#125;</span><br><span class="line">    app.after &#123; ctx -&gt;</span><br><span class="line">        println(<span class="string">"log"</span>)</span><br><span class="line">        println(ctx.resultString())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰æ²¡æœ‰ä¸€ç§ç®€å•åˆ°æ²¡æœ‹å‹çš„æ„Ÿè§‰ï¼Œæˆ‘æƒ³è¿™æ®µä»£ç æˆ‘ä¸å¤šè§£é‡Šï¼Œå¤§å®¶ä¹Ÿéƒ½çœ‹å¾—æ‡‚ã€‚å…¶ä»–ç‰¹æ€§è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»æ–‡æ¡£ä¸Šæ‘˜å½•å‡ ä¸ªæ¯”è¾ƒå®ç”¨çš„ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">get(<span class="string">"/hello/*/and/*"</span>, ctx -&gt; &#123;</span><br><span class="line">    ctx.result(<span class="string">"Hello: "</span> + ctx.splat(<span class="number">0</span>) + <span class="string">" and "</span> + ctx.splat(<span class="number">1</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">app.routes(() -&gt; &#123;</span><br><span class="line">    path(<span class="string">"users"</span>, () -&gt; &#123;</span><br><span class="line">        get(UserController::getAllUsers);</span><br><span class="line">        post(UserController::createUser);</span><br><span class="line">        path(<span class="string">":id"</span>, () -&gt; &#123;</span><br><span class="line">            get(UserController::getUser);</span><br><span class="line">            patch(UserController::updateUser);</span><br><span class="line">            delete(UserController::deleteUser);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">app.exception(NullPointerException.class, (e, ctx) -&gt; &#123;</span><br><span class="line">    <span class="comment">// handle nullpointers here</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">app.error(<span class="number">404</span>, ctx -&gt; &#123;</span><br><span class="line">    ctx.result(<span class="string">"Generic 404 message"</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ›´å¤šåŠŸèƒ½è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="https://javalin.io/documentation" target="_blank" rel="noopener">javalin</a></p><h3 id="æœ€åè¯´ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹è¿™ä¸ªæ¡†æ¶çš„ä¸€äº›çœ‹æ³•"><a href="#æœ€åè¯´ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹è¿™ä¸ªæ¡†æ¶çš„ä¸€äº›çœ‹æ³•" class="headerlink" title="æœ€åè¯´ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹è¿™ä¸ªæ¡†æ¶çš„ä¸€äº›çœ‹æ³•"></a>æœ€åè¯´ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹è¿™ä¸ªæ¡†æ¶çš„ä¸€äº›çœ‹æ³•</h3><p>å¦‚æœä½ æ˜¯ä¸ª<code>Java</code>ç¨‹åºå‘˜ï¼Œè¿˜ä»æ¥æ²¡æœ‰ç”¨è¿‡<code>Spring</code>ä»¥å¤–çš„<code>WEB</code>æ¡†æ¶ï¼Œé‚£æˆ‘æ¨èä½ è¯•è¯•<code>Javalin</code>ï¼›ä½†å¦‚æœä½ æ˜¯ç«™åœ¨å…¬å¸ç«‹åœºï¼Œè¦ä¸ºä¸‹ä¸€ä¸ªé¡¹ç›®åšæŠ€æœ¯é€‰å‹çš„è¯ï¼Œæˆ‘æ›´å»ºè®®ä½ ç”¨ç»å—è¿‡å¤šå¹´å¸‚åœºè€ƒéªŒçš„<a href="http://vertx.io" target="_blank" rel="noopener">Vert.x</a>ã€‚<br>å¦‚æœä½ çš„é¡¹ç›®ä¸­å·²ç»ç”¨è¿‡<a href="http://sparkjava.com" target="_blank" rel="noopener">SparkJava</a>äº†ï¼Œé‚£æˆ‘è§‰å¾—<code>Javalin</code>åº”è¯¥ä¹Ÿåœ¨ä½ çš„å¤‡é€‰æŠ€æœ¯æ¸…å•é‡Œã€‚<br>å¦‚æœä½ æ˜¯<code>node.js</code>ç¨‹åºå‘˜ï¼Œæƒ³æ¶‰çŒä¸€ä¸‹<code>Java</code>æ–¹é¢çš„å¼€å‘ï¼Œ<code>Javalin</code>å¯èƒ½æ˜¯ä¸ªä¸é”™çš„å°è¯•ï¼Œå› ä¸ºä»ä¸­ä½ èƒ½æ‰¾åˆ°<code>koa</code>çš„å½±å­ï¼Œæˆ‘æƒ³ä½ ä¼šè§‰å¾—æ— æ¯”äº²åˆ‡ã€‚</p><hr><p>æœ¬æ–‡demoå·²ä¸Šä¼ è‡³<a href="https://github.com/aruis/studyjavalin" target="_blank" rel="noopener">https://github.com/aruis/studyjavalin</a></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è®°ä¸€ä¸ªå› ä¸ºJDBCåŠPostgreSQLè¿‡äºä¼˜ç§€è€Œå¯¼è‡´çš„å‘</title>
      <link href="/2018/08/23/defect_jdbc_postgresql/"/>
      <url>/2018/08/23/defect_jdbc_postgresql/</url>
      <content type="html"><![CDATA[<p>å‡è®¾å­˜åœ¨è¿™ä¹ˆä¸€å¼ è¡¨ï¼Œè®°å½•å…¨å›½å„åœ°å¤§å­¦çš„åç§°ï¼Œä»¥åŠæ‰€å¤„çš„è¡Œæ”¿åŒºåˆ’<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> å¤§å­¦ä¿¡æ¯è¡¨</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">varchar</span> <span class="keyword">DEFAULT</span> uuid_generate_v4() PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    v_name <span class="built_in">varchar</span>,</span><br><span class="line">    v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç  <span class="built_in">varchar</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ï¼Œè¡Œæ”¿åŒºåˆ’æ˜¯å›½å®¶æ ‡å‡†çš„ï¼Œä¹Ÿå°±æ˜¯ä½ èº«ä»½è¯å¼€å¤´çš„6ä½ï¼Œèƒ½å¤Ÿç²¾ç¡®åˆ°åŒºã€å¿çš„ã€‚ä¸¤ä½ä¸€ä¸ªçº§åˆ«ï¼Œå‰å…­ä½ï¼Œå¯ä»¥ç¬¼ç»Ÿçš„æ¦‚æ‹¬æˆï¼ŒçœåŠã€å¸‚çº§ã€å¿çº§ï¼Œå½“ç„¶è¿˜æœ‰ç›´è¾–å¸‚ã€ç‰¹åˆ«è¡Œæ”¿åŒºä»€ä¹ˆçš„ï¼Œå…ˆä¸å¿…æ·±ç©¶ï¼Œæš‚ä¸”ç®€åŒ–è¿™ä¸ªé€»è¾‘å°±å¥½äº†ã€‚<br>ç°åœ¨é—®é¢˜æ¥äº†ï¼Œå¦‚æœæƒ³ç»Ÿè®¡å„çœä»½å¤§å­¦çš„æ•°é‡ï¼Œæ˜¯ä¸æ˜¯è¯¥ç”¨è¿™æ¡<code>SQL</code><br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , <span class="number">2</span>), <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> å¤§å­¦ä¿¡æ¯è¡¨</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , <span class="number">2</span>);</span><br></pre></td></tr></table></figure></p><p>å¯¹éœ€æ±‚æ•æ„Ÿçš„å°ä¼™ä¼´è‚¯å®šçœ‹å‡ºæ¥äº†ï¼Œä¸Šé¢çš„<code>2</code>åœ¨è®¾è®¡æ¥å£çš„æ—¶å€™åº”è¯¥è®¾è®¡æˆå‚æ•°ï¼Œä¸‡ä¸€è¦ç»Ÿè®¡å„åŸå¸‚çš„å¤§å­¦æ•°é‡ï¼Œç›´æ¥ä¼ <code>4</code>ä¸å°±å¥½äº†ã€‚<br>æ‰€ä»¥åœ¨<code>Java</code>ä¸­ï¼Œæˆ‘ä»¬å¤§çº¦ä¼šå†™è¿™ä¹ˆä¸€æ®µä»£ç <br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">PreparedStatement pstmt = conn.prepareStatement("""</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , ?), <span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">from</span> å¤§å­¦ä¿¡æ¯è¡¨</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , ?);</span><br><span class="line">""");</span><br><span class="line"></span><br><span class="line">pstmt.setInt(1, 2);</span><br><span class="line">pstmt.setInt(2, 2);</span><br></pre></td></tr></table></figure></p><p>å°±æ˜¯ç”¨ä¸¤å¤„<code>?</code>å ä½ï¼Œç„¶åä¼ å…¥ç›¸åŒçš„å‚æ•°ã€‚<strong>å¯æƒœäº‹ä¸æ„¿è¿ï¼Œè¿™æ®µ<code>SQL</code>ä¸€å®šæ˜¯æŠ¥é”™çš„</strong>ï¼Œä¼šæœ‰æç¤º<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">column "å¤§å­¦ä¿¡æ¯è¡¨.v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç " must appear in the GROUP BY clause or be used in an aggregate function</span><br></pre></td></tr></table></figure></p><p>ç®€å•çš„è¯´ï¼Œæ•°æ®åº“ä¸è®¤ä¸º<code>select</code>ä¸­çš„<code>left(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , ?)</code>è·Ÿ<code>group by</code>ä¸­çš„<code>left(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , ?)</code>æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œæ‰€ä»¥è®¤ä¸ºæˆ‘ä»¬åœ¨æŸ¥è¯¢äº†ä¸€ä¸ªæ²¡æœ‰<code>group by</code>ä¹Ÿæ²¡æœ‰èšåˆå‡½æ•°çš„æ•°æ®ï¼Œå±äº<code>SQL</code>è¯­æ³•é”™è¯¯ã€‚<br>ä¸‹é¢å°è¯•åˆ†æåŸå› ï¼š</p><ol><li>åŸå§‹<code>SQL</code>åœ¨<code>PostgreSQL</code>ä¸­ç‹¬ç«‹æ‰§è¡Œï¼Œå®Œå…¨æ²¡é—®é¢˜ï¼Œæ‰€ä»¥è‚¯å®šä¸æ˜¯<code>PostgreSQL</code>çš„é—®é¢˜</li><li>ç”¨<code>Python</code>ï¼ˆ<code>psycopg2</code>ï¼‰å®ç°äº†åŒæ ·çš„é€»è¾‘ï¼Œç„¶è€Œæ²¡æœ‰æŠ¥é”™ï¼Œæ‰€ä»¥è¿˜å¾—ä»<code>JDBC</code>+<code>PostgreSQL</code>ä¸Šæ‰¾åŸå› </li><li><p>å»æ•°æ®åº“æœåŠ¡å™¨çœ‹æ—¥å¿—ï¼Œå‘ç°é—®é¢˜ï¼Œå½“<code>JDBC</code>è¯·æ±‚çš„æ—¶å€™ï¼Œåå°æ—¥å¿—æ˜¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">STATEMENT:</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , $<span class="number">1</span>), <span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">from</span> å¤§å­¦ä¿¡æ¯è¡¨</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , $<span class="number">2</span>)</span><br><span class="line">DETAIL:  <span class="keyword">parameters</span>: $<span class="number">1</span> = <span class="string">'2'</span>, $<span class="number">2</span> = <span class="string">'2'</span></span><br></pre></td></tr></table></figure><p> è€Œå½“<code>Python</code>è¯·æ±‚æ—¶ï¼Œåå°æ—¥å¿—æ˜¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , <span class="number">2</span>), <span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">from</span> å¤§å­¦ä¿¡æ¯è¡¨</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p> æ˜¯ä¸æ˜¯æœ‰ä¸€ç§è§äº†é¬¼çš„æ„Ÿè§‰ï¼Œ</p></li></ol><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>åœ¨ä½¿ç”¨<code>JDBC</code>æ“ä½œ<code>PostgreSQL</code>æ—¶ï¼Œ<code>JAVA</code>ä¸­çš„<code>prepareStatement</code>ä¼šç²¾å‡†æ¢ç®—æˆ<code>PostgreSQL</code>ä¸­çš„<a href="http://www.postgres.cn/docs/10/sql-prepare.html" target="_blank" rel="noopener">PREPARE</a>ï¼Œè€Œåœ¨<code>PREPARE</code>çš„æ—¶å€™ï¼Œå‚æ•°è¿˜æ²¡ç»™å‡ºï¼Œæ‰€ä»¥<code>PostgreSQL</code>ä¼šè®¤ä¸º<code>select</code>çš„<code>left(v_æ‰€å¤„è¡Œæ”¿åŒºåˆ’ä»£ç , $1)</code>å¹¶æœªå‚ä¸<code>group by</code>ï¼Œå› è€Œ<code>PREPARE</code>æŠ¥é”™ï¼Œå¯¼è‡´æœ€ç»ˆ<code>SQL</code>æ‰§è¡Œå¤±è´¥ã€‚<br>è€Œåœ¨<code>psycopg2</code>+<code>PostgreSQL</code>çš„ç¯å¢ƒä¸­ï¼Œå¹¶æ²¡æœ‰åƒ<code>JDBC</code>é‚£æ ·å……åˆ†åˆ©ç”¨<code>PostgreSQL</code>çš„<code>PREPARE</code>ç‰¹æ€§ï¼Œè€Œæ˜¯åœ¨ç¨‹åºä¾§å°±æ¢ç®—å¥½äº†<code>SQL</code>è¯­å¥ï¼Œæ‰€ä»¥åè€Œä¸ä¼šæŠ¥é”™ã€‚<br><em>æ˜¾ç„¶ï¼Œæ˜¯<code>JDBC</code>çš„è®¾è®¡æ›´ç»†è‡´ï¼Œä½†æ˜¯å´ç»™è‡ªå·±æŒ–äº†ä¸ªå‘</em></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLæ‰“å¼€SQLæ—¥å¿—</title>
      <link href="/2018/08/22/PostgreSQL_show_SQL_logs/"/>
      <url>/2018/08/22/PostgreSQL_show_SQL_logs/</url>
      <content type="html"><![CDATA[<p>æ‰¾åˆ°<code>PostgreSQL</code>å®‰è£…ç›®å½•æ‰€åœ¨çš„åœ°æ–¹ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶<code>postgresql.conf</code><br>ç¡®ä¿<br><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">log_destination</span> = <span class="string">'stderr'</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å¯ä»¥æ‰“å¼€æ—¥å¿—åŠŸèƒ½<br>ç„¶åæ‰¾åˆ°<code>atement</code>è®¾ç½®æˆ<code>all</code><br><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">log_statement</span> = <span class="string">'all'</span></span><br></pre></td></tr></table></figure></p><p>é‡å¯æœåŠ¡ä¹‹åå°±å¯ä»¥è·Ÿè¸ªåˆ°æ‰€æœ‰çš„<code>SQL</code>è¯­å¥äº†ã€‚</p><p>å½“ç„¶å…¶ä»–è¿˜æœ‰å¾ˆå¤šé…ç½®ï¼Œå¯ä»¥è¿›è¡Œæ›´ç»†è‡´çš„å®šåˆ¶ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="http://www.postgres.cn/docs/10/runtime-config-logging.html" target="_blank" rel="noopener">é”™è¯¯æŠ¥å‘Šå’Œæ—¥å¿—</a></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>groovyä¸­çš„æ­£åˆ™ä½¿ç”¨</title>
      <link href="/2018/08/21/groovy_regular/"/>
      <url>/2018/08/21/groovy_regular/</url>
      <content type="html"><![CDATA[<h4 id="åˆ¤æ–­æ˜¯å¦ä¸æ­£åˆ™åŒ¹é…"><a href="#åˆ¤æ–­æ˜¯å¦ä¸æ­£åˆ™åŒ¹é…" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸æ­£åˆ™åŒ¹é…"></a>åˆ¤æ–­æ˜¯å¦ä¸æ­£åˆ™åŒ¹é…</h4><figure class="highlight flix"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">res</span> </span>= <span class="string">"522300000000"</span> ==~ /\d*<span class="number">0</span>&#123;<span class="number">8</span>&#125;$/</span><br><span class="line"><span class="comment">// res is true</span></span><br></pre></td></tr></table></figure><h4 id="ä»å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°åŒ¹é…çš„å†…å®¹"><a href="#ä»å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°åŒ¹é…çš„å†…å®¹" class="headerlink" title="ä»å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°åŒ¹é…çš„å†…å®¹"></a>ä»å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°åŒ¹é…çš„å†…å®¹</h4><figure class="highlight flix"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">res</span> </span>= <span class="string">"hello110,world"</span> =~ /\d+/</span><br><span class="line">println(res[<span class="number">0</span>])</span><br><span class="line"><span class="comment">//res[0] is 110</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é»”è¥¿å—å·å…´ä¹‰å¸‚é©¬å²­æ²³å³¡è°·åŠæ—¥æ¸¸</title>
      <link href="/2018/08/20/xingyi-malinghe/"/>
      <url>/2018/08/20/xingyi-malinghe/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨è´µå·å‡ºå·®ï¼Œä¸€ä¸ªå°åŸå¸‚ï¼Œå…´ä¹‰å¸‚ï¼Œéš¶å±äºé»”è¥¿å—å¸ƒä¾æ—è‹—æ—è‡ªæ²»å·ã€‚å‘¨æœ«å»äº†è¶Ÿå½“åœ°çš„æ™¯ç‚¹â€”â€”é©¬å²­æ²³å³¡è°·ï¼Œæ„Ÿè§‰ä¸é”™ï¼Œå‡ å¤„ç€‘å¸ƒæ„å¢ƒå„ä¸ç›¸åŒã€‚éšæ‰‹æ‹äº†å‡ å¼ ç…§ç‰‡ï¼ŒèŠä½œçºªå¿µã€‚<br><img src="/media/IMG_7384.jpg" alt=""><br><img src="/media/IMG_7284.jpg" alt=""><br><img src="/media/IMG_7350.jpg" alt=""></p>]]></content>
      
      <categories>
          
          <category> æ¸¸è®° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Linuxé˜²ç«å¢™å¸¸ç”¨å‘½ä»¤</title>
      <link href="/2018/08/19/Linux_firewall-cmd/"/>
      <url>/2018/08/19/Linux_firewall-cmd/</url>
      <content type="html"><![CDATA[<ol><li><p>å®‰è£…é˜²ç«å¢™</p> <figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">yum <span class="keyword">install</span> firewalld</span><br></pre></td></tr></table></figure></li><li><p>æ°¸ä¹…æ”¾è¡Œç«¯å£</p> <figure class="highlight brainfuck"><table><tr><td class="code"><pre><span class="line"><span class="comment">firewall</span><span class="literal">-</span><span class="comment">cmd</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">add</span><span class="literal">-</span><span class="comment">port=54321/tcp</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">permanent</span></span><br></pre></td></tr></table></figure><p> <em>ä¸´æ—¶çš„è¯ï¼ŒæŠŠâ€“permanentå»æ‰</em></p></li><li><p>ä½¿é…ç½®ç”Ÿæ•ˆ</p> <figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --reload</span></span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li>ç§»é™¤æ”¾è¡Œç«¯å£ <figure class="highlight brainfuck"><table><tr><td class="code"><pre><span class="line"><span class="comment">firewall</span><span class="literal">-</span><span class="comment">cmd</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">remove</span><span class="literal">-</span><span class="comment">port=54321/tcp</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">permanent</span></span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li>æŸ¥çœ‹æ‰€æœ‰æ”¾è¡Œç«¯å£ <figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --list-ports</span></span><br></pre></td></tr></table></figure></li></ol><p>è¿™é‡Œåªåˆ—å‡ºæœ€ç®€å•çš„ä¸€äº›ç”¨æ³•ï¼Œæ›´å¤šé«˜é˜¶ç”¨æ³•è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://firewalld.org/documentation/man-pages/firewall-cmd.html" target="_blank" rel="noopener">https://firewalld.org/documentation/man-pages/firewall-cmd.html</a>    </p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…å¼€å‘ç¯å¢ƒåœ¨GitHubç«™ç‚¹ä¸Šå¿«é€Ÿç»™å¼€æºé¡¹ç›®è´¡çŒ®ä»£ç </title>
      <link href="/2018/08/18/github-pull-request/"/>
      <url>/2018/08/18/github-pull-request/</url>
      <content type="html"><![CDATA[<p>ç»™å¼€æºé¡¹ç›®è´¡çŒ®ä»£ç åº”è¯¥ç®—æ˜¯è¿›é˜¶ç¨‹åºå‘˜çš„ä¸€æ¡å¿…ç»ä¹‹è·¯ã€‚ä»Šå¤©æˆ‘å°±ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚ä½•åœ¨ä¸cloneä»£ç ï¼Œä¸ä½¿ç”¨æœ¬åœ°å¼€å‘ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œç»™GitHubä¸Šçš„å¼€æºé¡¹ç›®è´¡çŒ®ä»£ç ã€‚<br>è¿˜æ²¡æœ‰GitHubè´¦å·çš„å°ä¼™ä¼´ï¼Œå°±æŠ“ç´§æ³¨å†Œä¸ªå§ï¼Œå…¶ä»–å°±æ²¡æœ‰ä»»ä½•å¿…è¦æ¡ä»¶äº†ã€‚</p><h3 id="ç¬¬ä¸€æ­¥ï¼Œå‘ç°é—®é¢˜"><a href="#ç¬¬ä¸€æ­¥ï¼Œå‘ç°é—®é¢˜" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œå‘ç°é—®é¢˜"></a>ç¬¬ä¸€æ­¥ï¼Œå‘ç°é—®é¢˜</h3><p>è¿™ä¸ªæˆ‘å¯æ•™ä¸äº†ï¼Œåªèƒ½ä»‹ç»ä¸€ä¸‹æˆ‘è‡ªå·±çš„ç»éªŒï¼Œå°±æ˜¯å¤šçœ‹ï¼Œå¤šæƒ³ã€‚æ¯”å¦‚æˆ‘ä»Šå¤©ä¸¾ä¾‹çš„å°±æ˜¯<code>JVM</code>ä¸‹çŸ¥åé¡¹ç›®<code>Vert.x</code>ï¼Œå®˜æ–¹ç»´æŠ¤çš„<a href="https://github.com/vert-x3/vertx-examples" target="_blank" rel="noopener">vertx-examples</a>ï¼Œæˆ‘å‘ç°ä»–åœ¨ä»‹ç»<code>gradle-redeploy</code>çš„æ—¶å€™ï¼Œå…¶ä¸­<code>build.gradle</code>æœ‰ä¸€æ®µå†™å¾—å°±ä¸å¤Ÿä¸¥è°¨ï¼Œä»–æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p><figure class="highlight flix"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Vert.x will call this task on changes</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doOnChange</span></span></span><br><span class="line"><span class="function"><span class="title">if</span> </span>(System.getProperty(<span class="string">"os.name"</span>).toLowerCase().contains(<span class="string">"windows"</span>)) &#123;</span><br><span class="line">  doOnChange = '.\\gradlew classes'</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  doOnChange = './gradlew classes'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹è¿‡æˆ‘ä¹‹å‰åšå®¢çš„å°ä¼™ä¼´åº”è¯¥çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶åˆ†å‰²ç¬¦ï¼Œ<code>Java</code>ä¸­æ˜¯æä¾›é™æ€æ–¹æ³•ç­‰å¤šç§æ–¹å¼æ¥è·å–çš„ï¼Œä¸éœ€è¦é€šè¿‡è‡ªå·±æ‰‹åŠ¨åˆ¤æ–­æ“ä½œç³»ç»Ÿçš„åå­—æ¥è‡ªå·±å®ç°ã€‚æ‰€ä»¥æˆ‘å†³å®šæŠŠè¿™æ®µä»£ç ä¼˜åŒ–ä¸€ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¿™ç¯‡åšå®¢çš„èµ·å› ã€‚</p><h3 id="ç¬¬äºŒæ­¥ï¼ŒForkä»£ç "><a href="#ç¬¬äºŒæ­¥ï¼ŒForkä»£ç " class="headerlink" title="ç¬¬äºŒæ­¥ï¼ŒForkä»£ç "></a>ç¬¬äºŒæ­¥ï¼Œ<code>Fork</code>ä»£ç </h3><p>ç‚¹è¿™é‡Œå³å¯ï¼š<br><img src="/media/%E7%B2%98%E8%B4%B4%E7%9A%84%E5%9B%BE%E7%89%872018_8_18_14_23.png" alt=""><br><code>Fork</code>æˆåŠŸä¹‹åï¼Œä¼šè‡ªåŠ¨è¿›å…¥åˆ°è‡ªå·±å‘½åç©ºé—´ä¸‹çš„é¡¹ç›®<br><img src="/media/15345735455740.jpg" alt=""></p><h3 id="ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºåˆ†æ”¯"><a href="#ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºåˆ†æ”¯" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºåˆ†æ”¯"></a>ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºåˆ†æ”¯</h3><p><code>GitHub</code>ä¸Šçš„<code>Pull Request</code>éƒ½æ˜¯åŸºäºåˆ†æ”¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æƒ³è¦è´¡çŒ®ä»£ç ï¼Œè¦å…ˆåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œåœ¨ä¸Šé¢æ‰¿è½½ä½ çš„ä»£ç å˜æ›´ã€‚å…¶å®åšèµ·æ¥ä¹Ÿç›¸å½“ç®€å•ï¼Œå¦‚å›¾ï¼š<img src="/media/%E7%B2%98%E8%B4%B4%E7%9A%84%E5%9B%BE%E7%89%872018_8_18_14_28.png" alt=""></p><h3 id="ç¬¬å››æ­¥ï¼Œä¿®æ”¹ä»£ç "><a href="#ç¬¬å››æ­¥ï¼Œä¿®æ”¹ä»£ç " class="headerlink" title="ç¬¬å››æ­¥ï¼Œä¿®æ”¹ä»£ç "></a>ç¬¬å››æ­¥ï¼Œä¿®æ”¹ä»£ç </h3><p>ä¹‹åå°±ä¼šè¿›å…¥åˆ°è‡ªå·±æ–°å»ºçš„åˆ†æ”¯ï¼Œæ‰¾åˆ°è¦ä¿®æ”¹çš„ä»£ç åï¼Œç‚¹ç¼–è¾‘æŒ‰é’®ï¼Œå¦‚å›¾<img src="/media/%E7%B2%98%E8%B4%B4%E7%9A%84%E5%9B%BE%E7%89%872018_8_18_14_32.png" alt=""></p><p>æŠŠæˆ‘ä¹‹å‰è¯´çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight flix"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doOnChange</span> </span>= <span class="string">".$&#123;File.separator&#125;gradlew classes"</span></span><br></pre></td></tr></table></figure><p>ä¸€è¡Œæå®šï¼Œæ˜¯ä¸æ˜¯ç®€å•å¤šäº†ã€‚<br>ç¼–è¾‘å®Œä»£ç åï¼Œåœ¨å±å¹•æœ€ä¸‹æ–¹ï¼Œæäº¤ä»£ç ï¼Œæ³¨æ„è¦å†™ä¸€ä¸ªç†ç”±å……åˆ†çš„æäº¤æ³¨é‡Šï¼Œè¯æ˜ä½ æ”¹å˜ä»£ç çš„å¿…è¦æ€§<br><img src="/media/15345741245811.jpg" alt=""></p><h3 id="ç¬¬äº”æ­¥ï¼Œå‘èµ·Pull-Request"><a href="#ç¬¬äº”æ­¥ï¼Œå‘èµ·Pull-Request" class="headerlink" title="ç¬¬äº”æ­¥ï¼Œå‘èµ·Pull Request"></a>ç¬¬äº”æ­¥ï¼Œå‘èµ·<code>Pull Request</code></h3><p>æŠŠä¿®æ”¹<code>commit</code>ä¹‹åï¼Œå›åˆ°è‡ªå·±çš„é¡¹ç›®é¦–é¡µï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€å¥æç¤ºï¼Œé—®ä½ è¦ä¸è¦æŠŠåˆšä¿®æ”¹çš„é‚£ä¸ªåˆ†æ”¯å»è·ŸåŸå§‹é¡¹ç›®æ¯”è¾ƒï¼Œå¹¶ä¸”å‘èµ·<code>pull request</code>ï¼Œå¦‚å›¾<img src="/media/%E7%B2%98%E8%B4%B4%E7%9A%84%E5%9B%BE%E7%89%872018_8_18_14_39.png" alt=""></p><p>ç‚¹å‡»è¿™ä¸ªæŒ‰é’®åï¼Œè¿›å…¥æœ€åçš„<code>Open a pull request</code>ç•Œé¢ï¼Œå†æ¬¡è¦æŠŠæäº¤è¯´æ˜å†™åˆ°ä½ï¼Œå°±å¯ä»¥ç‚¹<code>Create pull request</code>æŒ‰é’®æ­£å¼å‘èµ·è´¡çŒ®ä»£ç è¯·æ±‚äº†ã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><ol><li>åŸºæœ¬å¼€æºé¡¹ç›®éƒ½æœ‰è‡ªåŠ¨åŒ–çš„ä»£ç å®¡æŸ¥ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ã€æ ¼å¼è§„èŒƒæ£€æŸ¥ä¹‹ç±»çš„ï¼Œå‘èµ·<code>PR</code>ä¹‹åä¹Ÿè¦ç•™æ„è§‚çœ‹ï¼Œä¸‡ä¸€å‘ç°è‡ªå·±ä»£ç æœ‰é—®é¢˜ï¼Œè¿˜å¯ä»¥ç»§ç»­æ›´æ”¹</li><li>ä¹‹åè¿˜å›åˆ°è‡ªå·±åˆ†æ”¯ï¼Œäº§ç”Ÿçš„æ›´æ”¹ï¼Œå°±ä¸ç”¨é‡æ–°å‘èµ·<code>PR</code>äº†ï¼Œåªè¦<code>commit</code>ä¹‹åï¼Œä¹‹å‰çš„<code>PR</code>å¯ä»¥ç›´æ¥çœ‹åˆ°</li><li>ä¸€æ—¦<code>PR</code>æˆåŠŸï¼Œå°±å¯ä»¥åœ¨åŸå§‹é¡¹ç›®çš„<code>contributors</code>ä¸­æ‰¾åˆ°è‡ªå·±çš„è´¦æˆ·äº†ã€‚å¸Œæœ›ä½ åˆ°æ—¶å€™å¯ä»¥æ¦œä¸Šæœ‰åï¼›ï¼‰</li></ol>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­å®ç°æ›´æ–°é»˜è®¤å€¼ï¼ˆäºŒï¼‰</title>
      <link href="/2018/08/17/PostgreSQL_auto_modify_defaults_2/"/>
      <url>/2018/08/17/PostgreSQL_auto_modify_defaults_2/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©æˆ‘ä»¬ç”¨<code>è¡¨ç»§æ‰¿</code>+<code>è§¦å‘å™¨</code>çš„æ–¹æ¡ˆï¼Œæ¥å®ç°è¡¨ä¸­çš„æ›´æ–°é»˜è®¤å€¼ã€‚è¿™ä¹Ÿè®¸æ˜¯<code>PostgreSQL</code>é‡Œæœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="ä¸€-åˆ›å»ºä¸€å¼ è¡¨ï¼Œä½œä¸ºçˆ¶è¡¨"><a href="#ä¸€-åˆ›å»ºä¸€å¼ è¡¨ï¼Œä½œä¸ºçˆ¶è¡¨" class="headerlink" title="ä¸€. åˆ›å»ºä¸€å¼ è¡¨ï¼Œä½œä¸ºçˆ¶è¡¨"></a>ä¸€. åˆ›å»ºä¸€å¼ è¡¨ï¼Œä½œä¸ºçˆ¶è¡¨</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> basic_update</span><br><span class="line">(</span><br><span class="line">  t_update <span class="keyword">timestamp</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="äºŒ-åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œæœ€åè´Ÿè´£ä¿®æ”¹t-updateä½¿ç”¨"><a href="#äºŒ-åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œæœ€åè´Ÿè´£ä¿®æ”¹t-updateä½¿ç”¨" class="headerlink" title="äºŒ. åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œæœ€åè´Ÿè´£ä¿®æ”¹t_updateä½¿ç”¨"></a>äºŒ. åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨ä½œæœ€åè´Ÿè´£ä¿®æ”¹<code>t_update</code>ä½¿ç”¨</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">FUNCTION</span> update_modified_column()</span><br><span class="line">  <span class="keyword">RETURNS</span> <span class="keyword">TRIGGER</span> <span class="keyword">AS</span> $$</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  NEW.t_update = <span class="keyword">now</span>();</span><br><span class="line">  RETURN NEW;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$</span><br><span class="line">language 'plpgsql';</span><br></pre></td></tr></table></figure><h4 id="ä¸‰-åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç»™ç»§æ‰¿äº†basic-updateçš„è¡¨æ–°å¢ä¸€ä¸ªè§¦å‘å™¨ï¼Œæ€¼ä¸Šç¬¬äºŒæ­¥çš„å‡½æ•°"><a href="#ä¸‰-åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç»™ç»§æ‰¿äº†basic-updateçš„è¡¨æ–°å¢ä¸€ä¸ªè§¦å‘å™¨ï¼Œæ€¼ä¸Šç¬¬äºŒæ­¥çš„å‡½æ•°" class="headerlink" title="ä¸‰. åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç»™ç»§æ‰¿äº†basic_updateçš„è¡¨æ–°å¢ä¸€ä¸ªè§¦å‘å™¨ï¼Œæ€¼ä¸Šç¬¬äºŒæ­¥çš„å‡½æ•°"></a>ä¸‰. åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç»™ç»§æ‰¿äº†<code>basic_update</code>çš„è¡¨æ–°å¢ä¸€ä¸ªè§¦å‘å™¨ï¼Œæ€¼ä¸Šç¬¬äºŒæ­¥çš„å‡½æ•°</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> table_create()</span><br><span class="line">  <span class="keyword">returns</span> event_trigger</span><br><span class="line"><span class="keyword">language</span> plpgsql</span><br><span class="line"><span class="keyword">as</span> $$</span><br><span class="line"><span class="keyword">DECLARE</span> <span class="keyword">oid</span>           <span class="built_in">INT</span>;</span><br><span class="line">        table_name    VARCHAR;</span><br><span class="line">        parent_tables VARCHAR [];</span><br><span class="line">        is_update     BOOL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> object_identity</span><br><span class="line">      <span class="keyword">INTO</span> table_name <span class="keyword">FROM</span> pg_event_trigger_ddl_commands();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> objid</span><br><span class="line">      <span class="keyword">INTO</span> <span class="keyword">oid</span> <span class="keyword">FROM</span> pg_event_trigger_ddl_commands();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> get_parent_tables_by_oid(<span class="keyword">oid</span>)</span><br><span class="line">      <span class="keyword">INTO</span> parent_tables;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> parent_tables :: <span class="built_in">TEXT</span> [] @&gt; <span class="string">'&#123;basic_update&#125;'</span> :: <span class="built_in">TEXT</span> []</span><br><span class="line">      <span class="keyword">INTO</span> is_update;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  IF is_update</span><br><span class="line"></span><br><span class="line">  THEN</span><br><span class="line">    <span class="keyword">EXECUTE</span> <span class="string">'CREATE TRIGGER tgr_auto_t_update'</span></span><br><span class="line">            || <span class="string">' BEFORE UPDATE ON  '</span></span><br><span class="line">            || table_name</span><br><span class="line">            || <span class="string">' FOR EACH ROW EXECUTE PROCEDURE update_modified_column()'</span>;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><h4 id="å››-åˆ›å»ºä¸€ä¸ªå»ºè¡¨æ—¶çš„è§¦å‘å™¨ï¼Œæ¥ç®¡åˆ›å»ºè¡¨çš„æ—¶æœºï¼Œæ€¼ä¸Šç¬¬ä¸‰æ­¥çš„å‡½æ•°"><a href="#å››-åˆ›å»ºä¸€ä¸ªå»ºè¡¨æ—¶çš„è§¦å‘å™¨ï¼Œæ¥ç®¡åˆ›å»ºè¡¨çš„æ—¶æœºï¼Œæ€¼ä¸Šç¬¬ä¸‰æ­¥çš„å‡½æ•°" class="headerlink" title="å››. åˆ›å»ºä¸€ä¸ªå»ºè¡¨æ—¶çš„è§¦å‘å™¨ï¼Œæ¥ç®¡åˆ›å»ºè¡¨çš„æ—¶æœºï¼Œæ€¼ä¸Šç¬¬ä¸‰æ­¥çš„å‡½æ•°"></a>å››. åˆ›å»ºä¸€ä¸ªå»ºè¡¨æ—¶çš„è§¦å‘å™¨ï¼Œæ¥ç®¡åˆ›å»ºè¡¨çš„æ—¶æœºï¼Œæ€¼ä¸Šç¬¬ä¸‰æ­¥çš„å‡½æ•°</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EVENT</span> <span class="keyword">TRIGGER</span> etgr_table_create</span><br><span class="line"><span class="keyword">ON</span> ddl_command_end</span><br><span class="line"><span class="keyword">WHEN</span> TAG <span class="keyword">IN</span> (<span class="string">'CREATE TABLE'</span>)</span><br><span class="line"><span class="keyword">EXECUTE</span> <span class="keyword">PROCEDURE</span> table_create();</span><br></pre></td></tr></table></figure><h4 id="äº”-æ‰€æœ‰æ“ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨æµ‹è¯•äº†"><a href="#äº”-æ‰€æœ‰æ“ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨æµ‹è¯•äº†" class="headerlink" title="äº”. æ‰€æœ‰æ“ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨æµ‹è¯•äº†"></a>äº”. æ‰€æœ‰æ“ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨æµ‹è¯•äº†</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">test</span></span><br><span class="line">(</span><br><span class="line">  <span class="keyword">id</span>        <span class="built_in">varchar</span> <span class="keyword">default</span> uuid_generate_v4() <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">constraint</span> test_pkey</span><br><span class="line">    primary <span class="keyword">key</span>,</span><br><span class="line">  <span class="built_in">text</span>      <span class="built_in">varchar</span>,</span><br><span class="line">  t_create  <span class="keyword">timestamp</span> <span class="keyword">default</span> <span class="keyword">now</span>()</span><br><span class="line">)</span><br><span class="line">  inherits (basic_update);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">test</span> (<span class="built_in">text</span>)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">'a'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">test</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">text</span> = <span class="string">'b'</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­å®ç°æ›´æ–°é»˜è®¤å€¼ï¼ˆä¸€ï¼‰</title>
      <link href="/2018/08/16/PostgreSQL_auto_modify_defaults_1/"/>
      <url>/2018/08/16/PostgreSQL_auto_modify_defaults_1/</url>
      <content type="html"><![CDATA[<p>ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œç»å¸¸ä¼šåœ¨è®¾è®¡è¡¨çš„æ—¶å€™ï¼Œè€ƒè™‘è¿™ä¸¤ä¸ªå­—æ®µï¼šæ–°å¢æ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€‚å‰è€…ç”¨æ•°æ®åº“çš„åŸºç¡€åŠŸèƒ½å³å¯å®ç°ï¼Œåè€…å°±è¦é‡‡å–ä¸€äº›æ‰‹æ®µäº†ã€‚<br>åœ¨<code>PostgreSQL</code>ä¸­çš„æœ€ä½³å®è·µæ˜¯é‡‡ç”¨è§¦å‘å™¨ï¼Œæ•æ‰<code>UPDATE</code>å®è·µï¼Œè™½ç„¶å¬èµ·æ¥å¾ˆå¯æ€•ï¼Œä½†å…¶å®å¹¶ä¸éš¾ã€‚</p><ol><li><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨å°±æ˜¯ç»™ä¸€è¡Œæ•°æ®ï¼Œè¿½åŠ æŸä¸ªå€¼ï¼ˆè¿™é‡Œæˆ‘ç”¨çš„å­—æ®µåæ˜¯<code>t_update</code>ï¼‰</p> <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">FUNCTION</span> update_modified_column()</span><br><span class="line">  <span class="keyword">RETURNS</span> <span class="keyword">TRIGGER</span> <span class="keyword">AS</span> $$</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  NEW.t_update = <span class="keyword">now</span>();</span><br><span class="line">  RETURN NEW;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">$$</span><br><span class="line">language 'plpgsql';</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>ç„¶åå°±æ˜¯æŠŠè¿™ä¸ªå‡½æ•°æ€¼åˆ°è§¦å‘å™¨ä¸Š</p> <figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TRIGGER tgr_auto_t_update</span><br><span class="line">  BEFORE UPDATE</span><br><span class="line">  <span class="keyword">ON</span> a_table</span><br><span class="line">  <span class="keyword">FOR</span> <span class="keyword">EACH</span> ROW EXECUTE <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">update_modified_column</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></li></ol><p>è¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ã€‚ä½†æ˜¯å¦‚æœæœ‰å¾ˆå¤šè¡¨çš„è¯ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰é‡å¤åŠ³åŠ¨ï¼Œä¸å¤Ÿä¼˜é›…ã€‚æ˜å¤©æˆ‘å°†ç»“åˆæ˜¨å¤©æåˆ°çš„è¡¨ç»§æ‰¿ï¼Œæœ€å¤§åŒ–çš„å‡å°‘å·¥ä½œé‡ï¼Œç”¨æ›´ä¼˜é›…çš„æ–¹æ³•å®ç°æ›´æ–°é»˜è®¤å€¼çš„åŠŸèƒ½ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­ç”¨é€’å½’CTEè·å–ä¸€å¼ è¡¨çš„æ‰€æœ‰ç¥–å…ˆè¡¨</title>
      <link href="/2018/08/15/PostgreSQL_with_recursive/"/>
      <url>/2018/08/15/PostgreSQL_with_recursive/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©ä»‹ç»ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ol><li>PostgreSQLçš„è¡¨ç»§æ‰¿</li><li>PostgreSQLä¸­çš„å¯é€’å½’CTE</li></ol><h3 id="è¡¨ç»§æ‰¿"><a href="#è¡¨ç»§æ‰¿" class="headerlink" title="è¡¨ç»§æ‰¿"></a>è¡¨ç»§æ‰¿</h3><p>è¡¨ç»§æ‰¿æ˜¯PostgreSQLç‹¬æœ‰çš„åŠŸèƒ½ï¼Œå°±æ˜¯åœ¨<code>create table</code>çš„æ—¶å€™å¯ä»¥é€šè¿‡<code>inherits</code>å…³é”®å­—æŒ‡å®šè‹¥å¹²ä¸ªçˆ¶è¡¨ï¼Œå¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">test</span></span><br><span class="line">(</span><br><span class="line">  <span class="keyword">id</span>       <span class="built_in">varchar</span> <span class="keyword">default</span> uuid_generate_v4() <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">constraint</span> test_pkey</span><br><span class="line">    primary <span class="keyword">key</span>,</span><br><span class="line">  <span class="built_in">text</span>     <span class="built_in">varchar</span>,</span><br><span class="line">  t_create <span class="keyword">timestamp</span> <span class="keyword">default</span> <span class="keyword">now</span>()</span><br><span class="line">)</span><br><span class="line">  inherits (basic_update);</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿çˆ¶è¡¨ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š</p><ul><li>çˆ¶è¡¨çš„å­—æ®µä¼šè‡ªåŠ¨åŠ å…¥å­è¡¨ä¸­æ¥</li><li>çˆ¶è¡¨ä¸Šçš„æ‰€æœ‰æ£€æŸ¥çº¦æŸå’Œéç©ºçº¦æŸéƒ½å°†è‡ªåŠ¨è¢«å®ƒçš„åä»£æ‰€ç»§æ‰¿ï¼Œ é™¤éä½¿ç”¨ NO INHERITå­å¥æ˜ç¡®æŒ‡å®šã€‚å…¶ä»–ç±»å‹çš„çº¦æŸï¼ˆå”¯ä¸€ã€ä¸»é”®å’Œå¤–é”®çº¦æŸï¼‰åˆ™ä¸ä¼šè¢«ç»§æ‰¿</li><li>æ’å…¥å­è¡¨çš„æ•°æ®ï¼Œåœ¨çˆ¶è¡¨ä¸­é»˜è®¤æ˜¯å¯ä»¥æŸ¥è¯¢åˆ°çš„ï¼Œé™¤éåœ¨å¯¹çˆ¶è¡¨æŸ¥è¯¢æ—¶ï¼Œè¡¨åå‰åŠ å…¥<code>only</code>ä¿®é¥°ç¬¦</li></ul><h3 id="é€’å½’CTE"><a href="#é€’å½’CTE" class="headerlink" title="é€’å½’CTE"></a>é€’å½’CTE</h3><p>å¯é€‰çš„RECURSIVEä¿®é¥°ç¬¦å°†WITHä»å•çº¯çš„å¥æ³•ä¾¿åˆ©å˜æˆäº†ä¸€ç§åœ¨æ ‡å‡†SQLä¸­ä¸èƒ½å®Œæˆçš„ç‰¹æ€§ã€‚é€šè¿‡ä½¿ç”¨RECURSIVEï¼Œä¸€ä¸ªWITHæŸ¥è¯¢å¯ä»¥å¼•ç”¨å®ƒè‡ªå·±çš„è¾“å‡ºã€‚ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­æ˜¯è®¡ç®—ä»1åˆ°100çš„æ•´æ•°åˆçš„æŸ¥è¯¢ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">WITH RECURSIVE t(n) AS (</span><br><span class="line">    VALUES (1)</span><br><span class="line">  UNION ALL</span><br><span class="line">    <span class="keyword">SELECT</span> n+<span class="number">1</span> <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> n &lt; <span class="number">100</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sum</span>(n) <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure><h3 id="å›åˆ°ä»Šå¤©çš„ä¸»é¢˜ï¼ŒPostgreSQLä¸­ç”¨é€’å½’CTEè·å–ä¸€å¼ è¡¨çš„æ‰€æœ‰ç¥–å…ˆè¡¨"><a href="#å›åˆ°ä»Šå¤©çš„ä¸»é¢˜ï¼ŒPostgreSQLä¸­ç”¨é€’å½’CTEè·å–ä¸€å¼ è¡¨çš„æ‰€æœ‰ç¥–å…ˆè¡¨" class="headerlink" title="å›åˆ°ä»Šå¤©çš„ä¸»é¢˜ï¼ŒPostgreSQLä¸­ç”¨é€’å½’CTEè·å–ä¸€å¼ è¡¨çš„æ‰€æœ‰ç¥–å…ˆè¡¨"></a>å›åˆ°ä»Šå¤©çš„ä¸»é¢˜ï¼ŒPostgreSQLä¸­ç”¨é€’å½’CTEè·å–ä¸€å¼ è¡¨çš„æ‰€æœ‰ç¥–å…ˆè¡¨</h3><p>è¿™é‡Œæˆ‘ç›´æ¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å°è£…è¿™ä¸ªåŠŸèƒ½ï¼Œå…·ä½“é€»è¾‘å°±åœ¨å‡½æ•°ä¸­ï¼Œç›¸ä¿¡æœ‰å‰é¢ä¸¤ä¸ªçŸ¥è¯†ç‚¹çš„é“ºå«ï¼Œå°ä¼™ä¼´ä»¬åº”è¯¥ä¹Ÿèƒ½çœ‹æ‡‚äº†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> get_parent_tables_by_oid(me <span class="built_in">integer</span>)</span><br><span class="line">  <span class="keyword">returns</span> <span class="built_in">character</span> <span class="built_in">varying</span> []</span><br><span class="line"><span class="keyword">language</span> plpgsql</span><br><span class="line"><span class="keyword">as</span> $$</span><br><span class="line"><span class="keyword">DECLARE</span> parent_tables <span class="built_in">VARCHAR</span> [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">WITH</span> <span class="keyword">RECURSIVE</span> x <span class="keyword">AS</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> pg_inherits <span class="keyword">WHERE</span> inhrelid = me</span><br><span class="line"></span><br><span class="line">      <span class="keyword">UNION</span> ALL</span><br><span class="line"></span><br><span class="line">      <span class="keyword">SELECT</span> pg_inherits.* <span class="keyword">FROM</span> x</span><br><span class="line">                                  <span class="keyword">JOIN</span> pg_inherits <span class="keyword">ON</span> x.inhparent = pg_inherits.inhrelid)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">SELECT</span> array_agg(pg_stat_user_tables.relname)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">INTO</span> parent_tables</span><br><span class="line"></span><br><span class="line">  <span class="keyword">FROM</span> x</span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> pg_stat_user_tables <span class="keyword">ON</span> x.inhparent = pg_stat_user_tables.relid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  RETURN parent_tables;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$$;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>inhrelid</code>æ˜¯<code>PostgreSQL</code>ä¸­çš„ä¸€ç§å…ƒæ•°æ®ï¼Œå¯ä»¥ç†è§£æˆè¡¨çš„<code>id</code>ï¼Œåœ¨çŸ¥é“è¡¨åçš„æƒ…å†µä¸‹æ€ä¹ˆçŸ¥é“å®ƒçš„<code>id</code>å‘¢ï¼Œå¯ä»¥å»å…ƒæ•°æ®é‡Œé¢æŸ¥ï¼Œå¦‚ä¸‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> relid <span class="keyword">FROM</span> pg_stat_user_tables <span class="keyword">WHERE</span> relname = <span class="string">'a_table'</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Vert.xé¡¹ç›®ç›‘æµ‹ä»£ç å˜åŒ–è‡ªåŠ¨å†·é‡å¯</title>
      <link href="/2018/08/14/Vert-x_redeploy/"/>
      <url>/2018/08/14/Vert-x_redeploy/</url>
      <content type="html"><![CDATA[<p>ä¼ ç»Ÿçš„Java Webå¼€å‘ä¸€èˆ¬éƒ½ä¼šæä¾›çƒ­é‡è½½çš„æ–¹å¼ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜åœ¨ä»£ç å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯åº”ç”¨ï¼Œå°±å¯ä»¥åˆ·æ–°åˆ°æ•ˆæœã€‚ç”¨æƒ¯äº†çš„äººï¼Œåœ¨ç”¨<code>Vert.x</code>å¼€å‘çš„æ—¶å€™å¤šå°‘ä¼šæœ‰ç‚¹ä¸ä¹ æƒ¯ï¼Œä¸è¿‡<code>Vert.x</code>ç¨‹åºå¯åŠ¨é€Ÿåº¦è¿˜æ˜¯å¾ˆå¯è§‚çš„ï¼Œæ‰€ä»¥ä¹Ÿå‹‰å¼ºèƒ½å¿ã€‚<br>åæ¥é€šè¯»æ–‡æ¡£çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸ªå…³äº<code>redeploy</code>çš„ä»‹ç»ï¼Œä¼¼ä¹èƒ½ç”¨ï¼Œåˆä¼¼ä¹ä¸å¥½ç”¨çš„ï¼Œç›´åˆ°çœ‹åˆ°å®˜æ–¹çš„<a href="https://github.com/vert-x3/vertx-examples/tree/master/gradle-redeploy" target="_blank" rel="noopener">Vert.x 3.2 Gradle redeploy project</a>æ€»ç®—è±ç„¶å¼€æœ—äº†ã€‚<br>æ ¸å¿ƒä»£ç æ— éä¸‹é¢å‡ è¡Œ<br><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">// Vert.<span class="keyword">x</span> watches <span class="keyword">for</span> <span class="keyword">file</span> <span class="keyword">changes</span> in <span class="keyword">all</span> subdirectories</span><br><span class="line">// of src/ but <span class="keyword">only</span> <span class="keyword">for</span> <span class="keyword">files</span> with .java extension</span><br><span class="line">def watchForChange = <span class="string">'src/**/*.java'</span></span><br><span class="line"></span><br><span class="line">// Vert.<span class="keyword">x</span> will <span class="keyword">call</span> this task <span class="keyword">on</span> <span class="keyword">changes</span></span><br><span class="line">def doOnChange</span><br><span class="line"><span class="keyword">if</span> (System.getProperty(<span class="string">"os.name"</span>).toLowerCase().contains(<span class="string">"windows"</span>)) &#123;</span><br><span class="line">  doOnChange = <span class="string">'.\\gradlew classes'</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  doOnChange = <span class="string">'./gradlew classes'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run &#123;</span><br><span class="line">  <span class="keyword">args</span> = [<span class="string">'run'</span>, mainVerticleName, <span class="string">"--redeploy=$watchForChange"</span>, <span class="string">"--launcher-class=$mainClassName"</span>, <span class="string">"--on-redeploy=$doOnChange"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä¹Ÿå°è¯•äº†ä¸€ä¸‹ï¼Œçš„ç¡®å¯ç”¨ï¼Œä½†æ˜¯è¿™ä¸ªå®˜æ–¹ç¤ºä¾‹è¿˜æ˜¯æœ‰ä¸ªåœ°æ–¹å†™çš„ä¸å¥½ï¼Œå°±æ˜¯å…³äºæ–‡ä»¶åˆ†å‰²ç¬¦çš„åˆ¤æ–­ï¼Œæ°å¥½è¿™ä¸ªåœ¨æˆ‘ä¹‹å‰çš„å¸–å­é‡Œé¢æåˆ°è¿‡ï¼Œè§<a href="https://www.kankanzhijian.com/2018/07/26separator_in_java/">ç¼–å†™è·¨æ“ä½œç³»ç»ŸJavaä»£ç æ—¶åŠ¨æ€è·å–æ–‡ä»¶åˆ†éš”ç¬¦</a><br>æ‰€ä»¥ä¸Šé¢çš„<code>gradle</code>ä»£ç å…³äº<code>doOnChange</code>å£°æ˜å°±å¯ä»¥ç®€åŒ–æˆä¸‹é¢çš„æ ·å­äº†<br><figure class="highlight flix"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">doOnChange</span> </span>= <span class="string">".$&#123;File.separator&#125;gradlew classes"</span></span><br></pre></td></tr></table></figure></p><p>æµ‹è¯•æˆåŠŸ</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å®¶é•¿çš„è´£ä»»åŠä¹‰åŠ¡</title>
      <link href="/2018/08/13/Parental_responsibilities_and_obligations/"/>
      <url>/2018/08/13/Parental_responsibilities_and_obligations/</url>
      <content type="html"><![CDATA[<h2 id="èº«ä¸ºå®¶é•¿ï¼Œåˆ°åº•èƒ½ä¸ºå­©å­åšäº›ä»€ä¹ˆï¼Œä»€ä¹ˆåˆæ˜¯æœ€é‡è¦çš„å‘¢"><a href="#èº«ä¸ºå®¶é•¿ï¼Œåˆ°åº•èƒ½ä¸ºå­©å­åšäº›ä»€ä¹ˆï¼Œä»€ä¹ˆåˆæ˜¯æœ€é‡è¦çš„å‘¢" class="headerlink" title="èº«ä¸ºå®¶é•¿ï¼Œåˆ°åº•èƒ½ä¸ºå­©å­åšäº›ä»€ä¹ˆï¼Œä»€ä¹ˆåˆæ˜¯æœ€é‡è¦çš„å‘¢"></a>èº«ä¸ºå®¶é•¿ï¼Œåˆ°åº•èƒ½ä¸ºå­©å­åšäº›ä»€ä¹ˆï¼Œä»€ä¹ˆåˆæ˜¯æœ€é‡è¦çš„å‘¢</h2><h3 id="æˆ‘è®¤ä¸ºæŒ‰é‡è¦ç¨‹åº¦ï¼Œä¾æ¬¡æœ‰è¿™å‡ ç‚¹"><a href="#æˆ‘è®¤ä¸ºæŒ‰é‡è¦ç¨‹åº¦ï¼Œä¾æ¬¡æœ‰è¿™å‡ ç‚¹" class="headerlink" title="æˆ‘è®¤ä¸ºæŒ‰é‡è¦ç¨‹åº¦ï¼Œä¾æ¬¡æœ‰è¿™å‡ ç‚¹"></a>æˆ‘è®¤ä¸ºæŒ‰é‡è¦ç¨‹åº¦ï¼Œä¾æ¬¡æœ‰è¿™å‡ ç‚¹</h3><ol><li>å’Œç¦æ¸©é¦¨çš„å®¶åº­æ°›å›´</li><li>ä¸è®ºå·¥ä½œã€å­¦ä¹ å¦‚ä½•è¾›è‹¦ï¼Œå§‹ç»ˆä¸å¿˜èº«ä½“å¥åº·æ˜¯ç¬¬ä¸€è¦åŠ¡</li><li>æ´»åˆ°è€å­¦åˆ°è€çš„äººç”Ÿæ€åº¦</li><li>èƒ½å¤Ÿæ”¯æŒå­©å­ä»äº‹å­¦ä¹ æ´»åŠ¨çš„ç»æµåŸºç¡€</li></ol>]]></content>
      
      <categories>
          
          <category> æ–‡è‰ºä¸­å¹´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™è‚²å­å¥³ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ†äº«ä¸€ä¸ªVert.xçš„è‡ªå®šä¹‰Launcher</title>
      <link href="/2018/08/12/my_luancher_in_vertx/"/>
      <url>/2018/08/12/my_luancher_in_vertx/</url>
      <content type="html"><![CDATA[<p>åœ¨<code>Vert.x</code>çš„å®˜æ–¹exampleä¸­ï¼Œ<code>mainClassName</code>ä¸€èˆ¬æ˜¯æŒ‡å®šçš„<code>io.vertx.core.Launcher</code>ï¼Œä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä¹Ÿä¸åŠ æ€ç´¢çš„ç”¨è¿™ä¸ª<code>Launcher</code>å°±ä¼šæŸå¤±å¥½å¤šå®šåˆ¶æ€§ï¼Œæ¯”å¦‚ï¼š</p><ul><li>blockedThreadCheckIntervalï¼ˆæ£€æŸ¥çº¿ç¨‹blockå®šæ—¶æ—¶é—´é—´éš”ï¼‰</li><li>warningExceptionTimeï¼ˆblockå¤šä¹…åå¼€å§‹æ‰“å°å †æ ˆä¿¡æ¯ï¼‰</li><li>maxEventLoopExecuteTimeï¼ˆå…è®¸<code>EventLoop</code>çš„æœ€é•¿æ‰§è¡Œæ—¶é—´ï¼‰</li></ul><p>è¿™äº›è®¾ç½®éƒ½æ˜¯è¦åœ¨<code>Vertx</code>å®ä¾‹åŒ–ä¹‹å‰å‡†å¤‡å¥½çš„ï¼Œåªè¦ä¸æ˜¯Embeddedåº”ç”¨ï¼ˆä¹Ÿå°±æ˜¯è‡ªå·±è°ƒç”¨<code>Vertx.vertx()</code>ï¼‰ï¼Œé‚£å°±åªå‰©æ¥ç®¡<code>Launcher</code>è¿™æ¡è·¯äº†ï¼Œä¸‹é¢åˆ†äº«ä¸€ä¸ª<code>groovy</code>ç‰ˆçš„è‡ªå®šä¹‰<code>Launcher</code></p><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> io.vertx.core.Launcher</span><br><span class="line"><span class="keyword">import</span> io.vertx.core.VertxOptions</span><br><span class="line"><span class="keyword">import</span> org.slf4j.bridge.SLF4JBridgeHandler</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">AruisLauncher</span> extends <span class="type">Launcher</span> &#123;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    static &#123;</span></span><br><span class="line"><span class="class">        <span class="type">SLF4JBridgeHandler</span>.removeHandlersForRootLogger();</span></span><br><span class="line"><span class="class">        <span class="type">SLF4JBridgeHandler</span>.install();</span></span><br><span class="line"><span class="class">    &#125;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    static void main(<span class="type">String</span>[] <span class="title">args</span>) &#123;</span></span><br><span class="line"><span class="class">        new <span class="type">AruisLauncher</span>().dispatch(<span class="title">args</span>)</span></span><br><span class="line"><span class="class">    &#125;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    @<span class="type">Override</span></span></span><br><span class="line"><span class="class">    void beforeStartingVertx(<span class="type">VertxOptions</span> <span class="title">options</span>) &#123;</span></span><br><span class="line"><span class="class">        options.setWarningExceptionTime(10L * 1000 * 1000000)</span></span><br><span class="line"><span class="class">        options.setBlockedThreadCheckInterval(2000)</span></span><br><span class="line"><span class="class">        options.setMaxEventLoopExecuteTime(2L * 1000 * 1000000)</span></span><br><span class="line"><span class="class">        options.workerPoolSize = 20</span></span><br><span class="line"><span class="class">        super.beforeStartingVertx(<span class="title">options</span>)</span></span><br><span class="line"><span class="class">    &#125;</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ª<code>Launcher</code>ä¸­ï¼Œæˆ‘è¿˜é¢å¤–åšäº†å‡ ä»¶äº‹ï¼š</p><ul><li>ç”¨<code>slf4j</code>æ¥ç®¡äº†<code>Vert.x</code>çš„æ—¥å¿—</li><li>æä¾›ä¸€ä¸ª<code>main</code>æ–¹æ³•ï¼Œæ–¹ä¾¿<code>IDE</code>å¼€å‘ç¯å¢ƒå¯åŠ¨</li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨pg_cronå®šæ—¶åˆ·æ–°PostgreSQLçš„ç‰©åŒ–è§†å›¾</title>
      <link href="/2018/08/11/pg_cron_and_materialized_view/"/>
      <url>/2018/08/11/pg_cron_and_materialized_view/</url>
      <content type="html"><![CDATA[<p>åœ¨<code>PostgreSQL</code>ä¸­å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºç‰©åŒ–è§†å›¾ï¼Œä½†æ˜¯å´æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°ç‰©åŒ–è§†å›¾çš„æœºåˆ¶ã€‚é€šå¸¸æ¥è¯´ï¼Œä¸å¤–ä¹ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡è§¦å‘å™¨ï¼Œå¦ä¸€ç§å°±æ˜¯å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥è¯´è¯´ç¬¬äºŒç§æ–¹å¼ã€‚<br>ä¸»è¦å€ŸåŠ©ä¸€ä¸ªåä¸º<a href="https://github.com/citusdata/pg_cron" target="_blank" rel="noopener">pg_cron</a>çš„æ‰©å±•ã€‚<br>å®‰è£…æ–¹æ³•åœ¨å®˜æ–¹ä»‹ç»é‡Œé¢å·²ç»è¯´çš„å¾ˆæ¸…æ¥šäº†ï¼Œä¸å†èµ˜è¿°ï¼Œè¿™é‡Œæé†’ä¸€ç‚¹ï¼Œå®‰è£…å®Œåï¼Œæ˜¯éœ€è¦ä¿®æ”¹<code>postgresql.conf</code>é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å¯<code>PostgreSQL</code>æœåŠ¡çš„ã€‚å…·ä½“ä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">shared_preload_libraries = <span class="string">'pg_cron'</span></span><br><span class="line">cron<span class="selector-class">.database_name</span> = <span class="string">'postgres'</span></span><br></pre></td></tr></table></figure></p><p>ç¬¬äºŒè¡Œçš„æŒ‡å®š<code>cron</code>çš„å…ƒæ•°æ®ç›¸å…³ä¿¡æ¯å­˜æ”¾çš„æ•°æ®åº“ï¼Œæ˜¯å¯ä»¥æ”¹æˆå…¶ä»–çš„ã€‚è¿™é‡Œè¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œ<code>cron</code>å®‰è£…çš„æ•°æ®åº“ï¼Œå’Œå®ƒè¦æ§åˆ¶çš„æ•°æ®åº“æ²¡æœ‰ä»€ä¹ˆå¿…ç„¶è”ç³»ï¼Œå¹¶ä¸å› ä¸ºè¯´å®‰è£…åœ¨äº†<code>postgres</code>åº“ï¼Œå°±ä¸èƒ½è°ƒåº¦å…¶ä»–åº“äº†ï¼Œè¿™ä¸ªåœ¨åç»­å…·ä½“é…ç½®çš„æ—¶å€™ï¼Œå°±èƒ½æ˜ç™½äº†ã€‚<br>åšå®Œä¸Šè¿°æ­¥éª¤ï¼Œä¿è¯<code>PostgreSQL</code>æœåŠ¡é‡å¯è¿‡åï¼Œå°±å¯ä»¥ç”¨<code>psql</code>æˆ–å…¶ä»–å·¥å…·è¿æ¥åˆ°<code>cron.database_name</code>å¯¹åº”çš„æ•°æ®ï¼Œæ‰§è¡Œ<br><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">CREATE <span class="keyword">EXTENSION </span>pg_cron<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸åœ¨æŒ‡å®šçš„åº“æ‰§è¡Œçš„è¯ï¼Œä¼šé‡åˆ°é”™è¯¯<br><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">Jobs must be scheduled <span class="built_in">from</span> <span class="keyword">the</span> database configured <span class="keyword">in</span> cron.database_name, since <span class="keyword">the</span> pg_cron background worker reads job descriptions <span class="built_in">from</span> this database.</span><br></pre></td></tr></table></figure></p><p>å±Šæ—¶æ³¨æ„å³å¯ã€‚<br>ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä½¿ç”¨æ–¹å¼ç›¸å½“ç®€å•ã€‚è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªæŸ¥è¯¢<code>now()</code>çš„ç‰©åŒ–è§†å›¾åšæ¼”ç¤º<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">materialized</span> <span class="keyword">view</span> <span class="keyword">now</span> <span class="keyword">as</span> <span class="keyword">select</span> <span class="keyword">now</span>();</span><br><span class="line"><span class="keyword">SELECT</span> cron.schedule(<span class="string">'26 * * * *'</span>, <span class="string">'refresh materialized view now;'</span>);</span><br></pre></td></tr></table></figure></p><p>è¿™å°±å®ç°äº†æ¯å°æ—¶26åˆ†çš„æ—¶å€™å»åˆ·æ–°ç‰©åŒ–è§†å›¾ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€ï¼Œä»»æ„æ—¶å€™æ‰§è¡Œ<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">now</span>;</span><br></pre></td></tr></table></figure></p><p>è·å¾—çš„ç»“æœï¼Œéƒ½æ˜¯è·ç¦»æ­¤åˆ»æœ€è¿‘çš„26åˆ†ï¼Œè€Œä¸æ˜¯å½“å‰æ—¶é—´ã€‚<br>é‚£ä¹ˆï¼Œå·²ç»åˆ›å»ºçš„ä»»åŠ¡ï¼Œè¯¥å¦‚ä½•ç®¡ç†å‘¢ã€‚å…¶å®å¾ˆç®€å•ï¼Œå®šæ—¶ä»»åŠ¡æ•°æ®éƒ½å­˜æ”¾åœ¨<code>cron.job</code>è¡¨ä¸­ï¼Œæˆ‘ä»¬çœ‹çœ‹é‡Œé¢çš„æ•°æ®å°±æ˜ç™½äº†ã€‚<br><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">+<span class="params">---------</span>+<span class="params">------------</span>+<span class="params">--------------------------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+</span><br><span class="line">| jobid   | schedule   | <span class="keyword">command</span>                        | nodename   | nodeport   | database   | username   |</span><br><span class="line">|<span class="params">---------</span>+<span class="params">------------</span>+<span class="params">--------------------------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>|</span><br><span class="line">| 1       | 26 * * * * | refresh materialized view now; | localhost  | 5432       | analyze    | postgres   |</span><br><span class="line">+<span class="params">---------</span>+<span class="params">------------</span>+<span class="params">--------------------------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+<span class="params">------------</span>+</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦å–æ¶ˆä¸€ä¸ªä»»åŠ¡ï¼Œå°±éœ€è¦æ‹¿åˆ°<code>jobid</code>ï¼Œç„¶åæ‰§è¡Œä¸‹é¢è¿™å¥å°±å¥½äº†ã€‚<br><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> cron.unschedule(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¿®æ”¹FDWç›¸å…³é…ç½®</title>
      <link href="/2018/08/10/PostgreSQL_alert_foreign_server/"/>
      <url>/2018/08/10/PostgreSQL_alert_foreign_server/</url>
      <content type="html"><![CDATA[<p>å¿…è¦çš„æ—¶å€™è¦ä¿®æ”¹<code>PostgreSQL</code>ä¸­é…ç½®çš„å¤–éƒ¨æœåŠ¡å™¨ã€‚æœ‰ä¸ª<code>ALTER SERVER</code>å‘½ä»¤æ˜¯ä¸“é—¨åº”å¯¹è¿™ç§åœºæ™¯çš„ã€‚æ¯”å¦‚æˆ‘çš„å¤–éƒ¨æ•°æ®æºæœåŠ¡å™¨åœ°å€æ¢äº†ï¼Œåªéœ€è¦æ”¹ä¸‹ä¹‹å‰é…ç½®çš„<code>host</code>åœ°å€å³å¯ï¼Œ<code>SQL</code>å¦‚ä¸‹<br><figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">ALTER SERVER foreign_server <span class="keyword">OPTIONS</span> (<span class="keyword">set</span> host <span class="comment">'192.168.0.88'</span><span class="comment">)</span>;</span><br></pre></td></tr></table></figure></p><p>æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£[<a href="http://www.postgres.cn/docs/9.6/sql-alterserver.html]" target="_blank" rel="noopener">http://www.postgres.cn/docs/9.6/sql-alterserver.html]</a></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­çš„distinct on</title>
      <link href="/2018/08/09/PostgreSQL_distinct-on/"/>
      <url>/2018/08/09/PostgreSQL_distinct-on/</url>
      <content type="html"><![CDATA[<p>æƒ³è±¡æœ‰è¿™ä¹ˆä¸€å¼ è¡¨ï¼Œå­˜æ”¾è‹¥å¹²å­¦ç”Ÿä¸åŒè¯¾ç¨‹çš„è€ƒè¯•æˆç»©ï¼Œéœ€æ±‚æ˜¯ï¼Œæ‰¾å‡ºæ¯é—¨è¯¾ç¨‹ä¸­ï¼Œæˆç»©æœ€å¥½çš„å­¦ç”Ÿã€‚åŸå§‹è¡¨å¤§æ¦‚å¦‚ä¸‹ï¼š</p><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">+--------------------------------------+-----------------+----------------+-----------+</span><br><span class="line">|<span class="string"> id                                   </span>|<span class="string"> v_studentname   </span>|<span class="string"> v_coursename   </span>|<span class="string"> i_score   </span>|</span><br><span class="line">|<span class="string">--------------------------------------+-----------------+----------------+-----------</span>|</span><br><span class="line">|<span class="string"> fb9fe43a-6f57-4f92-8678-139167693e72 </span>|<span class="string"> å¼ ä¸‰            </span>|<span class="string"> è¯­æ–‡           </span>|<span class="string"> 91        </span>|</span><br><span class="line">|<span class="string"> 0898afd7-4253-496e-9190-36fae14bddf2 </span>|<span class="string"> å¼ ä¸‰            </span>|<span class="string"> æ•°å­¦           </span>|<span class="string"> 77        </span>|</span><br><span class="line">|<span class="string"> 2a1f810d-55ee-42cc-ac17-ee970154cecb </span>|<span class="string"> å¼ ä¸‰            </span>|<span class="string"> è‹±è¯­           </span>|<span class="string"> 90        </span>|</span><br><span class="line">|<span class="string"> fa975cd4-af5f-49d0-a89e-6f88665629eb </span>|<span class="string"> æå››            </span>|<span class="string"> è¯­æ–‡           </span>|<span class="string"> 88        </span>|</span><br><span class="line">|<span class="string"> 8833a07c-de8d-4b15-aa34-d9340c2e82c3 </span>|<span class="string"> æå››            </span>|<span class="string"> æ•°å­¦           </span>|<span class="string"> 87        </span>|</span><br><span class="line">|<span class="string"> 1a9dfbdf-7c44-45d7-8141-590203aa26a9 </span>|<span class="string"> æå››            </span>|<span class="string"> è‹±è¯­           </span>|<span class="string"> 89        </span>|</span><br><span class="line">|<span class="string"> cd3ec937-0ab9-4745-ad1a-c9f85839eaeb </span>|<span class="string"> ç‹äº”            </span>|<span class="string"> è¯­æ–‡           </span>|<span class="string"> 89        </span>|</span><br><span class="line">|<span class="string"> 431b7ccd-3a25-4ff4-9cc2-2e9f111f5c06 </span>|<span class="string"> ç‹äº”            </span>|<span class="string"> æ•°å­¦           </span>|<span class="string"> 91        </span>|</span><br><span class="line">|<span class="string"> 8021e41d-09f5-49fb-a9e2-750d14bbff50 </span>|<span class="string"> ç‹äº”            </span>|<span class="string"> è‹±è¯­           </span>|<span class="string"> 79        </span>|</span><br><span class="line">+--------------------------------------+-----------------+----------------+-----------+</span><br></pre></td></tr></table></figure><h2 id="ä¼ ç»Ÿæ–¹æ¡ˆ"><a href="#ä¼ ç»Ÿæ–¹æ¡ˆ" class="headerlink" title="ä¼ ç»Ÿæ–¹æ¡ˆ"></a>ä¼ ç»Ÿæ–¹æ¡ˆ</h2><p>ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œè¦æ‰¾æ¯é—¨è¯¾ç¨‹æˆç»©æœ€å¥½çš„å­¦ç”Ÿçš„è¯ï¼Œéœ€è¦å€ŸåŠ©èšåˆå‡½æ•°ï¼Œè€Œä¸”è¦å‡ æ­¥æ“ä½œï¼š</p><ol><li><p>æ‰¾åˆ°æ¯é—¨è¯¾ç¨‹çš„æœ€å¥½æˆç»©</p> <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">select v_coursename, max(i_score)</span><br><span class="line"><span class="keyword">from</span> achievement</span><br><span class="line">group by v_coursename;</span><br></pre></td></tr></table></figure></li><li><p>å†è·Ÿ<code>achievement</code>è¡¨<code>join</code>ï¼Œæ‰èƒ½æ‰¾åˆ°è¯¥è¯¾ç¨‹æœ€é«˜åˆ†å¯¹åº”çš„å­¦ç”Ÿå§“åã€‚å³ä½¿åœ¨æœ‰<code>CTE</code>æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œå®ç°èµ·æ¥ä¹Ÿå¾ˆå¤æ‚</p> <figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line">with cte as (<span class="keyword">select</span> v_coursename, <span class="built_in">max</span>(i_score) <span class="keyword">as</span> i_score <span class="keyword">from</span> achievement <span class="keyword">group</span> <span class="keyword">by</span> v_coursename)</span><br><span class="line"><span class="keyword">select</span> cte.*, achievement.v_studentname</span><br><span class="line"><span class="keyword">from</span> cte</span><br><span class="line">       <span class="keyword">join</span> achievement <span class="keyword">on</span> cte.i_score = achievement.i_score <span class="keyword">and</span> cte.v_coursename = achievement.v_coursename</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> cte.v_coursename;</span><br></pre></td></tr></table></figure><p> è¦æ˜¯æ²¡æœ‰<code>CTE</code>çš„æ”¯æŒï¼Œä¼°è®¡ç”¨çº¯æ•°æ®åº“å®ç°ï¼Œå°±æ‰è¥Ÿè§è‚˜äº†ã€‚</p></li></ol><h2 id="ä½¿ç”¨distinct-onçš„æ–¹æ¡ˆ"><a href="#ä½¿ç”¨distinct-onçš„æ–¹æ¡ˆ" class="headerlink" title="ä½¿ç”¨distinct onçš„æ–¹æ¡ˆ"></a>ä½¿ç”¨distinct onçš„æ–¹æ¡ˆ</h2><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="keyword">on</span> (v_coursename) * </span><br><span class="line"><span class="keyword">from</span> achievement</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> v_coursename, i_score <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><p>ä¸€å¥è¯è§£å†³ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¼€æ£®ã€‚</p><h4 id="åŸç†å›é¡¾"><a href="#åŸç†å›é¡¾" class="headerlink" title="åŸç†å›é¡¾"></a>åŸç†å›é¡¾</h4><p><code>DISTINCT ON</code>æ˜¯å°†ç»“æœé›†æŒ‰æŒ‡å®šå­—æ®µå€¼çš„å»é‡ï¼Œå…·ä½“å®ç°æ–¹æ³•æ˜¯å…ˆå¯¹ç»“æœé›†æŒ‰ç…§<code>DISTINCT ON</code>æŒ‡å®šçš„å­—æ®µè¿›è¡Œæ’åºï¼Œç„¶åç­›é€‰å‡ºæ¯ä¸ªå­—æ®µç¬¬ä¸€æ¬¡å‡ºç°æ—¶æ‰€åœ¨çš„è®°å½•ï¼Œå…¶ä½™çš„è®°å½•éƒ½å‰”é™¤ã€‚<br><code>ON</code>ä¿®é¥°ç¬¦æ”¯æŒå¤šåˆ—ï¼Œè¿ç®—æ—¶ä¼šåŸºäºå¤šåˆ—çš„æ€»ä½“å”¯ä¸€æ€§è¿›è¡Œå»é‡æ“ä½œã€‚åŒæ—¶æŸ¥è¯¢è¯­å¥å¿…é¡»è¦æœ‰<code>ORDER BY</code>ï¼Œå¹¶ä¸”è¦ä¿è¯æ’åºå­—æ®µä»å·¦è‡³å³çš„çš„é¡ºåºï¼Œåº”è¯¥æ˜¯è·Ÿ<code>DISTINCT ON</code>å‘½ä¸­å­—æ®µé¡ºåºç›¸ç¬¦åˆï¼Œå½“ç„¶<code>ORDER BY</code>å¯ä»¥è¿½åŠ æ›´å¤šçš„å­—æ®µã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linuxè½¯ç¡¬é“¾æ¥ä½¿ç”¨å¿ƒå¾—</title>
      <link href="/2018/08/08/Linux_ln/"/>
      <url>/2018/08/08/Linux_ln/</url>
      <content type="html"><![CDATA[<p><code>ln</code>å‘½ä»¤ï¼Œæ¶‰åŠåˆ°çš„è½¯ç¡¬é“¾æ¥çš„æ ¸å¿ƒæ¦‚å¿µå·²ç»è¢«é˜è¿°çš„å¾ˆå¤šäº†ã€‚ä½†æ˜¯ç”¨çš„æ—¶å€™ï¼Œåˆ°åº•ç”¨è½¯é“¾æ¥ï¼Œè¿˜æ˜¯ç”¨ç¡¬é“¾æ¥ï¼Œæœ‰æ—¶å€™è¿˜æ˜¯ä¼šè®©äººæ‘¸ä¸ç€å¤´ç»ªã€‚æ‰€ä»¥æˆ‘å°è¯•æ€»ç»“å‡ ç‚¹ï¼š</p><ol><li>è½¯ç¡¬é“¾æ¥éƒ½èƒ½èµ·åˆ°åŸå§‹æ–‡ä»¶åªå ç”¨ä¸€ä»½ç£ç›˜èµ„æºçš„ç›®çš„</li><li>ç¡¬é“¾æ¥ä¸èƒ½é’ˆå¯¹æ–‡ä»¶å¤¹ï¼Œè½¯é“¾æ¥æ— æ­¤é™åˆ¶</li><li>ç¡¬é“¾æ¥å¯ä»¥èµ·åˆ°å¤‡ä»½çš„ä½œç”¨ï¼Œåªè¦æœ‰ç¡¬é“¾æ¥åœ¨ï¼ŒåŸå§‹æ–‡ä»¶å°±èƒ½è®¿é—®ï¼›è½¯é“¾æ¥æ— æ­¤æ•ˆæœ</li><li>ä¸è®ºè½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼Œ<code>chmod</code>åšçš„æƒé™å˜æ›´éƒ½å…·æœ‰ä¼ é€’æ€§</li><li>è½¯é“¾æ¥æœ‰ä¸ªå‘ï¼Œå¦‚æœåŸå§‹æ–‡ä»¶åˆ é™¤ä¹‹åï¼Œå†åˆ›å»ºä¸€ä¸ªåŒåçš„æ–‡ä»¶ï¼Œè½¯é“¾æ¥è¿˜ä¼šè«åå…¶å¦™å»ºç«‹é“¾æ¥ï¼Œè¿™å¯èƒ½ä¸ä¸€å®šæ˜¯æˆ‘ä»¬éœ€è¦çš„</li></ol>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLåˆ é™¤æ•°æ®åº“æ—¶æç¤ºother session using the database</title>
      <link href="/2018/08/07/PostgreSQL_drop_database_other-session-using-the-database/"/>
      <url>/2018/08/07/PostgreSQL_drop_database_other-session-using-the-database/</url>
      <content type="html"><![CDATA[<p>PostgreSQLä¸­ï¼Œå¦‚æœæƒ³dropä¸€ä¸ªæ­£åœ¨è¢«äººè¿æ¥çš„æ•°æ®åº“ï¼Œæ˜¯ä¸å¯ä»¥çš„ã€‚æç¤ºå¦‚ä¸‹ï¼š<br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="attribute">postgres</span>=# drop database ka;</span><br><span class="line">ERROR:  database <span class="string">"ka"</span> is being accessed by other users</span><br><span class="line">DETAIL:  There is 1 other session using the database</span><br></pre></td></tr></table></figure></p><p>åº”å¯¹æ–¹æ³•æ˜¯è¦é€šè¿‡<code>pg_terminate_backend</code>ç³»ç»Ÿå†…ç½®å‡½æ•°ï¼ŒæŠŠå¯¹åº”åº“åœ¨çº¿è¿æ¥ç»™æ¸…ç†æ‰ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> pg_terminate_backend(pg_stat_activity.pid)</span><br><span class="line">    <span class="keyword">FROM</span> pg_stat_activity</span><br><span class="line">    <span class="keyword">WHERE</span> pg_stat_activity.datname = <span class="string">'ka'</span></span><br><span class="line">      <span class="keyword">AND</span> pid &lt;&gt; pg_backend_pid();</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Cordovaæ’ä»¶ä¸­å®šåˆ¶build.gradleçš„æ–¹æ³•</title>
      <link href="/2018/08/06/cordova_plugin_gradle/"/>
      <url>/2018/08/06/cordova_plugin_gradle/</url>
      <content type="html"><![CDATA[<p>ç¼–å†™<code>cordova</code>æ’ä»¶çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™è¦æœ‰è¿›ä¸€æ­¥è®¾ç½®<code>build.gradle</code>æ–‡ä»¶çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¿½åŠ ä¸ªä¾èµ–ä»€ä¹ˆçš„ã€‚è¿™ä¸­é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®<code>cordova</code>çš„<code>plugin.xml</code>æ¥è§£å†³çš„ã€‚åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>ç¼–å†™cordova.buildæ–‡ä»¶ï¼Œæ–‡ä»¶åå¯ä»¥éšä¾¿å«ï¼Œå†…å®¹å°±æ”¾ä½ éœ€è¦è¿½åŠ çš„ä¸ªæ€§åŒ–å†…å®¹ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯</p> <figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    sourceSets &#123;</span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDirs = [<span class="string">'libs'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>plugin.xml</code>æ–‡ä»¶ä¸­<code>&lt;platform name=&quot;android&quot;&gt;&lt;/platform&gt;</code>åŒºåŸŸå†…è¿½åŠ é…ç½®</p> <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;framework <span class="attribute">src</span>=<span class="string">"src/android/cordova.gradle"</span> <span class="attribute">custom</span>=<span class="string">"true"</span> <span class="attribute">type</span>=<span class="string">"gradleReference"</span>/&gt;</span><br></pre></td></tr></table></figure></li></ol><p>æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥é˜…æ–‡æ¡£ <a href="https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html" target="_blank" rel="noopener">https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html</a></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cordova </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åŸºäºGebçš„äº¬ä¸œæŠ¢åˆ¸</title>
      <link href="/2018/08/05/grab_a_ticket_use_geb/"/>
      <url>/2018/08/05/grab_a_ticket_use_geb/</url>
      <content type="html"><![CDATA[<p>å‰é¢ä»‹ç»è¿‡<a href="http://gebish.org" target="_blank" rel="noopener">Geb</a>æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå¯ä»¥ç”¨å®ƒå®ç°webå‰ç«¯çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè‡ªç„¶ç”¨æ¥è§£æ”¾åŒæ‰‹ï¼ŒæŠ¢ä¸ªåˆ¸ä»€ä¹ˆçš„ä¸åœ¨è¯ä¸‹ã€‚<br>è¿™æ¬¡æˆ‘ä»¬ä¸»è¦ç„å‡†äº¬ä¸œã€‚æœ€ä½³çš„å®éªŒåœºæ‰€æ˜¯äº¬ä¸œçš„ç§»åŠ¨webç‰ˆï¼Œå³<a href="https://m.jd.com/" target="_blank" rel="noopener">https://m.jd.com/</a>ï¼Œå¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>æ‰“å¼€äº¬ä¸œé¦–é¡µ</li><li>ç‚¹å‡»ç™»å½•æŒ‰é’®</li><li>å¡«å†™ç™»å½•ç”¨æˆ·åå¯†ç å¹¶ç™»å½•</li><li>è°ƒæ•´åˆ°éœ€è¦æŠ¢åˆ¸çš„é¡µé¢</li><li>æ‰¾åˆ°æŠ¢åˆ¸æŒ‰é’®å¼€æŠ¢</li></ol><p>ä¸‹é¢è´´ä¸€ä¸ªï¼Œ618æŸæ´»åŠ¨çš„æŠ¢åˆ¸ä»£ç ï¼ˆç°åœ¨å·²ç»ä¸‹çº¿äº†ï¼‰ï¼Œä»…ä¾›å‚è€ƒã€‚<br><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"> static <span class="function"><span class="keyword">def</span> <span class="title">checkin</span><span class="params">(String username, String password)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        FirefoxBinary firefoxBinary = new FirefoxBinary();</span><br><span class="line">/<span class="regexp">/        firefoxBinary.addCommandLineOptions("--headless");</span></span><br><span class="line"><span class="regexp">        FirefoxOptions firefoxOptions = new FirefoxOptions();</span></span><br><span class="line"><span class="regexp">        firefoxOptions.setBinary(firefoxBinary);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        def browser = new Browser(driver: new FirefoxDriver(firefoxOptions))</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        browser.with &#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            go "https:/</span><span class="regexp">/m.jd.com"</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            $(".jd-search-icon-login").click()</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            $("#username").value(username)</span></span><br><span class="line"><span class="regexp">            $("#password").value(password)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            $("#loginBtn").click()</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            sleep(5000)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            go "https:/</span><span class="regexp">/pro.m.jd.com/mall</span><span class="regexp">/active/q</span>KRVTAJL7v93L71TkJebPv5GJnE/index.html<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            $("</span><span class="comment">#m_1_14").children().each &#123;</span></span><br><span class="line">                it.click()</span><br><span class="line">                sleep(<span class="number">500</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>è¡¥å……å‡ ä¸ªè¯´æ˜ï¼š</p><ol><li>æˆ‘ç”¨çš„æ˜¯<code>Firefox</code>æµè§ˆå™¨ã€‚æ‰€ä»¥éœ€è¦ç”µè„‘äº‹å…ˆè£…å¥½è¯¥æµè§ˆå™¨ã€‚</li><li>åªè£…æµè§ˆå™¨è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦ç›¸åº”çš„<code>WebDriver</code>é©±åŠ¨ã€‚å¦‚æœæ‰¾ä¸åˆ°ç¨‹åºä¼šæŠ¥é”™çš„ï¼Œå¯ä»¥æ ¹æ®é”™è¯¯æç¤ºä¸‹è½½è¯¥é©±åŠ¨ã€‚ç„¶åè¦æŠŠæœ¬åœ°é©±åŠ¨æ–‡ä»¶åœ°å€è®¾ç½®ä¸€ä¸‹ï¼Œæ–¹ä¾¿<code>Geb</code>è¯†åˆ«ï¼Œä»£ç å¦‚ä¸‹<code>System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;/root/geckodriver&quot;)</code></li><li><strong>æ— èŠ‚ç›®çš„LinuxæœåŠ¡å™¨å¯ä¸å¯ç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥</strong>ï¼Œåœ¨å®‰è£…å®Œä¸Šé¢ä¸¤æ ·ä¸œè¥¿ä¹‹åï¼Œåªéœ€è¦ä»£ç é‡Œæ·»åŠ <code>firefoxBinary.addCommandLineOptions(&quot;--headless&quot;);</code>å°±å¯ä»¥å¯åŠ¨æ— ç•Œé¢çš„<code>Firefox</code>äº†</li></ol><h4 id="å‹æƒ…æé†’"><a href="#å‹æƒ…æé†’" class="headerlink" title="å‹æƒ…æé†’"></a>å‹æƒ…æé†’</h4><p>å·¥å…·æŠ¢åˆ¸ä¹Ÿå¥½ã€ä»£ç æŠ¢åˆ¸ä¹Ÿå¥½ï¼Œéƒ½æ˜¯ä¸€ç§å¯¹æ™®é€šæ¶ˆè´¹è€…ä¸å…¬å¹³çš„å­˜åœ¨ã€‚å»ºè®®å­¦ä¼šä¹‹åï¼Œè‡ªç”¨ç»ƒæ‰‹å³å¯ï¼Œåˆ‡å‹¿ä»¥æ­¤ç‰Ÿåˆ©ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Geb </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JVMä¸‹æœ€å¥½ç”¨çš„å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·Geb</title>
      <link href="/2018/08/04/Geb/"/>
      <url>/2018/08/04/Geb/</url>
      <content type="html"><![CDATA[<p>æ¥è§¦äº†<code>Angular</code>æ‰çŸ¥é“å‰ç«¯æœ‰ä¸ªç«¯åˆ°ç«¯æµ‹è¯•çš„è¯´æ³•ï¼Œç„¶åäº†è§£åˆ°æœ‰<code>WebDriver</code>è¿™ç§ç¥å¥‡çš„å­˜åœ¨ï¼Œç¬é—´æ‰“å¼€äº†æ–°ä¸–çºªçš„å¤§é—¨ã€‚åæ¥å‡ ç»å¯»è§…ï¼Œç»ˆäºå‘ç°ä¸€ä¸ªè¿è¡Œåœ¨<code>JVM</code>ä¸­çš„å‰ç«¯æµ‹è¯•å·¥å…·ï¼Œé‚£å°±æ˜¯<a href="http://gebish.org" target="_blank" rel="noopener">Geb</a>ã€‚<br>æ¥æ®µä»£ç ï¼š<br><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">import</span> geb.<span class="keyword">Browser</span></span><br><span class="line"><span class="keyword"> </span></span><br><span class="line"><span class="keyword">Browser.drive </span>&#123;</span><br><span class="line">    go <span class="string">"http://myapp.com/login"</span></span><br><span class="line">     </span><br><span class="line">    <span class="meta">assert</span> $(<span class="string">"h1"</span>)<span class="meta">.text</span>() == <span class="string">"Please Login"</span></span><br><span class="line">     </span><br><span class="line">    $(<span class="string">"form.login"</span>).with &#123;</span><br><span class="line">        username = <span class="string">"admin"</span></span><br><span class="line">        password = <span class="string">"password"</span></span><br><span class="line">        login().click()</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="meta">assert</span> $(<span class="string">"h1"</span>)<span class="meta">.text</span>() == <span class="string">"Admin Section"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ˜¯ä¸æ˜¯å¾ˆæ˜“æ‡‚ï¼Œä¸€ä¸ªæœ‰<code>Java</code>ä¸<code>jQuery</code>åŸºç¡€çš„äººåº”è¯¥éå¸¸å®¹æ˜“ä¸Šæ‰‹ã€‚<br>è¿˜è®°å¾—é‚£ä¸ªé˜¿é‡Œå‘˜å·¥æŠ¢æœˆé¥¼äº‹ä»¶ä¹ˆï¼Œä¼°è®¡çœ‹äº†æ–°é—»ä¹‹åï¼Œå‰ç«¯ç¨‹åºå‘˜éƒ½ä¼šè§‰å¾—0é—¨æ§›ï¼Œä½†æ˜¯åç«¯ç¨‹åºå‘˜ï¼Œå¯èƒ½å°±ä¼šè§‰å¾—è‡ªå·±çš„æŠ€æœ¯æ ˆé­é•¿è«åŠäº†ã€‚æœ‰äº†<code>Geb</code>ï¼Œæˆ‘ä»¬èƒ½åšçš„äº‹æƒ…ä¼šæ›´å¤šï¼Œä¹Ÿä¼šæ›´åŠ æ–¹ä¾¿ã€‚ä¸‹ä¸€ç¯‡ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•ç”¨<code>Geb</code>æ¥å®ç°äº¬ä¸œæŠ¢åˆ¸ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> Geb </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­çš„å‡ ä¸­å¸¸è§ç´¢å¼•åŠåº”ç”¨åœºæ™¯</title>
      <link href="/2018/08/03/PostgreSQL_indexs/"/>
      <url>/2018/08/03/PostgreSQL_indexs/</url>
      <content type="html"><![CDATA[<h2 id="B-tree"><a href="#B-tree" class="headerlink" title="B-tree"></a>B-tree</h2><p><code>B-tree</code>æ˜¯å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œæœ€å¸¸è§çš„ç´¢å¼•ï¼Œä¹Ÿæ˜¯<code>PostgreSQL</code>ä¸­ç»å¸¸é‡‡ç”¨çš„é»˜è®¤ç´¢å¼•ã€‚ä¸»è¦åº”å¯¹åœºæ™¯ï¼š</p><ul><li>ä¸»é”®</li><li>å”¯ä¸€æ€§çº¦æŸ</li><li>ç­‰å€¼æ¯”è¾ƒ</li><li>èŒƒå›´æŸ¥è¯¢</li><li>nullåˆ¤æ–­</li></ul><h2 id="GiST"><a href="#GiST" class="headerlink" title="GiST"></a>GiST</h2><p>å…¨ç§°Generalized Search Treeï¼Œå¤§ç™½è¯å°±æ˜¯é€šç”¨æœç´¢æ ‘ã€‚è¿™æ˜¯ä¸€ç§<strong>æœ‰æŸ</strong>ç´¢å¼•ï¼Œä¸»è¦åº”å¯¹éç»“æ„åŒ–æ•°æ®ï¼Œæ¯”å¦‚ç©ºé—´ã€å…¨æ–‡æ£€ç´¢ä»€ä¹ˆçš„ã€‚ä¸»è¦åº”å¯¹åœºæ™¯ï¼š</p><ul><li>å‡ ä½•ç±»å‹æ•°æ®</li><li>èŒƒå›´ç±»å‹æ•°æ®</li><li>ltreeç±»å‹æ•°æ®</li><li>æ€»ä¹‹å°±æ˜¯è¦ç”¨åˆ°ä¸å±€é™äº<code>&lt;ã€&lt;=ã€=ã€ &gt;=ã€&gt;</code>è¿™å‡ ç§æ“ä½œç¬¦æ—¶ï¼Œè¦è€ƒè™‘<code>GiST</code>ç´¢å¼•</li><li><code>GiST</code>è·Ÿ<code>B-tree</code>å¹¶ä¸çŸ›ç›¾ï¼Œå¯ä»¥æŠŠ<code>GiST</code>å½“ä½œä¸€ç§è¡¥å……æ¥ç”¨ï¼Œæ•ˆæœæ›´å¥½</li></ul><h2 id="GIN"><a href="#GIN" class="headerlink" title="GIN"></a>GIN</h2><p>å…¨ç§°Generalized Inverted Indexï¼Œé€šç”¨é€†åºç´¢å¼•ã€‚å®ƒæ˜¯ä»<code>GiST</code>æ´¾ç”Ÿå‡ºæ¥çš„ä¸€ç§ç´¢å¼•ï¼Œæ¯”<code>GiST</code>æœ€å¤§çš„ä¼˜åŠ¿æ˜¯æ— æŸï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¦æŸ¥è¯¢çš„æ•°æ®éƒ½è¢«ç´¢å¼•ï¼Œå°±å¯ä»¥ä»ç´¢å¼•ä¸­ç›´æ¥è·å–æŸ¥è¯¢ç»“æœã€‚<code>GIN</code>ç´¢å¼•çš„ç¼ºç‚¹æ˜¯æ›´æ–°æ“ä½œæ—¶ï¼Œå¤šå‡ºä¸€ä¸ªå­—æ®µå€¼å¤åˆ¶çš„åŠ¨ä½œï¼Œè¿™ç‚¹ä¸åŠ<code>GiST</code>çš„é€Ÿåº¦å¿«ã€‚å¦å¤–å°±æ˜¯å®ƒä¸èƒ½å¯¹å¤§å¯¹è±¡ç±»å‹ç´¢å¼•ï¼Œæ¯”å¦‚hstoreã€texté‡Œé¢æœ‰å¤§å¯¹è±¡ï¼Œå°±ä¸é€‚åˆç”¨<code>GIN</code>äº†ã€‚ä¸»è¦åº”å¯¹åœºæ™¯ï¼š</p><ul><li>jsonbæ•°æ®ç±»å‹</li><li>æ•°ç»„æ•°æ®ç±»å‹</li><li>é…åˆ<code>create extension pg_trgm</code>å¯¹<code>varchar</code>æ¨¡ç³ŠæŸ¥è¯¢</li></ul><h2 id="SP-GiST"><a href="#SP-GiST" class="headerlink" title="SP-GiST"></a>SP-GiST</h2><p>SPæ˜¯Space-Partitioningçš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯è¯´æœ¬ç´¢å¼•æ˜¯åŸºäºç©ºé—´åˆ†åŒºæ ‘ç®—æ³•çš„GiSTç´¢å¼•ã€‚ä¸<code>GiST</code>çš„åº”ç”¨åœºé¢†åŸŸé«˜åº¦é‡å ï¼Œå¥½å¤„å°±æ˜¯é’ˆå¯¹æŸäº›é¢†åŸŸçš„ç‰¹å®šç®—æ³•ï¼Œå…¶æ•ˆç‡è¦é«˜ä¸€äº›ã€‚ç›®å‰æ”¯æŒè¯¥ç´¢å¼•çš„ç±»å‹ä¸»è¦æœ‰ï¼š</p><ul><li>point</li><li>box</li><li>text</li><li>range</li><li>network</li></ul><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>PostgreSQLå·²å°†<code>Hash</code>ç´¢å¼•åˆ—ä¸ºä¸æ¨èä½¿ç”¨çŠ¶æ€ã€‚åªèƒ½å®ç°<code>=</code>è¿ç®—ç›¸å…³åˆ¤æ–­ã€‚</p><p>æƒ³äº†è§£æ›´å¤šç´¢å¼•çš„åº”ç”¨èŒƒå›´ï¼Œå®Œå…¨å¯ä»¥åœ¨<code>PostgreSQL</code>çš„å…ƒæ•°æ®ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚å°è¯•æ‰§è¡Œè¿™ä¸ª<code>SQL</code>å§<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">SELECT am<span class="selector-class">.amname</span> AS index_method,</span><br><span class="line">       opf<span class="selector-class">.opfname</span> AS opfamily_name,</span><br><span class="line">       amop<span class="selector-class">.amopopr</span>::regoperator AS opfamily_operator</span><br><span class="line">FROM pg_am am, pg_opfamily opf, pg_amop amop</span><br><span class="line">WHERE opf<span class="selector-class">.opfmethod</span> = am<span class="selector-class">.oid</span> AND</span><br><span class="line">      amop<span class="selector-class">.amopfamily</span> = opf.oid</span><br><span class="line">ORDER BY index_method, opfamily_name, opfamily_operator</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­varcharç±»å‹likeå‰ç½®%æŸ¥è¯¢å‘½ä¸­ç´¢å¼•çš„æ–¹æ³•</title>
      <link href="/2018/08/02/PostgreSQL_select_varchar_like_front_/"/>
      <url>/2018/08/02/PostgreSQL_select_varchar_like_front_/</url>
      <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†<code>PostgreSQL</code>ä¸­æƒ³è¦è®©<code>varchar</code>ç±»å‹æ”¯æŒ<code>like</code>æŸ¥è¯¢èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•ï¼Œéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä½†æ˜¯å³ä¾¿æ˜¯åˆ›å»ºç´¢å¼•æ—¶ï¼ŒæŒ‡å®šäº†æ“ä½œç¬¦ç±»<code>varchar_pattern_ops</code>ï¼Œåœ¨ä½¿ç”¨<code>like</code>æŸ¥è¯¢çš„æ—¶å€™ï¼Œè¿˜æ˜¯åªèƒ½ä¿è¯<code>sometext%</code>è¿™ç§æŸ¥è¯¢èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•ï¼Œä½†æ˜¯<code>%sometext</code>è¿™ç§æ˜¯æ— èƒ½ä¸ºåŠ›çš„ï¼Œè§ä¸‹å›¾ã€‚<br><img src="/media/15331709094483.jpg" alt=""><br><img src="/media/15331709707728.jpg" alt=""><br>æ‰€ä»¥å¦‚æœéœ€è¦æ”¯æŒ<code>%sometext</code>æ–¹å¼çš„ç´¢å¼•æŸ¥è¯¢ï¼Œè¿˜éœ€è¦å†åšç‚¹å·¥ä½œï¼š</p><ol><li><code>create extension pg_trgm;</code></li><li><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> log_action_v_uri_index  <span class="keyword">ON</span>  log_action <span class="keyword">using</span> gist (v_uri gist_trgm_ops);</span><br></pre></td></tr></table></figure></li><li><p>ä¸Šé¢<code>gist</code>ç´¢å¼•æ—¶æœ‰æŸçš„ï¼Œåæ¥ç ”ç©¶æ”¯æŒï¼Œå‘ç°<code>gin</code>æ›´åˆé€‚ï¼Œé€Ÿåº¦æ›´å¿« <strong>å¼ºçƒˆæ¨è</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> table_name_md5_index  <span class="keyword">ON</span> table_name <span class="keyword">using</span> gin (<span class="keyword">md5</span> gin_trgm_ops);</span><br></pre></td></tr></table></figure></li></ol><p>ç„¶åé‡æ–°æ‰§è¡Œ<code>explain</code>ï¼Œå°±èƒ½çœ‹åˆ°å‘½ä¸­ç´¢å¼•äº†<br><img src="/media/15331719609935.jpg" alt=""></p><p>å…³äº<code>btree</code>ç´¢å¼•ä¸<code>gist</code>ç´¢å¼•çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬ä»¥åå†æ¢è®¨ã€‚ ç°åœ¨æˆ‘ä»¬å…ˆçœ‹çœ‹åŒæ ·æ”¯æŒ<code>sometext%</code>æŸ¥è¯¢å‘½ä¸­ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¯¥ç”¨å“ªç§å‘¢ã€‚</p><ol><li>é¦–å…ˆæ˜¯æŸ¥è¯¢é€Ÿåº¦ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¢ç™¾ä¸‡è¡Œçš„æ•°æ®æ¥æµ‹è¯•<ul><li>å…ˆçœ‹<code>btree</code>çš„<img src="/media/15331926585276.jpg" alt=""></li><li>å†çœ‹<code>gist</code>çš„<img src="/media/15331926156740.jpg" alt=""></li><li>ç›´è§‚æ¥çœ‹ï¼Œé‡‡ç”¨<code>gist</code>ç´¢å¼•è§„åˆ’æœŸç»™çš„æ—¶é—´æ˜¯æ›´å¿«çš„ã€‚ä½†æ˜¯å¦‚æœé‡‡ç”¨<code>explain analyse</code>å°è¯•è·å–çœŸå®ç»“æœçš„è¯ï¼Œç­”æ¡ˆå°±æ°æ°ç›¸åäº†</li><li>å…ˆçœ‹<code>btree</code><img src="/media/15331929892802.jpg" alt=""></li><li>å†çœ‹<code>gist</code><img src="/media/15331930513697.jpg" alt=""></li><li>ç»“æœåŒªå¤·æ‰€æ€ï¼Œåœ¨<code>gist</code>ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä¸è®ºæ€ä¹ˆæµ‹è¯•ï¼Œæœ€ç»ˆçš„<code>Execution time</code>éƒ½ä¿æŒåœ¨500msä»¥ä¸Šã€‚è€Œ<code>btree</code>å®é™…æ‰§è¡Œæ—¶é—´æ‰1mså¤šã€‚æˆ‘å°è¯•é‡å¯æ•°æ®åº“ï¼Œæ¥ä¿è¯æ•°æ®æ²¡æœ‰ç¼“å­˜ï¼Œä½†æ˜¯<code>btree</code>åé¦ˆçš„å®é™…æ‰§è¡Œæ—¶é—´ä¹Ÿä¸è¿‡å°±11mså¤šï¼Œä¹‹ååˆä¼šä¸‹é™äº†1msé‡çº§ã€‚è¿™å…¶ä¸­çš„åŸå› ï¼Œæ˜¯å› ä¸º<code>gist</code>æ˜¯ä¸€ç§æœ‰æŸç´¢å¼•ï¼Œæ‰€ä»¥ä¸èƒ½åƒ<code>btree</code>ç´¢å¼•é‚£æ ·ï¼Œç›´æ¥æŠŠå€¼å–å‡ºæ¥ã€‚</li><li><strong>ç»“è®ºï¼šé€šå¸¸æƒ…å†µä¸‹btreeçš„æŸ¥è¯¢é€Ÿåº¦ä¼šè¿œå¥½äºgistï¼Œä½†æ˜¯å¦‚æœgistç´¢å¼•åˆ—åªå‚ä¸æ¡ä»¶åˆ¤æ–­ï¼Œä¸å‚ä¸selectï¼Œgistçš„é€Ÿåº¦è¿˜æ˜¯æ¯”è¾ƒç†æƒ³çš„</strong></li></ul></li><li>ç„¶æ˜¯æ˜¯åˆ›å»ºç´¢å¼•çš„é€Ÿåº¦<ul><li>å…ˆçœ‹<code>btree</code><img src="/media/15331936107582.jpg" alt=""></li><li>å†çœ‹<code>gist</code><img src="/media/15331936413004.jpg" alt=""></li><li><strong>ç»“è®ºï¼šåˆ›å»ºç´¢å¼•çš„é€Ÿåº¦ï¼Œbtreeè¿œå¥½äºgist</strong></li></ul></li><li>è¿˜æœ‰åŠŸèƒ½ä¸Š<strong>gistç´¢å¼•ä¸æ”¯æŒ=æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯å¦‚æœé™¤äº†æ¨¡ç³ŠåŒ¹é…ï¼Œè¿˜éœ€è¦ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œå¿…é¡»å¼•å…¥btreeç´¢å¼•</strong></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><p><code>varchar</code>ç±»å‹ï¼Œå¦‚æœéœ€è¦æ¨¡ç³ŠæŸ¥è¯¢ï¼Œéœ€è¦è¿™ä¹ˆæ¥</p>  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> table_name_md5_index_btree <span class="keyword">ON</span> table_name (<span class="keyword">md5</span> text_pattern_ops);</span><br></pre></td></tr></table></figure><p>  ä½†æ˜¯æ­¤æ–¹æ¡ˆåªæ”¯æŒ<code>å·¦é”šå®š</code></p></li><li><p>å¦‚æœéœ€è¦ä¸å±€é™äº<code>å·¦é”šå®š</code>çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œè¿˜éœ€è¦è¿™ä¹ˆæ¥</p>  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> extension pg_trgm;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> table_name_md5_index  <span class="keyword">ON</span> table_name <span class="keyword">using</span> gin (<span class="keyword">md5</span> gin_trgm_ops);</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœè¿˜éœ€è¦ç²¾ç¡®ç­‰å€¼æŸ¥è¯¢ï¼Œè¯·åŠ¡å¿…ä¿ç•™<code>btree</code>ç´¢å¼•</p></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLä¸­varcharç±»å‹æ”¯æŒlikeæŸ¥è¯¢ç´¢å¼•</title>
      <link href="/2018/08/01/PostgreSQL_select_varchar_like_index/"/>
      <url>/2018/08/01/PostgreSQL_select_varchar_like_index/</url>
      <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨ä½¿ç”¨<code>PostgreSQL</code>ä¸­çš„<code>varchar</code>ç±»å‹æ—¶æƒ³å½“ç„¶çš„ä»¥ä¸ºç”¨æœ€åŸºæœ¬çš„ç´¢å¼•åˆ›å»ºè¯­å¥åˆ›å»ºçš„ç´¢å¼•ï¼Œå°±æ”¯æŒ<code>like</code>æŸ¥è¯¢çš„ã€‚<br>ç±»ä¼¼è¿™å¥ï¼š<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> log_action_v_uri_index <span class="keyword">ON</span> log_action (v_uri);</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯çœ‹è¿‡<code>explain</code>æ‰çŸ¥é“ï¼Œå•å‡­è¿™æ ·çš„ç´¢å¼•ï¼Œåœ¨<code>like</code>æœç´¢çš„æ—¶å€™ï¼Œä»ç„¶æ˜¯é¡ºåºå…¨è¡¨æ‰«æï¼Œå¦‚å›¾ï¼š<br><img src="/media/15330845808519.jpg" alt=""><br>åæ¥googleäº†ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼ŒåŸæ¥æ˜¯åˆ›å»ºç´¢å¼•çš„æ—¶å€™è¿½åŠ ä¸€ä¸‹å‚æ•°ï¼Œåº”è¯¥è¿™ä¹ˆåˆ›å»º<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> log_action_v_uri_index <span class="keyword">ON</span> log_action (v_uri varchar_pattern_ops);</span><br></pre></td></tr></table></figure></p><p>ç„¶åå¯¹åŒæ ·çš„è¯­å¥å†æ¬¡<code>explain</code>ç»“æœå¦‚ä¸‹ï¼š<br><img src="/media/15330848868005.jpg" alt=""><br>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å‘½ä¸­ç´¢å¼•äº†ã€‚<br>è¿™å…¶ä¸­æ¶‰åŠåˆ°ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯<code>PostgreSQL</code>çš„ç´¢å¼•<em>æ“ä½œç¬¦ç±»</em> ï¼Œå…¶æ ‡å‡†è¯­æ³•ä¸º<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> <span class="keyword">name</span> <span class="keyword">ON</span> <span class="keyword">table</span> (<span class="keyword">column</span> opclass [<span class="keyword">sort</span> options] [, ...]);</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ª<code>opclass</code>å¯ä»¥é’ˆå¯¹ä¸åŒçš„æ•°æ®ç±»å‹å’ŒæŸ¥è¯¢æ–¹å¼æä¾›å¤šç§å¤šæ ·çš„æ–¹æ¡ˆï¼Œ<br><img src="/media/15330861199315.jpg" alt=""><br>å¯ä»¥çœ‹åˆ°å…‰<code>btree</code>ç´¢å¼•æœ‰å…³çš„æ“ä½œç¬¦ç±»å°±éå¸¸å¤šï¼Œæœ‰äº›<code>is_default</code>æ˜¯<code>true</code>ä¹Ÿå°±æ˜¯æ­£å¥½åˆ—ç±»å‹å»åˆçš„è¯ï¼Œè¿™ä¸ªæ“ä½œç¬¦ç±»å°±ä¸è¦ç‰¹æ„è¯´æ˜äº†ã€‚è€Œ<code>varchar</code>æˆ–è€…<code>text</code>çš„é»˜è®¤ç”¨çš„æ˜¯<code>text_ops</code>ï¼Œå®ƒæ”¯æŒçš„æŸ¥è¯¢æ–¹å¼ä»…æœ‰<br><img src="/media/15330876281185.jpg" alt=""><br>æ‰€ä»¥æƒ³ç”¨æ¨¡ç³ŠæŸ¥è¯¢çš„è¯ï¼Œè¿˜æ˜¯å¾—ç”¨<code>text_pattern_ops</code>æˆ–è€…<code>varchar_pattern_ops</code>(è¿™å“¥ä¿©æ˜¯ä¸€ä¸ªä¸œè¥¿)ï¼Œå®ƒæ”¯æŒæ­£åˆ™æ¨¡ç³ŠåŒ¹é…ï¼Œä¹Ÿæ”¯æŒ<code>like %</code>çš„æ–¹å¼<br><img src="/media/15330878032471.jpg" alt=""></p><ul><li>æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="http://www.postgres.cn/docs/9.6/indexes-opclass.html" target="_blank" rel="noopener">æ“ä½œç¬¦ç±»å’Œæ“ä½œç¬¦æ—</a></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>IntelliJ IDEAä¸­çš„SQL Explain</title>
      <link href="/2018/07/31/IntelliJ-IDEA_SQL-Explain/"/>
      <url>/2018/07/31/IntelliJ-IDEA_SQL-Explain/</url>
      <content type="html"><![CDATA[<p>å–„äºåˆ©ç”¨<code>SQL</code>çš„<code>explain</code>æ˜¯<code>SQL</code>è°ƒæ•´ä¼˜åŒ–çš„å¿…ç»ä¹‹è·¯ã€‚ä½†æ˜¯é‡åˆ°å¤æ‚çš„<code>SQL</code>ï¼ŒæŸ¥çœ‹<code>explain</code>ç»“æœä¹Ÿæ˜¯æœ‰ç‚¹å›°éš¾çš„ã€‚æ¯”å¦‚è¿™æ ·çš„ï¼š<br><img src="/media/15329969004233.jpg" alt=""><br>å¥½åœ¨å¾ˆå¤šæ•°æ®åº“çš„å®¢æˆ·ç«¯éƒ½æä¾›äº†å›¾å½¢åŒ–çš„è¡¨ç°å½¢å¼ï¼Œæ¯”å¦‚<code>PostgreSQL</code>çš„<code>pgAdmin4</code>å°±èƒ½çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š<br><img src="/media/15329972711011.jpg" alt=""><br>ä¸è¿‡å¦‚æœæœ‰ä¸ªå·¥å…·ï¼Œèƒ½å¤Ÿholdä½æ‰€æœ‰ä¸»æµçš„å…³ç³»å‹æ•°æ®åº“çš„è¯ï¼Œå°±æ›´å—¨çš®äº†ã€‚ç­”æ¡ˆå°±æ˜¯<code>IntelliJ IDEA</code>ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡å…¶è‡ªå¸¦çš„<code>Database</code>åŠŸèƒ½çš„è¯ï¼Œæ¨èç°åœ¨å°±è¯•ä¸€ä¸‹ã€‚åœ¨å±å¹•å³ä¾§åº”è¯¥èƒ½æ‰¾åˆ°ã€‚<br><img src="/media/15329976430336.jpg" alt=""><br>åªéœ€è¦æŒ‰ç…§å‘å¯¼æ·»åŠ ç›¸åº”çš„æ•°æ®åº“è¿æ¥å°±å¥½äº†ã€‚ä¸è¿‡è¿™ä¸ªåŠŸèƒ½å…è´¹çš„ç¤¾åŒºç‰ˆæ˜¯æ²¡æœ‰çš„ã€‚<br>åˆ›å»ºå®Œæ•°æ®åº“é“¾æ¥åï¼Œé€šè¿‡æ­¤æŒ‰é’®æ‰“å¼€<code>SQL Console</code>çª—å£<br><img src="/media/15329978378217.jpg" alt=""><br>ç„¶ååœ¨é‡Œé¢å°±å¯ä»¥æ„‰å¿«çš„ç¼–å†™<code>SQL</code>äº†ã€‚<br>å…ˆæ¥ä¸€æ®µï¼š<br><img src="/media/15329983218004.jpg" alt=""><br>ç°åœ¨æˆ‘ä»¬å¯ä»¥å°è¯•é€šè¿‡<code>IntelliJ IDEA</code>æ‰§è¡Œä¸€æ¬¡<code>explain</code>äº†ã€‚</p><ul><li>å…ˆæŠŠå…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦<code>explain</code>çš„<code>SQL</code>ä¸Š</li><li>å³é”®å‘¼å‡ºèœå•ï¼Œæ‰¾åˆ°<img src="/media/15329984643618.jpg" alt="">   æ‰§è¡Œä¹‹</li><li>å°±èƒ½çœ‹åˆ°æ•ˆæœäº†<img src="/media/15329985590089.jpg" alt=""></li><li>ç‚¹å‡»<code>Show Visualisation</code>å¯ä»¥å‘¼å‡ºå›¾å½¢åŒ–å±•ç¤º<img src="/media/15329987110873.jpg" alt=""></li><li>å¦‚æœè§‰å¾—è¿™ä¸ªåŠŸèƒ½å®ç”¨çš„è¯ï¼Œå¯ä»¥ç»™å®ƒè®¾ç½®ä¸€ä¸ªå¿«æ·é”®ï¼Œæ–¹æ³•å¦‚ä¸‹<ul><li>å‘¼å‡º<code>Find Action...</code>çª—å£ï¼ˆå¿«æ·é”®ï¼šâ‡§âŒ˜Aï¼‰ï¼Œåœ¨<code>Help</code>èœå•ä¸‹èƒ½æ‰¾åˆ°</li><li>æœç´¢åˆ°<code>explain</code><img src="/media/15329989448215.jpg" alt=""></li><li>æŒ‰å¿«æ·é”®âŒ¥â†©ï¸ï¼Œæˆ–è€…windowsä¸‹çš„<code>alt+å›è½¦</code></li><li>å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªå¿«æ·é”®äº†<img src="/media/15329990816786.jpg" alt=""></li></ul></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¯åŠ¨Dockerå®¹å™¨åè¦æ³¨æ„çš„æ—¶åŒºé—®é¢˜</title>
      <link href="/2018/07/30/timezone_in_docker/"/>
      <url>/2018/07/30/timezone_in_docker/</url>
      <content type="html"><![CDATA[<p>å¯¹äºä¸­å›½ç”¨æˆ·æ¥è¯´ï¼Œä¸€èˆ¬çš„dockerå®¹å™¨å¯åŠ¨åï¼Œå¦‚æœæ‰§è¡Œ<code>docker  exec -it xxxx date</code>ä¼šå‘ç°æ‰“å°å‡ºæ¥çš„æ—¶é—´ï¼Œæ¯”å½“å‰åŒ—äº¬æ—¶é—´æ—©å…«ä¸ªå°æ—¶ã€‚æ‰€ä»¥éœ€è¦è°ƒæ•´å®¹å™¨çš„æ—¶åŒºï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå‘½ä»¤ï¼ˆè¦åœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œï¼‰ï¼š</p><ul><li><code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></li><li><code>echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone</code></li></ul><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‘½ä»¤å°±èƒ½è§£å†³ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ç”¨<code>PostgreSQL</code>çš„è¯ï¼Œ<code>select now()</code>å°±å¯ä»¥é€šè¿‡ç¬¬ä¸€æ¡å‘½ä»¤ä¿®æ­£ã€‚ä½†æ˜¯<code>Tomcat</code>ç­‰javaç›¸å…³çš„ç¨‹åºï¼Œè¿˜éœ€è¦ç¬¬äºŒæ¡å‘½ä»¤ï¼Œæ‰èƒ½è·å¾—æ­£ç¡®çš„æ—¶é—´ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>tomcatä¸­URLä¸­æ–‡ä¹±ç é—®é¢˜</title>
      <link href="/2018/07/29/tomcat_url_chinese_garbled/"/>
      <url>/2018/07/29/tomcat_url_chinese_garbled/</url>
      <content type="html"><![CDATA[<p>æ‰¾åˆ°<br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;Connector <span class="attribute">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attribute">port</span>=<span class="string">"8080"</span> <span class="attribute">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attribute">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span><br></pre></td></tr></table></figure></p><p>è¿½åŠ é…ç½®ä¸º<br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;Connector <span class="attribute">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attribute">port</span>=<span class="string">"8080"</span> <span class="attribute">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attribute">redirectPort</span>=<span class="string">"8443"</span> <span class="attribute">URIEncoding</span>=<span class="string">"UTF-8"</span>/&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹±ç  </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è¢«å¿½ç•¥çš„IntelliJ IDEAå¸¸ç”¨å¿«æ·é”®</title>
      <link href="/2018/07/28/IntelliJ-IDEA_hot_keys/"/>
      <url>/2018/07/28/IntelliJ-IDEA_hot_keys/</url>
      <content type="html"><![CDATA[<ul><li>è·³è½¬åˆ°æ–¹æ³•å£°æ˜å¤„ ï¼ˆGo to declarationï¼‰ âŒ˜B</li><li>å¿«é€ŸæŸ¥çœ‹å£°æ˜ï¼ˆOpen quick definition lookupï¼‰â‡§âŒ˜I</li><li>å¿«é€ŸæŸ¥çœ‹æ–‡æ¡£ï¼ˆQuick documentation lookupï¼‰^J</li><li>å—çº§æ³¨é‡Šï¼ˆComment/uncomment with block commentï¼‰^â‡§/</li><li>æŸ¥æ‰¾è¢«è°ƒç”¨å¤„ï¼ˆShow usagesï¼‰âŒ¥âŒ˜F7</li><li>åœ¨æœ¬æ–‡ä»¶é«˜äº®å¼•ç”¨ï¼Œå¯ä»¥ç”¨åœ¨returnä¸Šï¼ˆHighlight usages in fileï¼‰â‡§âŒ˜F7</li><li>å¼¹å‡ºé‡æ„çª—å£ âŒ¥â‡§âŒ˜T</li><li>è¡¥å…¨ä»£ç ï¼ˆComplete statementï¼‰â‡§âŒ˜â†©ï¸</li><li>æŸ¥æ‰¾åŠŸèƒ½ï¼ˆFind Actionâ€¦ï¼‰â‡§âŒ˜Aï¼Œç´§æ¥ç€å¦‚æœè¦ç»™æ‰¾åˆ°çš„åŠŸèƒ½è®¾ç½®å¿«æ·é”®ï¼Œå°±ç»§ç»­âŒ¥â†©ï¸</li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ¶ä½œmacOSå¯åŠ¨Uç›˜å‘½ä»¤</title>
      <link href="/2018/07/27/macos_bootable_usb/"/>
      <url>/2018/07/27/macos_bootable_usb/</url>
      <content type="html"><![CDATA[<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">sudo <span class="string">/Applications/Install</span>\ macOS\ High\ Sierra.app/Contents/Resources/createinstallmedia <span class="params">--volume</span> <span class="string">/Volumes/Sierra</span> <span class="params">--applicationpath</span> <span class="string">/Applications/Install</span>\ macOS\ High\ Sierra.app <span class="params">--nointeraction</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>/Volumes/Sierra</code>çš„<code>Sierra</code>æ˜¯Uç›˜çš„å‘½åã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="/media/15326512660951.jpg" alt=""></p>]]></content>
      
      <categories>
          
          <category> å®ç”¨æŠ€å·§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¼–å†™è·¨æ“ä½œç³»ç»ŸJavaä»£ç æ—¶åŠ¨æ€è·å–æ–‡ä»¶åˆ†éš”ç¬¦</title>
      <link href="/2018/07/26/separator_in_java/"/>
      <url>/2018/07/26/separator_in_java/</url>
      <content type="html"><![CDATA[<h3 id="å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯"><a href="#å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯" class="headerlink" title="å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯"></a>å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯</h3><ol><li><code>File.separator</code>ç³»ç»Ÿç›¸å…³çš„é»˜è®¤åç§°åˆ†éš”ç¬¦ï¼Œä¸ºæ–¹ä¾¿èµ·è§ï¼Œè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ã€‚ è¯¥å­—ç¬¦ä¸²åŒ…å«å•ä¸ªå­—ç¬¦ï¼Œå³separatorCharã€‚</li><li><code>FileSystems.getDefault().getSeparator()</code>è¿”å›åç§°åˆ†éš”ç¬¦ï¼Œè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ã€‚<br>åç§°åˆ†éš”ç¬¦ç”¨äºåˆ†éš”è·¯å¾„å­—ç¬¦ä¸²ä¸­çš„åç§°ã€‚ å®ç°å¯èƒ½æ”¯æŒå¤šä¸ªåç§°åˆ†éš”ç¬¦ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•è¿”å›ç‰¹å®šäºå®ç°çš„é»˜è®¤åç§°åˆ†éš”ç¬¦ã€‚ é€šè¿‡è°ƒç”¨toStringï¼ˆï¼‰æ–¹æ³•åˆ›å»ºè·¯å¾„å­—ç¬¦ä¸²æ—¶ä½¿ç”¨æ­¤åˆ†éš”ç¬¦ã€‚<br>å¯¹äºé»˜è®¤æä¾›ç¨‹åºï¼Œæ­¤æ–¹æ³•è¿”å›ä¸java.io.File.separatorç›¸åŒçš„åˆ†éš”ç¬¦ã€‚</li><li><code>System.getProperty(&quot;file.separator&quot;)</code></li></ol><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œé€‰æ‹©ç¬¬ä¸€ç§ï¼Œå°±okäº†ã€‚ç¬¬äºŒç§æ˜¯åœ¨Java7æ—¶ä»£è¿½åŠ çš„ï¼ŒåŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚ç¬¬ä¸‰ç§ä¹Ÿä¸é”™ï¼Œå› ä¸ºé¢å¤–æä¾›é€šè¿‡<code>-Dfile.separator=</code>å‚æ•°æ¥æŒ‡å®šçš„ç‰¹æ€§ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linuxå…å¯†ç™»å½•ä¸èµ·ä½œç”¨è§£å†³åŠæ³•</title>
      <link href="/2018/07/25/linux_ssh_key/"/>
      <url>/2018/07/25/linux_ssh_key/</url>
      <content type="html"><![CDATA[<p>å·²ç»æŠŠå…¬é’¥æ·»åŠ åˆ°<code>~/.ssh/authorized_keys</code>æ–‡ä»¶ä¹‹åï¼Œæœ‰æ—¶å€™ä¾ç„¶æ— æ³•å®ç°å…å¯†ç ç™»å½•ã€‚åæ¥æ‰å‘ç°ï¼Œæ˜¯å› ä¸ºæœ‰äº›æ–‡ä»¶çš„æƒé™æ”¾å¤§äº†ã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œå¦‚æœ<code>authorized_keys</code>æ–‡ä»¶ï¼Œæ˜¯å…¶ä»–ç”¨æˆ·ä¹Ÿèƒ½ç¼–è¾‘çš„ã€‚é‚£å²‚ä¸æ˜¯å¤šäº†ä¸ªåé—¨ï¼Œå¯ä»¥å¸®åŠ©å…¶ä»–ç”¨æˆ·ç»•åˆ°å½“å‰ç”¨æˆ·äº†ã€‚<br>æ‰€ä»¥é‡ç‚¹åœ¨äºå‡ ä¸ªå…³é”®æ–‡ä»¶æ˜¯å¦æŠŠæƒé™é›†ä¸­åœ¨è‡ªå·±æ‰‹ä¸Šï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•æ˜¯ä¸å…è®¸å…¶ä»–ç”¨æˆ·ç¼–è¾‘çš„ã€‚<br>æ€»ç»“ä¸ºä»¥ä¸‹å‡ æ¡å‘½ä»¤<br><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">chmod 700 ~<span class="string">/.ssh</span></span><br><span class="line">chmod 600 ~<span class="string">/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure></p><p>æœ‰æ—¶å€™ï¼Œå…‰æœ‰ä¸Šé¢ä¸¤å¥è¿˜æä¸å®šï¼Œæˆ‘å‘ç°è¿˜å¾—è¿½åŠ ä¸€å¥<br><figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">chmod <span class="number">755</span> ~</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å°è¯—ä¸€é¦–</title>
      <link href="/2018/07/24/xuzhou_xiari/"/>
      <url>/2018/07/24/xuzhou_xiari/</url>
      <content type="html"><![CDATA[<p><img src="/media/DSC04458.jpg" alt=""></p><h3 id="éƒ½è°“å½­åŸå¤šéœ¾æ—¥ï¼Œ"><a href="#éƒ½è°“å½­åŸå¤šéœ¾æ—¥ï¼Œ" class="headerlink" title="éƒ½è°“å½­åŸå¤šéœ¾æ—¥ï¼Œ"></a>éƒ½è°“å½­åŸå¤šéœ¾æ—¥ï¼Œ</h3><h3 id="è½ç¬”æ˜¥åŸæº…é›é’ã€‚"><a href="#è½ç¬”æ˜¥åŸæº…é›é’ã€‚" class="headerlink" title="è½ç¬”æ˜¥åŸæº…é›é’ã€‚"></a>è½ç¬”æ˜¥åŸæº…é›é’ã€‚</h3><h3 id="å¤©å…¬è«è¦æƒœé¢œè‰²ï¼Œ"><a href="#å¤©å…¬è«è¦æƒœé¢œè‰²ï¼Œ" class="headerlink" title="å¤©å…¬è«è¦æƒœé¢œè‰²ï¼Œ"></a>å¤©å…¬è«è¦æƒœé¢œè‰²ï¼Œ</h3><h3 id="å‡ è®¸è”šè“ä¼´æˆ‘è¡Œã€‚"><a href="#å‡ è®¸è”šè“ä¼´æˆ‘è¡Œã€‚" class="headerlink" title="å‡ è®¸è”šè“ä¼´æˆ‘è¡Œã€‚"></a>å‡ è®¸è”šè“ä¼´æˆ‘è¡Œã€‚</h3><h4 id="â€”â€”æˆŠæˆŒå¹´å…­æœˆå¶ç¥äºå¾å·"><a href="#â€”â€”æˆŠæˆŒå¹´å…­æœˆå¶ç¥äºå¾å·" class="headerlink" title="â€”â€”æˆŠæˆŒå¹´å…­æœˆå¶ç¥äºå¾å·"></a>â€”â€”æˆŠæˆŒå¹´å…­æœˆå¶ç¥äºå¾å·</h4>]]></content>
      
      <categories>
          
          <category> æ–‡è‰ºä¸­å¹´ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>IntelliJ IDEAåœ¨Winodwsä¸‹Gradleä¹±ç é—®é¢˜</title>
      <link href="/2018/07/23/IntelliJ-IDEA_Winodws_Gradle_garbled/"/>
      <url>/2018/07/23/IntelliJ-IDEA_Winodws_Gradle_garbled/</url>
      <content type="html"><![CDATA[<p>ææ€•æ²¡æœ‰å“ªä¸ªä¸­å›½ç¨‹åºå‘˜æ²¡è¢«å­—ç¬¦ç¼–ç çš„é—®é¢˜å‘è¿‡å§ã€‚æœ¬ä»¥ä¸ºæŠŠèƒ½è®¾ç½®å­—ç¬¦é›†çš„åœ°æ–¹ï¼Œéƒ½è®¾ç½®æˆ<code>UTF-8</code>å°±ä¸ä¼šè¸©å‘ã€‚å¯æ˜¯ç°å®æ˜¯æ®‹é…·çš„ã€‚<br>æ¯”å¦‚åœ¨ä¸­æ–‡windowsç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œå¦‚æœä½¿ç”¨IntelliJ IDEAå¼€å‘å·¥å…·ï¼ŒåŒæ—¶è·‘gradleé¡¹ç›®ï¼Œé‚£å°±è¦å°å¿ƒäº†ã€‚<br>éœ€è¦åœ¨<br><code>File | Settings | Build, Execution, Deployment | Gradle</code><br>ä¸‹ï¼Œæ‰¾åˆ°<code>Gradle VM options</code>ï¼Œç„¶åå¡«å…¥é…ç½®<code>-Dfile.encoding=UTF-8</code></p><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹gradle.batè¿™ä¸ªæ–‡ä»¶æ¥å®ç°ï¼Œæ”¹æ–‡ä»¶é€šå¸¸å­˜æ”¾äºï¼Œ<code>GRADLE_HOME</code>ä¸‹çš„<code>bin</code>ç›®å½•ï¼Œæ‰¾åˆ°<code>set DEFAULT_JVM_OPTS=</code>ä¿®æ”¹ä¸º<br><code>set DEFAULT_JVM_OPTS=&quot;-Dfile.encoding=UTF-8&quot;</code><br>å³å¯ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gradle </tag>
            
            <tag> ä¹±ç  </tag>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLé‡Œä¸€æ¡SQLç»Ÿè®¡åˆè®¡ä¸å°è®¡</title>
      <link href="/2018/07/22/postgres_select_total_subtotal_one_sql/"/>
      <url>/2018/07/22/postgres_select_total_subtotal_one_sql/</url>
      <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="keyword">GROUPING</span>(student) = <span class="number">1</span></span><br><span class="line">    <span class="keyword">THEN</span> <span class="string">'åˆè®¡'</span></span><br><span class="line">  <span class="keyword">ELSE</span> student <span class="keyword">END</span>,</span><br><span class="line">  <span class="keyword">CASE</span> <span class="keyword">WHEN</span>  <span class="keyword">GROUPING</span>(student) &lt;&gt; <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">GROUPING</span>(course) = <span class="number">1</span></span><br><span class="line">    <span class="keyword">THEN</span> <span class="string">'å°è®¡'</span></span><br><span class="line">  <span class="keyword">ELSE</span> course <span class="keyword">END</span>,</span><br><span class="line">  <span class="keyword">sum</span>(score.score)</span><br><span class="line"><span class="keyword">FROM</span> score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span> (student, course)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">GROUPING</span>(student) <span class="keyword">DESC</span> ,student <span class="keyword">DESC</span>, <span class="keyword">GROUPING</span>(course) <span class="keyword">DESC</span> ,course <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Vert.xå¼‚æ­¥æ–¹æ³•è½¬åŒæ­¥</title>
      <link href="/2018/07/21/vertx_async_to_sync/"/>
      <url>/2018/07/21/vertx_async_to_sync/</url>
      <content type="html"><![CDATA[<p>ä»¥å‰ç”¨Vert.xçš„æ—¶å€™å°±æœ‰è¿™æ ·çš„ç–‘é—®ï¼Œå¦‚æœæˆ‘æä¾›çš„æ–¹æ³•æ˜¯åŸºäºVert.xå¼‚æ­¥å®ç°çš„ã€‚å¦‚ä½•è¢«ä¸€ä¸ªåŒæ­¥çš„åº”ç”¨è°ƒç”¨å‘¢ï¼Œæ¯”å¦‚Springã€‚å½“æ—¶æˆ‘ä¸€åº¦ä»¥ä¸ºè¦è‡ªå·±å¼€ä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åä¸æ–­è½®è¯¢ç»“æœï¼Œä¹‹åå†è¿”å›ï¼Œé€šè¿‡è¿™æ ·ï¼ŒæŠŠä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•ï¼ŒåŒ…è£…æˆåŒæ­¥çš„æ–¹æ³•ã€‚<br>åæ¥åœ¨ä½¿ç”¨<code>vertx-pac4j</code>çš„æ—¶å€™ï¼Œæ— æ„ä¸­çœ‹åˆ°å®ƒæºç ä¸­ï¼Œä¹Ÿæœ‰æˆ‘ä¸Šé¢è¯´çš„åœºæ™¯ä½¿ç”¨ã€‚å°±åœ¨<code>org.pac4j.vertx.context.session.VertxSessionStore</code>ç±»çš„è¿™ä¸€æ®µï¼š<br><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line">   <span class="keyword">public</span> Session getSession(<span class="keyword">String</span> sessionId) &#123;</span><br><span class="line">       final CompletableFuture&lt;io.vertx.ext.web.Session&gt; vertxSessionFuture = <span class="keyword">new</span> <span class="type">CompletableFuture</span>&lt;&gt;();</span><br><span class="line">       sessionStore.<span class="keyword">get</span>(sessionId, asyncResult -&gt; &#123;</span><br><span class="line">           <span class="keyword">if</span> (asyncResult.succeeded()) &#123;</span><br><span class="line">               vertxSessionFuture.complete(asyncResult.result());</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               vertxSessionFuture.completeExceptionally(asyncResult.cause());</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       final CompletableFuture&lt;Session&gt; pac4jSessionFuture = vertxSessionFuture.thenApply(session -&gt; &#123;</span><br><span class="line">           <span class="keyword">if</span> (session != <span class="literal">null</span>) &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">VertxSession</span>(session);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> pac4jSessionFuture.<span class="keyword">get</span>();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (InterruptedException|ExecutionException e) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">TechnicalException</span>(e);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥æ˜æ˜¾çœ‹åˆ°<code>sessionStore.get</code>æ˜¯çš„å¸¸è§„çš„Vert.xå¼‚æ­¥è°ƒç”¨ã€‚<br>åŸºäºè¿™ç§åº”ç”¨æ–¹å¼ï¼Œæˆ‘å°è¯•ç”¨<code>groovy</code>æ¨¡ä»¿å†™äº†ä¸€ä¸‹ï¼Œæ•ˆæœæ˜¾è‘—ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import io<span class="selector-class">.vertx</span><span class="selector-class">.core</span><span class="selector-class">.Vertx</span></span><br><span class="line"></span><br><span class="line">import java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.CompletableFuture</span></span><br><span class="line"></span><br><span class="line">String sayHello() &#123;</span><br><span class="line">    CompletableFuture completableFuture = new CompletableFuture()</span><br><span class="line"></span><br><span class="line">    Vertx vertx = Vertx.vertx()</span><br><span class="line">    vertx.setTimer(<span class="number">3000</span>, &#123;</span><br><span class="line">        completableFuture.complete(<span class="string">"hello world"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return completableFuture.get()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">println</span><span class="params">(sayHello()</span></span>)</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢è¿™ç§å†™æ³•ï¼Œä¸»è¦è¿˜æ˜¯ä¾èµ–äº†java1.8çš„<code>CompletableFuture</code>ç±»ï¼Œåç»­æˆ‘ä¼šå•ç‹¬å¼€æ–‡ç« è®²è§£è¿™ä¸ªç±»çš„ä½¿ç”¨ã€‚ä»Šå¤©å°±å…ˆåˆ°è¿™é‡Œå§ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vert.x </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¦‚ä½•åœ¨casç™»å½•æˆåŠŸé¡µé¢æ˜¾ç¤ºç”¨æˆ·å</title>
      <link href="/2018/07/20/cas_show_username_in_login_success_page/"/>
      <url>/2018/07/20/cas_show_username_in_login_success_page/</url>
      <content type="html"><![CDATA[<p><a href="https://www.apereo.org/projects/cas" target="_blank" rel="noopener">CAS</a>è¿™ç§æœ¬æ¥ä¸šåŠ¡åœºæ™¯å°±å¾ˆç»†åˆ†ï¼Œå†åŠ ä¸Šå…¶ä¸Šå¤æ—¶ä»£å­˜ç»­è‡³ä»Šçš„ç‰¹è´¨ã€‚ä¼°è®¡è¿˜åœ¨ç”¨å®ƒçš„å…¬å¸å·²ç»ä¸å¤šäº†ã€‚é—´æ¥å¯¼è‡´ï¼Œå…¶ä¸­æ–‡èµ„æ–™æ¯”è¾ƒåŒ®ä¹ã€‚<br>é¢†å¯¼è¯´ï¼Œæƒ³å†casæˆåŠŸåçš„æ¬¢è¿é¡µï¼Œä¹Ÿå°±æ˜¯<code>casGenericSuccess.jsp</code>é¡µé¢ï¼Œå¯ä»¥æ˜¾ç¤º<code>æ¬¢è¿:xxx</code>çš„å­—æ ·ã€‚<br>ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªéœ€æ±‚éå¸¸å¸¸è§„ã€‚ç„¶è€Œä¸ä»…casé»˜è®¤æ²¡æœ‰å®ç°ï¼Œç”šè‡³ç¿»égoogleï¼Œéƒ½å¾ˆéš¾æ‰¾åˆ°æ»¡æ„çš„ç­”æ¡ˆã€‚æ¯”è¾ƒæœ‰å‚è€ƒä»·å€¼çš„å¯èƒ½å°±æ˜¯<a href="https://groups.google.com/forum/#!topic/jasig-cas-user/q_pjYXCe7ko" target="_blank" rel="noopener">google groups</a>ä¸Šçš„è¿™ç¯‡ã€‚å±…ç„¶è¦å€ŸåŠ©é¢å¤–çš„jaråŒ…(è¿˜æ˜¯ä¸ªå·²åœæ­¢ç»´æŠ¤çš„)æ‰èƒ½å®ç°ã€‚ä¸å¾—å·²ï¼Œåªèƒ½è‡ªå·±æƒ³åŠæ³•ã€‚<br>ç°åœ¨ç»™å‡ºæˆ‘çš„æ€è·¯ï¼š</p><ol><li>åœ¨<code>deployerConfigContext.xml</code>æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°<code>authenticationHandlers</code>å‚æ•°ï¼Œå…¶åº”è¯¥å¯¹åº”ä¸€ä¸ªç±»ã€‚åæœ‰å…«ä¹ï¼Œé‚£ä¸ªç±»æ˜¯ä½ è‡ªå·±å®ç°çš„ï¼Œå¦‚æœä¸æ˜¯ï¼Œå¯ä»¥è‡ªå·±ç»§æ‰¿ä¸€ä¸‹åŸæœ‰å‚æ•°é…ç½®çš„ç±»ã€‚</li><li>ç„¶ååœ¨é‚£ä¸ªç±»é‡Œçš„<code>authenticate</code>æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡è¿½åŠ <code>HttpSession session = RequestContextHolder.getRequestAttributes().getSessionMutex().session as HttpSession</code>è¿™ä¹ˆä¸€è¡Œï¼Œè·å–åˆ°<code>session</code>ï¼Œè¿™å°±å—¨çš®äº†ã€‚</li><li>å¯ä»¥åœ¨<code>authenticate</code>æ–¹æ³•éœ€è¦è¿”å›<code>true</code>çš„æ—¶å€™ï¼Œä¹‹å‰å¢åŠ ä¸€è¡Œ<code>session.setAttribute(&quot;username&quot;,balabala);</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±é¡ºåˆ©æŠŠusernameå¡åˆ°<code>session</code>é‡Œçš„</li><li>æœ€åï¼Œä¿®æ”¹<code>casGenericSuccess.jsp</code>ï¼Œåœ¨éœ€è¦æ˜¾ç¤ºç”¨æˆ·åçš„åœ°æ–¹ï¼ŒåŠ å…¥<code>&lt;%=session.getAttribute(&quot;username&quot;)%&gt;</code>ï¼Œå°±å¯ä»¥å®ç°åœ¨ç™»å½•æˆåŠŸé¡µé¢æ˜¾ç¤ºç”¨æˆ·åäº†</li><li>å¦‚æœæƒ³æ˜¾ç¤ºæ›´å¤æ‚æ•°æ®å†…å®¹ï¼Œå¯ä»¥ç•™æ„ä¸‹<code>deployerConfigContext.xml</code>é‡Œé¢çš„<code>credentialsToPrincipalResolvers</code>æ‰€å¯¹åº”çš„ç±»ã€‚å®ƒçš„æ—¶é—´èŠ‚ç‚¹æ˜¯åˆ¤å®šç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œç»„ç»‡ç”¨æˆ·ä¿¡æ¯ç”¨çš„ã€‚</li></ol>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cas </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CentOSç³»ç»Ÿä½¿ç”¨Shadowsocksæ­å»ºä»£ç†æœåŠ¡</title>
      <link href="/2018/07/19/CentOS_Shadowsocks/"/>
      <url>/2018/07/19/CentOS_Shadowsocks/</url>
      <content type="html"><![CDATA[<ol><li>ç¡®è®¤pipæ˜¯å¦å®‰è£…ï¼Œå‘½ä»¤<code>pip help</code>ï¼Œè¿”å›å¦‚å›¾ä¿¡æ¯ï¼Œè¯´æ˜å·²å®‰è£…<br><img src="/media/15319616591142.jpg" alt=""><br>å¦‚æœè¿”å›ä¸‹å›¾ï¼Œè¯´æ˜æœªå®‰è£…<br><img src="/media/15319617008516.jpg" alt=""><br>æœªå®‰è£…éœ€è¦æ‰§è¡Œä»¥ä¸‹å­æ­¥éª¤ï¼š<ul><li><code>yum -y install epel-release</code></li><li><code>yum install python-pip</code></li></ul></li><li>é€šè¿‡pipå®‰è£…shadowsocksï¼Œå‘½ä»¤<code>pip install shadowsocks</code></li><li><p>å‡†å¤‡shadowsocksçš„é…ç½®æ–‡ä»¶ï¼Œæ‰¾ä¸ªåœ°æ–¹æ”¾å°±è¡Œï¼Œæ¯”å¦‚<code>/root/shadowsocks.json</code>ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"server"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="string">"server_port"</span>: <span class="number">1988</span>,</span><br><span class="line">  <span class="string">"local_address"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="string">"local_port"</span>: <span class="number">1080</span>,</span><br><span class="line">  <span class="string">"password"</span>: â€œxyz<span class="string">",</span></span><br><span class="line">  <span class="string">"timeout"</span>: <span class="number">300</span>,</span><br><span class="line">  <span class="string">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">  <span class="string">"fast_open"</span>: false,</span><br><span class="line">  <span class="string">"workers"</span>: <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> å…¶ä¸­<code>server_port</code>ã€<code>passoword</code>ã€<code>method</code>ä¸‰ä¸ªå‚æ•°æ¯”è¾ƒé‡è¦ï¼Œåˆ†åˆ«å¯¹åº”:ä»£ç†æœåŠ¡æ‰€åœ¨ç«¯å£ã€é“¾æ¥å¯†ç ã€åŠ å¯†æ–¹å¼ï¼Œå›å¤´è¦ç”¨åˆ°ã€‚</p></li><li>å‡†å¤‡å¥½é…ç½®æ–‡ä»¶ä¹‹åï¼Œå°±å¯ä»¥å¯åŠ¨shadowsocksæœåŠ¡äº†ï¼Œå‘½ä»¤ä¸º<code>ssserver -c /root/shadowsocks.json -d start</code>ï¼Œè‡³æ­¤shadowsocksæœåŠ¡å¯åŠ¨å®Œæ¯•ï¼Œç„¶åå°±å¯ä»¥ç”¨å®¢æˆ·ç«¯è¿æ¥äº†ã€‚</li><li>å®¢æˆ·ç«¯ä¸‹è½½åœ°å€åœ¨éƒ½åœ¨githubä¸Šï¼Œè¿™é‡Œç»™å‡ºæœ€å¸¸ç”¨çš„macç‰ˆå’Œwindowsç‰ˆ<ul><li><a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases" target="_blank" rel="noopener">mac</a></li><li><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener">windows</a></li></ul></li><li>å®¢æˆ·ç«¯å®‰è£…å®Œæ¯•ï¼Œå°±å¯ä»¥é…ç½®æœåŠ¡å™¨è¿æ¥äº†ï¼Œè¿™é‡Œç»™ä¸ªå‚è€ƒé…ç½®ï¼š<br> <img src="/media/15319627604059.jpg" alt=""><br>åœ°å€å°±æ˜¯æœåŠ¡å™¨æ‰€åœ¨çš„åœ°å€ï¼Œå¤‡æ³¨éšæ„ï¼Œå‰©ä¸‹çš„ä¸‰ä¸ªé…ç½®ï¼Œæ­£å¥½å¯¹åº”ä¸Šé¢æè¿‡çš„é…ç½®ã€‚</li><li>ç¡®å®šshadowsocks clientæ˜¯å¯åŠ¨çŠ¶æ€ï¼Œå°±å¯ä»¥äº«å—ä¸ä¸€æ ·çš„ç½‘ç»œäº†ã€‚</li></ol>]]></content>
      
      <categories>
          
          <category> å®ç”¨æŠ€å·§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç† </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨Gradleè‡ªåŠ¨å‘å¸ƒç¨‹åºè‡³LinuxæœåŠ¡å™¨</title>
      <link href="/2018/07/18/gradle_task_use_ssh/"/>
      <url>/2018/07/18/gradle_task_use_ssh/</url>
      <content type="html"><![CDATA[<p>ä½ çš„é‡å¤åŠ³åŠ¨ï¼Œä¸€å®šèƒ½æ‰¾â€œäººâ€å¸®ä½ åšï¼Œèªæ˜çš„ç¨‹åºå‘˜ä¸€å®šæ˜¯æ‹’ç»é‡å¤çš„ã€‚ç”±äºå…¬å¸æ¡ä»¶é™åˆ¶ï¼Œæš‚æ—¶ç”¨ä¸ä¸Š<code>jenkins</code>ï¼Œå…ˆæ‹¿<code>gradle</code>æ•‘æ•‘æ€¥ä¹Ÿæ˜¯ä¸é”™çš„ã€‚ä»Šå¤©è¦å®ç°çš„æ˜¯ï¼Œé€šè¿‡gradleå‘å¸ƒé™æ€ç«™ç‚¹åˆ°æœåŠ¡å™¨ã€‚è¿™æ ·å¯ä»¥å’Œä¸Šå›çš„<a href="http://www.kankanzhijian.com/2018/07/17/gradle_build_vue/">ç”¨Gradleæ‰“åŒ…Vueå‰ç«¯ç¨‹åº</a>ä¿æŒä¸€å®šçš„è¿è´¯æ€§ã€‚å½“ç„¶æœ¬å¸–æ‹¿æ¥å‘å¸ƒ<code>war</code>åŒ…ä¹Ÿæ˜¯okçš„ã€‚</p><ul><li>é¦–å…ˆè¿½åŠ gradleæ’ä»¶ï¼Œå‚è€ƒå†™æ³•</li></ul><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">plugins</span> &#123;</span><br><span class="line">    <span class="attribute">id</span> <span class="string">'org.hidetake.ssh'</span> version <span class="string">'2.9.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…<br><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">  <span class="keyword">repositories</span> &#123;</span><br><span class="line">    jcenter()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">classpath</span> <span class="string">'org.hidetake:gradle-ssh-plugin:2.9.0'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">apply plugin: <span class="string">'org.hidetake.ssh'</span></span><br></pre></td></tr></table></figure></p><ul><li>é…ç½®æ’ä»¶</li></ul><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">remotes</span> &#123;</span><br><span class="line">    <span class="section">webServer</span> &#123;</span><br><span class="line">        <span class="attribute">host</span> = <span class="string">'192.168.1.100'</span></span><br><span class="line">        user = <span class="string">'develop'</span></span><br><span class="line">        port = <span class="number">22</span></span><br><span class="line">        password = <span class="string">'xyz'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè§‰å¾—å¯†ç æœåŠ¡å™¨å¯†ç æ˜æ–‡å†™åœ¨è¿™é‡Œä¸å®‰å…¨ï¼Œå¯ä»¥ç”¨å…¬é’¥sshçš„æ–¹æ¡ˆï¼Œé‚£ä¹ˆè¿™é‡Œå¯ä»¥ç”¨<code>identity = file(&#39;id_rsa&#39;)</code>ä»£æ›¿æ‰<code>password = &#39;xyz&#39;</code></p><ul><li>é…ç½®å®ŒGradle SSH Pluginï¼Œå°±å¯ä»¥è‡ªå·±å†™<code>task</code>å®ç°ä¸Šä¼ æ–‡ä»¶äº†ã€‚ä¸‹é¢è´´æ®µæˆ‘çš„</li></ul><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">task</span> deployPortal &#123;</span><br><span class="line">    <span class="keyword">group</span> = <span class="string">'release'</span></span><br><span class="line">    dependsOn zipPortal</span><br><span class="line">    <span class="keyword">doLast</span> &#123;</span><br><span class="line">        ssh.run &#123;</span><br><span class="line">            session(remotes.webServer) &#123;</span><br><span class="line">                put <span class="keyword">from</span>: <span class="string">"$buildDir/portal.zip"</span>, <span class="keyword">into</span>: <span class="string">"/home/develop/"</span></span><br><span class="line">                <span class="keyword">def</span> result = execute <span class="string">'unzip -o  /home/develop/portal.zip -d /home/develop/portal/'</span></span><br><span class="line">                <span class="keyword">println</span>(result)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªtaskçš„ä¸»è¦ä½œç”¨å°±æ˜¯æŠŠå‹ç¼©å¥½çš„é™æ€ç«™ç‚¹ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œç„¶åå†è§£å‹ç¼©ã€‚é‡ç‚¹å°±ä¸¤å¥è¯ï¼Œç¬¬ä¸€å¥<code>put from: &quot;æœ¬åœ°æ–‡ä»¶&quot;, into: &quot;æœåŠ¡å™¨è·¯å¾„&quot;</code>ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚ç¬¬äºŒå¥<code>execute &#39;æ‰§è¡Œshellå‘½ä»¤&#39;</code>ï¼Œå®ç°é€šè¿‡shellå‘½ä»¤ï¼Œè§£å‹ç¼©æ–‡ä»¶ã€‚</p><ul><li><p>è‡³äºä¸­é—´é‚£å¥<code>dependsOn zipPortal</code>è¡¨ç¤ºæ‰§è¡Œå‘å¸ƒtaskä¹‹å‰ï¼Œå…ˆè¦æŠŠæ–‡ä»¶å‡†å¤‡å¥½ï¼Œè¿™ä¸ª<code>zipPortal</code>taskæˆ‘æ˜¯è¿™ä¹ˆå†™çš„</p>  <figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">task</span> zipPortal(type: Zip) &#123;</span><br><span class="line">    dependsOn(<span class="string">':portal:build'</span>)</span><br><span class="line">    <span class="keyword">from</span> <span class="string">'portal/www'</span></span><br><span class="line">    archiveName <span class="string">'portal.zip'</span></span><br><span class="line">    <span class="keyword">destinationDir</span> buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ˜¯è¦ä¸Šä¼ <code>war</code>åŒ…çš„è¯ï¼Œå¯èƒ½å°±ä¸æ˜¯<code>dependsOn zipPortal</code>è€Œæ˜¯<code>dependsOn war</code>äº†ã€‚å…¶ä»–çš„åœ°æ–¹ï¼Œå¤§åŒå°å¼‚ã€‚</p></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gradle </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨Gradleæ‰“åŒ…Vueå‰ç«¯ç¨‹åº</title>
      <link href="/2018/07/17/gradle_build_vue/"/>
      <url>/2018/07/17/gradle_build_vue/</url>
      <content type="html"><![CDATA[<p>æˆ‘è¿™è¾¹æ‰“åŒ…å’Œå‘å¸ƒç¨‹åºï¼Œå±äºé‡åº¦ä¾èµ–Gradleçš„çŠ¶æ€ã€‚æ‰€ä»¥çºµå®¹å‰ç«¯ç¨‹åºæ¸¸ç¦»åœ¨è¿™ä¸ªä½“ç³»å¤–ï¼Œä¸åˆ©äºå›¢é˜Ÿçš„æ•´ä½“åä½œã€‚äºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚<br>å…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä»¥Gradleä¸ºåŸºçŸ³çš„é¡¹ç›®ï¼ŒæŠŠå‰åç«¯é¡¹ç›®ç»„ç»‡æˆè¿™æ ·<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">myproject</span><br><span class="line">â”œâ”€â”€ build.gradle</span><br><span class="line">â”œâ”€â”€ frontend</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ build</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ node_modules</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ package.json</span><br><span class="line">â”‚Â Â  â””â”€â”€ src</span><br><span class="line">â”œâ”€â”€ javaweb</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ build</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ build.gradle</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ out</span><br><span class="line">â”‚Â Â  â””â”€â”€ src</span><br><span class="line">â””â”€â”€ settings.gradle</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­<code>frontend</code>æ–‡ä»¶å¤¹å°±æ˜¯<code>vue</code>é¡¹ç›®çš„å­˜æ”¾è·¯å¾„ï¼Œæˆ‘ä»¬å…ˆåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œè¿½åŠ æ–‡ä»¶<code>build.gradle</code>ï¼Œæ”¾è‡³åœ¨package.jsonéš”å£ã€‚å¡«ä¸Šå¾ˆç®€å•çš„å†…å®¹ï¼š<br><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">  <span class="built_in">id</span> <span class="string">"com.palantir.npm-run"</span> <span class="built_in">version</span> <span class="string">"0.5.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»£è¡¨è¿™ä¸ªé¡¹ç›®è¦ç”¨åˆ°gradle-npm-runçš„æ’ä»¶<br>ç„¶åä¿®æ”¹settings.gradleï¼Œè¿½åŠ ä¸€è¡Œ<br><code>include &#39;frontend&#39;</code>ï¼Œè¿™æ ·gradleå°±èƒ½é¡ºåˆ©è¯†åˆ«vueå‰ç«¯é¡¹ç›®äº†ï¼Œå¹¶ä¸”ä¾é æ’ä»¶ï¼Œæˆ‘ä»¬è·å¾—äº†è¿™å‡ ä¸ªtask<br><img src="/media/15317809896046.jpg" alt="-w148"><br>å…¶ä¸­<code>build</code>å°±å¯ä»¥å®ç°é€šè¿‡<code>gradle frontend:build</code>çš„å‘½ä»¤ï¼Œå®ç°gradleå¯¹vueé¡¹ç›®çš„æ‰“åŒ…äº†ã€‚<br>æ˜å¤©ï¼Œæˆ‘å°†ç»§ç»­è®²è§£ï¼Œå¦‚ä½•ç”¨gardleå®ç°åƒLinuxæœåŠ¡å™¨ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> gradle </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linuxæŒ‚è½½æ–°ç£ç›˜ï¼ˆé€‚ç”¨é˜¿é‡Œäº‘ã€åä¸ºäº‘ï¼‰</title>
      <link href="/2018/07/16/linux_mount/"/>
      <url>/2018/07/16/linux_mount/</url>
      <content type="html"><![CDATA[<p>å…¬å¸é¡¹ç›®ç”¨çš„æ˜¯åä¸ºçš„äº‘æœåŠ¡å™¨ï¼Œåˆšç”³è¯·äº†æ–°çš„ç¡¬ç›˜èµ„æºï¼Œéœ€è¦æ‰‹åŠ¨åˆ†åŒºæŒ‚è½½ã€‚è™½ç„¶åä¸ºæ²¡ç»™å•¥èµ„æ–™ï¼Œä½†æ˜¯ä¸æ˜¯è¿˜æœ‰é˜¿é‡Œäº‘å˜›ã€‚æ‰€ä»¥ç»“åˆé˜¿é‡Œäº‘çš„èµ„æ–™ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨åä¸ºäº‘å®æ“ä¸€æŠŠäº†ã€‚é™„é‡Œäº‘èµ„æ–™åœ°å€<a href="https://help.aliyun.com/document_detail/25426.html?spm=a2c4g.11186623.2.4.nTZpwz" target="_blank" rel="noopener">Linux æ ¼å¼åŒ–å’ŒæŒ‚è½½æ•°æ®ç›˜</a></p><ol><li><code>fdisk -l</code>æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦è¯†åˆ«åˆ°æ–°ç¡¬ç›˜çš„æ¥å…¥ï¼Œä¸€èˆ¬ä¼šåœ¨æœ€åï¼Œè¿”å›<figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">ç£ç›˜ /dev/xvdeï¼š<span class="number">536.9</span> GB, <span class="number">536870912000</span> å­—èŠ‚ï¼Œ<span class="number">1048576000</span> ä¸ªæ‰‡åŒº</span><br><span class="line">Units = æ‰‡åŒº of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> bytes</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š<span class="number">512</span> å­—èŠ‚ / <span class="number">512</span> å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š<span class="number">512</span> å­—èŠ‚ / <span class="number">512</span> å­—èŠ‚</span><br></pre></td></tr></table></figure></li></ol><p>è¯´æ˜è¯†åˆ«åˆ°ä¸€ä¸ª500å¤šGçš„ç¡¬ç›˜ï¼Œè®°å½•ä¸‹è¿™ä¸ªç¡¬ç›˜è®¾å¤‡å·<code>/dev/xvde</code>(è¿™æ˜¯ä¸ªå˜é‡ï¼Œä½ é‚£é‡Œä¸ä¸€å®šè·Ÿæˆ‘ä¸€æ ·)</p><ol start="2"><li><code>fdisk /dev/xvde</code>å¯¹ä¸Šé¢çš„æ–°ç¡¬ç›˜è¿›è¡Œåˆ†åŒºæ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼å‘½ä»¤ï¼Œé¦–å…ˆè¾“å…¥<code>n</code>ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºæ–°åˆ†åŒºçš„æ„æ€ï¼Œå¦‚æœå°±æ‰“ç®—åˆ†ä¸€ä¸ªåŒºçš„è¯ï¼Œåç»­å°±æŒ‰æ ¹æ®æç¤ºè¾“å…¥ä¸€è·¯å›è½¦ï¼Œåˆ°å¦‚ä¸‹ç•Œé¢ï¼š<img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-07-16%2009.20.59.png" alt="å±å¹•å¿«ç…§ 2018-07-16 09.20.59"><br>æ­¤æ—¶è¾“å…¥<code>wq</code>å°†åˆ†åŒºè¡¨å†™å…¥ç£ç›˜ï¼Œå¹¶é€€å‡ºã€‚ä¼šæ”¶åˆ°æç¤ºï¼š<br><img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-07-16%2009.22.56.png" alt="å±å¹•å¿«ç…§ 2018-07-16 09.22.56"></li><li><code>fdisk -l</code>å†æ¬¡æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ–°åˆ†åŒºä¿¡æ¯ï¼ˆä¸€èˆ¬åœ¨æœ€åï¼‰<br><img src="/media/15317042937460.jpg" alt=""></li><li><code>mkfs.ext4 /dev/xvde1</code>å°†è¿™ä¸ªåˆ†åŒºæ ¼å¼åŒ–æˆext4æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚å›¾ï¼š<br><img src="/media/15317044049926.jpg" alt=""></li><li><code>mount /dev/xvde1 /mnt</code>æŒ‚è½½åˆ†åŒº</li><li><code>df -h</code>å¯ä»¥æŸ¥çœ‹åˆ°æ–°æŒ‚è½½çš„åˆ†åŒºï¼Œæ­¤æ—¶åˆ†åŒºå·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚ä½†æ˜¯è¿˜æ²¡æœ‰å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œå¦‚æœè¦å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œè¿˜éœ€åšç¬¬7æ­¥</li><li>ä¿é™©èµ·è§ï¼Œå…ˆå¤‡ä»½<code>fstab</code>ï¼Œæ‰§è¡Œå‘½ä»¤<code>cp /etc/fstab /etc/fstab.bak</code>ï¼Œç„¶åæ‰§è¡Œ<code>echo /dev/xvde1 /mnt ext4 defaults 0 0 &gt;&gt; /etc/fstab</code>ã€‚ä¹‹åå³ä½¿é‡å¯ï¼Œåˆ†åŒºä¹Ÿä¼šè‡ªåŠ¨æŒ‚è½½å–½ã€‚å¯ä»¥é€šè¿‡<code>df -h</code>çœ‹åˆ°æ•ˆæœï¼š<br><img src="/media/15317048391668.jpg" alt=""></li></ol>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨äº†dockerä¹‹åæ€§èƒ½æŸè€—å¤šå°‘ï¼Ÿ</title>
      <link href="/2018/07/15/loss_in_docker/"/>
      <url>/2018/07/15/loss_in_docker/</url>
      <content type="html"><![CDATA[<p>Dockerçš„ä¸€å¤§ä¼˜åŠ¿ï¼Œå°±æ˜¯æ‹¥æœ‰å¾®ä¹å…¶å¾®çš„æ€§èƒ½æŸè€—ï¼Œæ¢æ¥è‰¯å¥½çš„ç¡¬ä»¶èµ„æºéš”ç¦»æ•ˆæœã€‚è™½ç„¶å„å¤§å‚å•†éƒ½åœ¨ä¸»è¦ä¸šåŠ¡é¢†åŸŸä½¿ç”¨äº†Dockerï¼Œå·²ç»ä»ä¾§é¢è¡¨æ˜Dockerçš„æ€§èƒ½æŸè€—ä¸æ˜¯ä¸ªä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯è¾ƒçœŸçš„åŒå­¦ï¼Œè‚¯å®šè¿˜æ˜¯æƒ³çŸ¥é“Dockeråˆ°åº•æœ‰æ²¡æœ‰æŸè€—å‘¢ï¼ŒæŸè€—å¤šå°‘ã€‚<br>è¿™é‡Œæˆ‘ç”¨PostgreSQLæ•°æ®åº“åšä¸ªç®€å•çš„å¯¹æ¯”æµ‹è¯•ã€‚åˆ†åˆ«åœ¨åŒä¸€å°æœåŠ¡å™¨çš„Dockerå†…å¤–ä¸ªå„è£…ä¸€ä¸ª10.3ç‰ˆæœ¬çš„PostgreSQLã€‚ç„¶åæ‰§è¡ŒåŒä¸€ä¸ªSQLã€‚SQLå¦‚ä¸‹ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">with cte as ( <span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">VALUES</span> (uuid_generate_v4(), <span class="string">'xiaoming'</span>,<span class="number">10</span>, <span class="string">'è¯­æ–‡'</span>),</span><br><span class="line">      (uuid_generate_v4(), <span class="string">'xiaohong'</span>,<span class="number">12</span>, <span class="string">'æ•°å­¦'</span>),</span><br><span class="line">      (uuid_generate_v4(), <span class="string">'xiaoli'</span>,<span class="number">11</span>, <span class="string">'è‹±è¯­'</span>),</span><br><span class="line">      (uuid_generate_v4(), <span class="string">'xiaozhi'</span>,<span class="number">11</span>, <span class="string">'è‹±è¯­'</span>),</span><br><span class="line">      (uuid_generate_v4(), <span class="string">'xiaoxin'</span>,<span class="number">11</span>, <span class="string">'è‹±è¯­'</span>)</span><br><span class="line">  )</span><br><span class="line">    <span class="keyword">AS</span> tmp (<span class="keyword">id</span>, <span class="keyword">name</span>,age, fav))</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> array_to_json(array_agg(row_to_json(cte)))</span><br><span class="line"><span class="keyword">from</span> cte;</span><br></pre></td></tr></table></figure></p><p>å› ä¸ºä¸æ˜¯ä»ç¡¬ç›˜IOï¼Œæ‰€ä»¥è¿™æ¡SQLæ›´è´´è¿‘äºCPUå¯†é›†å‹çš„åœºæ™¯ã€‚å‹æµ‹åŠŸèƒ½æ˜¯ä¾æ‰˜JMHå¼€å‘çš„ï¼Œæºç å·²ç»ä¸Šä¼ è‡³<a href="https://github.com/aruis/somebenchmark/tree/sqlbench" target="_blank" rel="noopener">https://github.com/aruis/somebenchmark/tree/sqlbench</a>ï¼Œä¸‹é¢ç›´æ¥çœ‹ç»“æœï¼š<br><img src="/media/15316574043348.jpg" alt="-w567"><br>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€è¡Œçš„ååé‡ï¼Œå¤§æ¦‚æ˜¯ç¬¬äºŒè¡Œçš„95%ï¼Œäº¦å³æ˜¯è¯´ï¼Œåœ¨æˆ‘è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼ŒDockeræœ‰5%çš„æ€§èƒ½æŸè€—ã€‚<br>åº”è¯¥å¯ä»¥ç»™å¤§å®¶åšä¸ªå‚è€ƒã€‚</p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç”¨JMHåšç®€å•çš„JVMæ€§èƒ½æµ‹è¯•</title>
      <link href="/2018/07/14/jmh/"/>
      <url>/2018/07/14/jmh/</url>
      <content type="html"><![CDATA[<p>å†™javaä¹Ÿæœ‰å¹´å¤´äº†ï¼Œæœ‰æ—¶å€™é‡åˆ°å¯¹æ¯”æŸå‡ ç§æ–¹æ³•æ€§èƒ½çš„æƒ…æ™¯ï¼Œéƒ½æ˜¯è‡ªå·±å‚»å‚»çš„æ‰“å°<code>new Date()</code>è®¡ç®—æ—¶é—´å·®ã€‚ç°åœ¨æƒ³æ¥ï¼Œè¿™ç§åŸå§‹çš„æ–¹å¼ï¼Œå°±è·Ÿä¸ä¼šç”¨IDE Debugï¼Œåªä¼š<code>System.out.println()</code>æ‰“å°è°ƒè¯•æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚<br>è¿™æ¬¡è¢«äººå®‰åˆ©<code>JMH</code>ï¼Œè¯´æ¥æƒ­æ„§ï¼Œæ˜¯æˆ‘åœ¨Twitterä¸Šè´¨ç–‘<code>Vert.x</code>é‡‡ç”¨äº†æ•ˆç‡ä¸é«˜çš„Jsonåºåˆ—åŒ–åº“ï¼Œå½±å“äº†å…¶åœ¨<a href="https://www.techempower.com/benchmarks/" target="_blank" rel="noopener">techempower</a>çš„æˆç»©ã€‚ç»“æœ<a href="https://twitter.com/julienviet" target="_blank" rel="noopener">@julienviet</a>ç¥å›å¤æˆ‘è¯´â€you should make a JMH microbenchmark to find outâ€ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡ï¼Œåˆ©ç”¨JMHåšJsonåºåˆ—åŒ–é€Ÿåº¦å¯¹æ¯”çš„æ–‡ç« ã€‚<br>è¿™æ˜¯æµ‹è¯•ç»“æœï¼š<br><img src="/media/15315228604634.jpg" alt="-w783"><br>å¯ä»¥çœ‹åˆ°<code>Vert.x</code>çš„Jsonåºåˆ—åŒ–é€Ÿåº¦è¿˜æ˜¯å‡ºç±»æ‹”èƒçš„ï¼Œå½“ç„¶ï¼Œå…¶æœ¬è´¨è¿˜æ˜¯å®ç”¨çš„<code>jackson</code><br>ä¸Šä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aruistar.benchmark;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aruistar.benchmark.model.User;</span><br><span class="line"><span class="keyword">import</span> com.jsoniter.output.JsonStream;</span><br><span class="line"><span class="keyword">import</span> groovy.json.JsonBuilder;</span><br><span class="line"><span class="keyword">import</span> groovy.json.JsonOutput;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.annotations.Benchmark;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.runner.Runner;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.runner.RunnerException;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.runner.options.Options;</span><br><span class="line"><span class="keyword">import</span> org.openjdk.jmh.runner.options.OptionsBuilder;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonToStringBenchmark</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> RunnerException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Options opt = <span class="keyword">new</span> OptionsBuilder()</span><br><span class="line">                .include(JsonToStringBenchmark.class.getSimpleName())</span><br><span class="line">                .forks(<span class="number">1</span>)</span><br><span class="line">                .warmupIterations(<span class="number">2</span>)</span><br><span class="line">                .measurementIterations(<span class="number">3</span>)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Runner(opt).run();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    @Benchmark</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJsonObjectToBuffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> User(<span class="string">"Hello, World!"</span>, <span class="string">"tomcat"</span>, <span class="number">10</span>, <span class="string">"angular"</span>, <span class="keyword">true</span>).toBuffer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJsonObjectToString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> User(<span class="string">"Hello, World!"</span>, <span class="string">"tomcat"</span>, <span class="number">10</span>, <span class="string">"angular"</span>, <span class="keyword">true</span>).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJsonBuilder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> JsonBuilder(<span class="keyword">new</span> User(<span class="string">"Hello, World!"</span>, <span class="string">"tomcat"</span>, <span class="number">10</span>, <span class="string">"angular"</span>, <span class="keyword">true</span>).getMap()).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJsonOutput</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JsonOutput.toJson(<span class="keyword">new</span> User(<span class="string">"Hello, World!"</span>, <span class="string">"tomcat"</span>, <span class="number">10</span>, <span class="string">"angular"</span>, <span class="keyword">true</span>).getMap());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJsoniter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        JsonStream.serialize(<span class="keyword">new</span> User(<span class="string">"Hello, World!"</span>, <span class="string">"tomcat"</span>, <span class="number">10</span>, <span class="string">"angular"</span>, <span class="keyword">true</span>).getMap());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aruistar.benchmark.model;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.vertx.core.json.JsonObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">JsonObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, String username, <span class="keyword">int</span> age, String title, <span class="keyword">boolean</span> bool)</span> </span>&#123;</span><br><span class="line">        put(<span class="string">"name"</span>, name);</span><br><span class="line">        put(<span class="string">"age"</span>, age);</span><br><span class="line">        put(<span class="string">"title"</span>, title);</span><br><span class="line">        put(<span class="string">"bool"</span>, bool);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æºç åœ°å€ï¼Œ<a href="https://github.com/aruis/somebenchmark" target="_blank" rel="noopener">https://github.com/aruis/somebenchmark</a></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨IDEAæ‰“å¼€ï¼Œæƒ³ç›´æ¥é€šè¿‡mainæ–¹æ³•å¯åŠ¨ï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤<br><figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">Do you have org.openjdk.jmh:jmh-generator-annprocess on your classpath?</span><br><span class="line">If yes, <span class="keyword">is</span> annotation processing enabled <span class="built_in">in</span> your IDE? You can find the checkbox under</span><br><span class="line">P<span class="function"><span class="title">references</span> -&gt;</span> B<span class="function"><span class="title">uild</span>, Execution, Deployment -&gt;</span> C<span class="function"><span class="title">ompiler</span> -&gt;</span> Annotation Processors</span><br></pre></td></tr></table></figure></p><ul><li>å‚è€ƒ[<a href="https://github.com/artyushov/idea-jmh-plugin/issues/13]" target="_blank" rel="noopener">https://github.com/artyushov/idea-jmh-plugin/issues/13]</a></li></ul>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PostgreSQLæ•°ç»„ç±»å‹æ•°æ®ä¸€æ¡sqlå®ç°ç¿»è¯‘</title>
      <link href="/2018/07/13/postgresql_select_array/"/>
      <url>/2018/07/13/postgresql_select_array/</url>
      <content type="html"><![CDATA[<p>PostgreSQLçš„ARRAYç±»å‹æ˜¯ä¸ªéå¸¸å®ç”¨çš„ç±»å‹ã€‚ä»¥å¾€åœ¨è®¾è®¡â€œå¤šé€‰â€è¿™ç§ä¸šåŠ¡åœºæ™¯çš„æ—¶å€™ï¼Œè¦ä¹ˆéœ€è¦è®¾è®¡å­è¡¨ï¼Œè¦ä¹ˆå¼„ä¸ªvarcharå­—æ®µï¼Œå­˜æ”¾<code>1,3,5</code>è¿™ç§é€—å·éš”å¼€çš„æ•°æ®ã€‚ç°åœ¨æœ‰äº†åŸç”Ÿæ”¯æŒçš„ARRAYç±»å‹ï¼Œç»ˆäºå¯ä»¥å¤§èƒ†çš„æŠŠå¤šé€‰çš„æ•°æ®idæ”¾åœ¨è¿™ä¸ªå­—æ®µé‡Œäº†ã€‚<br>æ¥è¸µè€Œè‡³çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•ä¸€æ¬¡æ€§å®ç°æ•°ç»„å­—æ®µçš„æ•°æ®ç¿»è¯‘å‘¢ã€‚æ¯”å¦‚å®é™…æ•°æ®æ˜¯<code>{1,3,5}</code>ï¼Œå…³è”æŸ¥è¯¢åï¼Œå¸Œæœ›çœ‹åˆ°<code>{çº¢,é»„,è“}</code><br>è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šsql<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> app_message.id,app_message.ids_at_auth_user__to,</span><br><span class="line">  <span class="built_in">array_agg</span>(auth_user.v_username) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> app_message.id) <span class="keyword">as</span> av_username_at_auth_user</span><br><span class="line"><span class="keyword">from</span> app_message</span><br><span class="line">  <span class="keyword">join</span> auth_user <span class="keyword">on</span> auth_user.id = <span class="keyword">ANY</span> (ids_at_auth_user__to)</span><br></pre></td></tr></table></figure></p><p><code>app_message</code>æ˜¯ä¸ªæ”¶å‘æ¶ˆæ¯è¡¨ï¼Œé‡Œé¢<code>ids_at_auth_user__to</code>å­—æ®µæ˜¯ä¸ªARRAYï¼Œå­˜å‚¨äº†<code>auth_user</code>è¡¨çš„è‹¥å¹²ä¸ªidï¼Œä»£è¡¨æ”¶ä»¶ç®±çš„äººï¼ˆå¤šäººï¼‰<br><img src="/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-04-27%2011.41.45.png" alt="å±å¹•å¿«ç…§ 2018-04-27 11.41.45"></p>]]></content>
      
      <categories>
          
          <category> ç¨‹åºäººç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
