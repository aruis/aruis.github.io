---
title: linux挂载新磁盘（适用阿里云、华为云）
date: 2018-07-16 08:39:04
categories: 程序人生
tags: Linux
---
公司项目用的是华为的云服务器，刚申请了新的硬盘资源，需要手动分区挂载。虽然华为没给啥资料，但是不是还有阿里云嘛。所以结合阿里云的资料。我们就可以在华为云实操一把了。附里云资料地址[Linux 格式化和挂载数据盘](https://help.aliyun.com/document_detail/25426.html?spm=a2c4g.11186623.2.4.nTZpwz)

1. `fdisk -l`查看服务器是否识别到新硬盘的接入，一般会在最后，返回
```
磁盘 /dev/xvde：536.9 GB, 536870912000 字节，1048576000 个扇区
Units = 扇区 of 1 * 512 = 512 bytes
扇区大小(逻辑/物理)：512 字节 / 512 字节
I/O 大小(最小/最佳)：512 字节 / 512 字节
```
说明识别到一个500多G的硬盘，记录下这个硬盘设备号`/dev/xvde`(这是个变量，你那里不一定跟我一样)
2. `fdisk /dev/xvde`对上面的新硬盘进行分区操作，这是一个交互式命令，首先输入`n`，也就是创建新分区的意思，如果就打算分一个区的话，后续就按根据提示输入一路回车，到如下界面：![屏幕快照 2018-07-16 09.20.59](/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-07-16%2009.20.59.png)
此时输入`wq`将分区表写入磁盘，并退出。会收到提示：
![屏幕快照 2018-07-16 09.22.56](/media/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-07-16%2009.22.56.png)
3. `fdisk -l`再次执行此命令，可以看到新分区信息（一般在最后）
![](/media/15317042937460.jpg)
4. `mkfs.ext4 /dev/xvde1`将这个分区格式化成ext4文件系统。如图：
![](/media/15317044049926.jpg)
5. `mount /dev/xvde1 /mnt`挂载分区
6. `df -h`可以查看到新挂载的分区，此时分区已经可以使用了。但是还没有开机自动挂载，如果要开机自动挂载，还需做第7步
7. 保险起见，先备份`fstab`，执行命令`cp /etc/fstab /etc/fstab.bak`，然后执行`echo /dev/xvde1 /mnt ext4 defaults 0 0 >> /etc/fstab`。之后即使重启，分区也会自动挂载喽。可以通过`df -h`看到效果：
![](/media/15317048391668.jpg)
